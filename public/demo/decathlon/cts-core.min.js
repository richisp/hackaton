!function(e){function t(t){for(var i,n,a=t[0],r=t[1],o=0,d=[];o<a.length;o++)n=a[o],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(l&&l(t);d.length;)d.shift()()}var i={},s={0:0};function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var t=[],i=s[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,n){i=s[e]=[t,n]}));t.push(i[2]=a);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=function(e){return n.p+"cts-"+({}[e]||e)+".min.js"}(e);var l=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(d);var i=s[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,i[1](l)}s[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},n.m=e,n.c=i,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://store-time.web.app/",n.oe=function(e){throw console.error(e),e};var a=window.CTS_webpackJsonp=window.CTS_webpackJsonp||[],r=a.push.bind(a);a.push=t,a=a.slice();for(var o=0;o<a.length;o++)t(a[o]);var l=r;n(n.s=3)}([function(e,t){e.exports='<div id=cts-background></div> <div id=cts-header> <div id=cts-header-close-button></div> </div> <div id=cts-status></div> <div id=cts-message></div> <div id=cts-loading class=cts-hidden></div> <div id=cts-hold-message class=cts-hidden> <p>The Sales Representative has temporarily placed this conversation on hold.</p> <p>We will be back in a few minutes.</p> </div> <div id=cts-online-screen class="cts-hidden cts-screen"> <div id=cts-online-screen-body>This is a default online message that needs to be replaced...</div> <div id=cts-online-screen-button>Start Video Call</div> </div> <div id=cts-offline-screen class="cts-hidden cts-screen"> <div id=cts-offline-screen-body>This is a default offline message that needs to be replaced...</div> <div id=cts-offline-screen-button>Close</div> </div> <div id=cts-twilio class=cts-hidden> <div id=cts-local-video class="cts-video-container cts-local cts-thumb"></div> <div id=cts-remote-video class="cts-video-container cts-remote cts-full"></div> </div> <div id=cts-footer> <div id=cts-video-switch class="cts-button cts-hidden"> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 x=0px y=0px viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space=preserve> <path d="M27.5,60.5h45c4.6,0,9.1-3.8,9.1-8.4V26.8c0-4.6-4.5-9.1-9.1-9.1h-9.2c0-3.7-3.8-5.6-8.4-5.6h-9.9c-4.6,0-8.4,1.9-8.4,5.6  h-9.2c-4.6,0-9.1,4.4-9.1,9.1v25.3C18.3,56.7,22.8,60.5,27.5,60.5z M50,25.4c7.8,0,14.1,6.3,14.1,14.1c0,7.8-6.3,14.1-14.1,14.1  c-7.8,0-14.1-6.3-14.1-14.1C35.9,31.7,42.2,25.4,50,25.4z"></path> <circle cx=50 cy=39.4 r=8.4></circle> <path d="M96.1,57.9c-2.2-1.7-4.3-2.5-5.7-3.1C89,54.2,88.2,54,88.2,54c0,0,0.7,0.4,2,1.2c1.2,0.8,3,2.1,4.7,4  c0.8,0.9,1.5,2.1,1.9,3.3c0.3,1.2,0.2,2.5-0.5,3.6c-1.3,2.3-4.4,4-7.7,5.3c-6.7,2.5-14.7,3.5-21.6,3.9c-2.7,0.2-5.3,0.2-7.6,0.2  v10.7c2.7-0.3,5.7-0.8,8.9-1.4c7.4-1.6,15.7-4,22.9-8.3c1.8-1.1,3.5-2.3,5-3.7c1.5-1.4,2.8-3.1,3.5-5.2c0.7-2,0.5-4.3-0.4-5.9  C98.4,59.8,97.2,58.7,96.1,57.9z"></path> <path d="M9,76.4c7.2,4.3,15.5,6.7,22.9,8.3c2.4,0.5,4.8,0.9,7,1.2v6.4l13-11.2l-13-11.2v5.5c-1.8,0-3.7-0.1-5.7-0.2  c-6.9-0.4-14.9-1.3-21.6-3.8c-3.3-1.2-6.4-3-7.8-5.2c-0.7-1.1-0.9-2.3-0.5-3.6c0.3-1.2,1-2.4,1.8-3.3c1.6-1.9,3.4-3.1,4.7-4  c1.2-0.8,2-1.2,2-1.2c0,0-0.8,0.2-2.2,0.8c-1.4,0.6-3.4,1.4-5.7,3.1c-1.1,0.9-2.3,2-3.1,3.6c-0.8,1.6-1,3.9-0.3,5.9  c0.7,2,2.1,3.7,3.6,5.2C5.5,74.1,7.2,75.3,9,76.4z"></path> </svg> </div> <div id=cts-video-toggle class="cts-button cts-toggle cts-hidden"> <div class="cts-speech-bubble cts-off"> <div class=cts-speech-bubble-close>+</div> <span id=cts-tooltip-video-off>Sales Representative cannot see you</span> </div> <svg class=cts-on viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;width:100%;height:100%> <g class="style-scope iron-icon"> <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" class="style-scope iron-icon"></path> </g> </svg> <svg class=cts-off viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;width:100%;height:100%> <g class="style-scope iron-icon"> <path d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z" class="style-scope iron-icon"></path> </g> </svg> </div> <div id=cts-hangup class=cts-button> <svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;display:block;width:100%;height:100%> <g> <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"></path> </g> </svg> </div> <div id=cts-audio-toggle class="cts-button cts-toggle cts-hidden"> <div class="cts-speech-bubble cts-off"> <div class=cts-speech-bubble-close>+</div> <span id=cts-tooltip-audio-off>Sales Representative cannot hear you</span> </div> <svg class=cts-on viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;width:100%;height:100%> <g class="style-scope iron-icon"> <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" class="style-scope iron-icon"></path> </g> </svg> <svg class=cts-off viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;width:100%;height:100%> <g class="style-scope iron-icon"> <path d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z" class="style-scope iron-icon"></path> </g> </svg> </div> <div id=cts-settings class="cts-button cts-hidden"> <svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style=pointer-events:none;display:block;width:100%;height:100%> <g class="style-scope iron-icon"> <path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" class="style-scope iron-icon"></path> </g> </svg> </div> </div>'},function(e,t,i){e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=90)}({17:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s=i(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var i=t.match(e);return i&&i.length>0&&i[1]||""},e.getSecondMatch=function(e,t){var i=t.match(e);return i&&i.length>1&&i[2]||""},e.matchAndReturnConst=function(e,t,i){if(e.test(t))return i},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,i,s){void 0===s&&(s=!1);var n=e.getVersionPrecision(t),a=e.getVersionPrecision(i),r=Math.max(n,a),o=0,l=e.map([t,i],(function(t){var i=r-e.getVersionPrecision(t),s=t+new Array(i+1).join(".0");return e.map(s.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(s&&(o=r-Math.min(n,a)),r-=1;r>=o;){if(l[0][r]>l[1][r])return 1;if(l[0][r]===l[1][r]){if(r===o)return 0;r-=1}else if(l[0][r]<l[1][r])return-1}},e.map=function(e,t){var i,s=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)s.push(t(e[i]));return s},e.find=function(e,t){var i,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(i=0,s=e.length;i<s;i+=1){var n=e[i];if(t(n,i))return n}},e.assign=function(e){for(var t,i,s=e,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];if(Object.assign)return Object.assign.apply(Object,[e].concat(a));var o=function(){var e=a[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){s[t]=e[t]}))};for(t=0,i=a.length;t<i;t+=1)o();return e},e.getBrowserAlias=function(e){return s.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return s.BROWSER_MAP[e]||""},e}();t.default=n,e.exports=t.default},18:function(e,t,i){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s,n=(s=i(91))&&s.__esModule?s:{default:s},a=i(18);function r(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(){}var t,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,(i=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}])&&r(t,i),e}();t.default=o,e.exports=t.default},91:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s=l(i(92)),n=l(i(93)),a=l(i(94)),r=l(i(95)),o=l(i(17));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,i={},s=0,n={},a=0;if(Object.keys(e).forEach((function(t){var r=e[t];"string"==typeof r?(n[t]=r,a+=1):"object"==typeof r&&(i[t]=r,s+=1)})),s>0){var r=Object.keys(i),l=o.default.find(r,(function(e){return t.isOS(e)}));if(l){var d=this.satisfies(i[l]);if(void 0!==d)return d}var c=o.default.find(r,(function(e){return t.isPlatform(e)}));if(c){var h=this.satisfies(i[c]);if(void 0!==h)return h}}if(a>0){var u=Object.keys(n),f=o.default.find(u,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var i=this.getBrowserName().toLowerCase(),s=e.toLowerCase(),n=o.default.getBrowserTypeByAlias(s);return t&&n&&(s=n.toLowerCase()),s===i},t.compareVersion=function(e){var t=[0],i=e,s=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(i=e.substr(1),"="===e[1]?(s=!0,i=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?i=e.substr(1):"~"===e[0]&&(s=!0,i=e.substr(1)),t.indexOf(o.default.compareVersions(n,i,s))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s,n=(s=i(17))&&s.__esModule?s:{default:s},a=/version\/(\d+(\.?_?\d+)+)/i,r=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},i=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},i=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},i=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},i=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},i=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},i=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},i=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},i=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},i=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},i=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},i=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},i=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},i=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},i=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},i=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},i=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},i=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},i=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},i=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},i=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},i=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},i=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},i=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},i=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},i=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t={name:"Android Browser"},i=n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},i=n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},i=n.default.getFirstMatch(a,e);return i&&(t.version=i),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=r,e.exports=t.default},93:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s,n=(s=i(17))&&s.__esModule?s:{default:s},a=i(18),r=[{test:[/Roku\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=n.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){var t=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return{name:a.OS_MAP.iOS,version:t}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=n.default.getMacOSVersionName(t),s={name:a.OS_MAP.MacOS,version:t};return i&&(s.versionName=i),s}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=n.default.getAndroidVersionName(t),s={name:a.OS_MAP.Android,version:t};return i&&(s.versionName=i),s}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:a.OS_MAP.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||n.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}];t.default=r,e.exports=t.default},94:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s,n=(s=i(17))&&s.__esModule?s:{default:s},a=i(18),r=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];t.default=r,e.exports=t.default},95:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s,n=(s=i(17))&&s.__esModule?s:{default:s},a=i(18),r=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},i=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},i=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},i=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},i=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];t.default=r,e.exports=t.default}})},function(e,t,i){},function(e,t,i){"use strict";i.r(t);function s(e,t){if(e&&t)for(var i in t)try{e.style[i]=t[i]}catch(s){console.error("[CTS] Error applying style to element: ",s,{element:e,style:t,prop:i})}}var n={applyElementStyle:s,applyElementContent:function e(t,i,n){if(t&&i)try{var a=typeof i;if("string"===a)(r=document.createElement("span")).innerText=i,t.appendChild(r);else if(Array.isArray(i)&&i.length>0)i.forEach(i=>{e(t,i,n)});else if("object"===a){var r=null;"text"===i.type?(r=document.createElement("span")).innerText=i.text:"image"===i.type?(r=document.createElement("img")).src=i.src:"link"===i.type?((r=document.createElement("a")).href=i.href,r.target="_blank"):"container"===i.type&&(r=document.createElement("div")),null!=r&&(i.style&&s(r,i.style),i.body&&e(r,i.body,n),i.event&&n&&i.event.binding&&r.addEventListener(i.event.binding,e=>(n(i.event),e.stopPropagation(),!1)),t.appendChild(r))}}catch(e){console.error("[CTS] Error applying content to element: ",e,{element:t,content:i})}},getCookie:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}},a=(i(2),i(0)),r=i.n(a);class o{constructor(e,t){this.parent=e,this.frame=t,this.elements={},this.build(this.parent.settings||{}),this.user=null,this.call=null,this.room=null,this.media=null,this.devices=null,this.videoState="disconnected",this.allowVideo=e.settings.allowVideo||!1,this.hangUpClicked=this.hangUpClicked.bind(this),this.audioToggleClicked=this.audioToggleClicked.bind(this),this.videoToggleClicked=this.videoToggleClicked.bind(this),this.videoSwitchClicked=this.videoSwitchClicked.bind(this),this.settingsClicked=this.settingsClicked.bind(this),this.attachTrack=this.attachTrack.bind(this),this.detachTrack=this.detachTrack.bind(this),this.participantConnected=this.participantConnected.bind(this),this.participantDisconnected=this.participantDisconnected.bind(this),this.showOnlineScreen=this.showOnlineScreen.bind(this),this.showOfflineScreen=this.showOfflineScreen.bind(this)}importVideo(){return i.e(1).then(i.t.bind(null,201,7)).then(({default:e})=>(this.video||(this.video=e),this.video))}build(e){var t=e.style;if(this.frame.innerHTML=r.a,this.elements.background=this.frame.querySelector("#cts-background"),this.elements.header=this.frame.querySelector("#cts-header"),this.elements.closeButton=this.frame.querySelector("#cts-header-close-button"),this.elements.status=this.frame.querySelector("#cts-status"),this.elements.message=this.frame.querySelector("#cts-message"),this.elements.loading=this.frame.querySelector("#cts-loading"),this.elements.loading.innerHTML='<img src="https://store-time.web.app/assets/images/loading_anim.png?734e132be239d2685ebca8239a26b00d" style="width: 40%;" />',this.elements.localVideoContainer=this.frame.querySelector("#cts-local-video"),this.elements.remoteVideoContainer=this.frame.querySelector("#cts-remote-video"),this.elements.twilio=this.frame.querySelector("#cts-twilio"),this.elements.videoSwitch=this.frame.querySelector("#cts-video-switch"),this.elements.videoToggle=this.frame.querySelector("#cts-video-toggle"),this.elements.hangUp=this.frame.querySelector("#cts-hangup"),this.elements.audioToggle=this.frame.querySelector("#cts-audio-toggle"),this.elements.settings=this.frame.querySelector("#cts-settings"),this.elements.footer=this.frame.querySelector("#cts-footer"),this.elements.hangUp.addEventListener("click",function(){this.hangUpClicked()}.bind(this)),this.elements.closeButton.addEventListener("click",function(){this.parent.hidePane()}.bind(this)),this.elements.tooltipAudioOff=this.frame.querySelector("#cts-tooltip-audio-off"),this.elements.tooltipVideoOff=this.frame.querySelector("#cts-tooltip-video-off"),this.elements.holdMessage=this.frame.querySelector("#cts-hold-message"),this.elements.holdMessage.style.backgroundImage="url(https://store-time.web.app/assets/images/agent-silhouette.png?49eb9e0a50f2ce304983afdc2f995f62)",this.elements.onlineScreen=this.frame.querySelector("#cts-online-screen"),this.elements.onlineScreenBody=this.frame.querySelector("#cts-online-screen-body"),this.elements.onlineScreenButton=this.frame.querySelector("#cts-online-screen-button"),this.elements.offlineScreen=this.frame.querySelector("#cts-offline-screen"),this.elements.offlineScreenBody=this.frame.querySelector("#cts-offline-screen-body"),this.elements.offlineScreenButton=this.frame.querySelector("#cts-offline-screen-button"),this.elements.onlineScreenButton.addEventListener("click",function(){this.parent.startCall()}.bind(this)),this.elements.offlineScreenButton.addEventListener("click",function(){this.parent.hidePane()}.bind(this)),this.allowVideo||this.elements.localVideoContainer.classList.add("cts-hidden"),this.frame.querySelectorAll(".cts-speech-bubble").forEach(e=>{e.addEventListener("click",e=>{e.target.classList.contains("cts-speech-bubble")?e.target.remove():e.target.parentElement.remove(),e.stopPropagation()})}),t)for(var i in t)"object"==typeof t[i]&&"object"==typeof this.elements[i]&&n.applyElementStyle(this.elements[i],t[i]);var s=e.tooltips;s&&("string"==typeof s.audio_off&&(this.elements.tooltipAudioOff.innerText=s.audio_off),"string"==typeof s.video_off&&(this.elements.tooltipVideoOff.innerText=s.video_off));var a=e.screens;a&&(a.onhold&&(a.onhold.style&&n.applyElementStyle(this.elements.holdMessage,a.onhold.style),a.onhold.body&&(this.elements.holdMessage.innerHTML="",n.applyElementContent(this.elements.holdMessage,a.onhold.body))),a.online&&(a.online.style&&n.applyElementStyle(this.elements.onlineScreen,a.online.style),a.online.body&&(a.online.body.style&&n.applyElementStyle(this.elements.onlineScreenBody,a.online.body.style),a.online.body.content&&(this.elements.onlineScreenBody.innerHTML="",n.applyElementContent(this.elements.onlineScreenBody,a.online.body.content)),n.applyElementContent(this.elements.onlineScreenBody,a.online.body)),a.online.button&&(a.online.button.style&&n.applyElementStyle(this.elements.onlineScreenButton,a.online.button.style),a.online.button.content&&(this.elements.onlineScreenButton.innerHTML="",n.applyElementContent(this.elements.onlineScreenButton,a.online.button.content)))),a.offline&&(a.offline.style&&n.applyElementStyle(this.elements.offlineScreen,a.offline.style),a.offline.body&&(a.offline.body.style&&n.applyElementStyle(this.elements.offlineScreenBody,a.offline.body.style),a.offline.body.content&&(this.elements.offlineScreenBody.innerHTML="",n.applyElementContent(this.elements.offlineScreenBody,a.offline.body.content)),n.applyElementContent(this.elements.offlineScreenBody,a.offline.body)),a.offline.button&&(a.offline.button.style&&n.applyElementStyle(this.elements.offlineScreenButton,a.offline.button.style),a.offline.button.content&&(this.elements.offlineScreenButton.innerHTML="",n.applyElementContent(this.elements.offlineScreenButton,a.offline.button.content)))))}setStatus(e){var t="",i="";"string"==typeof e?t=e||"":Array.isArray(e)&&(t=e[0]||"",i=e[1]||""),this.elements.status.innerText=t,this.elements.message.innerText=i,this.elements.onlineScreen.classList.add("cts-hidden"),this.elements.offlineScreen.classList.add("cts-hidden"),this.elements.footer.classList.remove("cts-hidden")}get connected(){return"connected"==this.videoState}connect(e,t,i){this.importVideo().then(s=>{this.connectToRoom(e,t),this.parent.updateState("CallActive"),this.elements.loading.classList.add("cts-hidden"),i?this.holdOn():(this.setStatus(),this.elements.twilio.classList.remove("cts-hidden"),this.toggleControls(!0))})}disconnect(){var e=this.room;e&&(this.room=null,this.elements.twilio.classList.add("cts-hidden"),this.elements.twilio.querySelectorAll("video").forEach(e=>e.remove()),this.elements.twilio.querySelectorAll("audio").forEach(e=>e.remove()),e.localParticipant.tracks.forEach(e=>e.stop()),e.disconnect(),this.videoCallEnded(),this.videoState="disconnected")}holdOn(){this.room&&(this.toggleLocalTrack("video",!1),this.toggleLocalTrack("audio",!1)),this.toggleControls(!1),this.elements.onlineScreen.classList.add("cts-hidden"),this.elements.offlineScreen.classList.add("cts-hidden"),this.elements.holdMessage.classList.remove("cts-hidden"),this.elements.twilio.classList.add("cts-hidden")}holdOff(){this.room&&(this.allowVideo&&this.toggleLocalTrack("video",this.media.videoEnabled),this.toggleLocalTrack("audio",this.media.audioEnabled),this.toggleControls(!0),this.elements.twilio.classList.remove("cts-hidden")),this.elements.holdMessage.classList.add("cts-hidden")}toggleControls(e){e?(this.allowVideo&&this.elements.videoToggle.classList.remove("cts-hidden"),this.elements.audioToggle.classList.remove("cts-hidden"),this.media&&this.media.canSwitchCameras&&this.elements.videoSwitch.classList.remove("cts-hidden")):(this.elements.videoToggle.classList.add("cts-hidden"),this.elements.audioToggle.classList.add("cts-hidden"),this.media&&this.media.canSwitchCameras&&this.elements.videoSwitch.classList.add("cts-hidden"))}getDevices(){var e={microphones:{},microphoneCount:0,speakers:{},speakerCount:0,cameras:{},cameraCount:0};return navigator.mediaDevices.enumerateDevices().then(t=>{for(var i=0;i!==t.length;++i){var s=t[i];"audioinput"===s.kind?(e.microphoneCount++,e.microphones[s.deviceId]=s.label||"Microphone "+e.microphoneCount):"audiooutput"===s.kind?(e.speakerCount++,e.speakers[s.deviceId]=s.label||"Speaker "+e.speakerCount):"videoinput"===s.kind&&(e.cameraCount++,e.cameras[s.deviceId]=s.label||"Camera "+e.cameraCount)}return e})}connectToRoom(e,t){"disconnected"===this.videoState&&(this.videoState="connecting",this.getDevices().then(i=>{this.devices=i;var s={audio:!1,video:!1,speaker:!1,canSwitchCameras:!1,audioEnabled:!0,videoEnabled:!0};try{var n=localStorage.getItem("CallTheStore.MediaSettings");if(n&&""!==n){var a=JSON.parse(n);a&&(s=a)}}catch(e){}if(!s.audio){var r=0;for(var o in i.microphones){if(0==r||"default"===o)s.audio={deviceId:o};else if("communications"===o){s.audio={deviceId:o};break}r++}}if(!s.speakers){r=0;for(var o in i.speakers){if(0==r||"default"===o)s.speaker={deviceId:o};else if("communications"===o){s.speaker={deviceId:o};break}r++}}if(this.allowVideo){if(!s.video){r=0;for(var o in i.cameras){if(0==r||"default"===o)s.video={deviceId:o};else if(i.cameras[o]&&i.cameras[o].match(/front/gi)){s.video={deviceId:o};break}r++}}var l=null,d=null;r=0;for(var o in i.cameras)i.cameras[o]&&i.cameras[o].match(/front/)?d=o:i.cameras[o]&&i.cameras[o].match(/back/)?l=o:0==r&&(d=o),r++;s.canSwitchCameras=d&&l,s.frontCamera=d,s.backCamera=l}else s.video=!1,s.videoEnabled=!1,s.canSwitchCameras=!1;return this.media=s,this.mediaUpdated(),this.video.connect(t,{name:e,video:!1,audio:!1})}).then(e=>{this.room=e,this.videoState="connected",this.updateRoom(),e.localParticipant.tracks.forEach((function(e){if("audio"!=e.kind&&this.allowVideo){var t=e.attach();this.elements.localVideoContainer.appendChild(t)}})),e.participants.forEach(function(e){e.tracks.forEach(this.attachTrack),this.participantConnected(e)}.bind(this)),e.on("participantConnected",this.participantConnected),e.on("participantDisconnected",this.participantDisconnected),this.videoCallStarted()}).catch(e=>{this.parent.error("Error connecting to video room",e),this.videoState="disconnected"}))}updateRoom(e,t){var i=!0,s=!0,n=!0;if(e&&t){try{i=e.video.deviceId!==t.video.deviceId||e.quality!==t.quality}catch(e){}try{s=e.audio.deviceId!==t.audio.deviceId}catch(e){}try{n=e.speaker.deviceId!==t.speaker.deviceId}catch(e){}}if(this.room){var a=this.room;n&&document.querySelectorAll("audio").forEach(e=>{"function"==typeof e.setSinkId&&"object"==typeof this.media.speaker&&e.setSinkId(this.media.speaker.deviceId)}),(s||i)&&this.video.createLocalTracks({video:!!i&&this.media.video,audio:!!s&&this.media.audio}).then(e=>{a.localParticipant.tracks.forEach(e=>{("video"==e.kind&&i||"audio"==e.kind&&s)&&a.localParticipant.removeTrack(e)});for(var t=0;t<e.length;t++)(!this.media.audioEnabled&&"audio"==e[t].kind||!this.media.videoEnabled&&"video"==e[t].kind)&&e[t].disable(),a.localParticipant.publishTrack(e[t]);i&&(document.querySelectorAll("#localVideoContainer video").forEach(e=>{e.remove()}),this.allowVideo&&a.localParticipant.tracks.forEach(e=>{if("video"==e.kind){var t=e.attach();t.id="localVideo",this.elements.localVideoContainer.appendChild(t)}}))})}}participantConnected(e){e.on("trackSubscribed",this.attachTrack),e.on("trackUnsubscribed",this.detachTrack)}participantDisconnected(e){e.tracks.forEach(this.detachTrack)}attachTrack(e){var t=e.attach();"audio"==e.kind&&"function"==typeof t.setSinkId&&"object"==typeof this.media.speaker&&t.setSinkId(this.media.speaker.deviceId),this.elements.remoteVideoContainer.appendChild(t)}detachTrack(e){e.detach().forEach((function(e){e.remove()}))}toggleLocalTrack(e,t){this.room&&this.room.localParticipant.tracks.forEach(i=>{i.kind==e&&(t?i.enable():i.disable())})}mediaUpdated(){try{localStorage.setItem("CallTheStore.MediaSettings",JSON.stringify(this.media))}catch(e){}}hangUpClicked(){this.parent.endCall()}audioToggleClicked(e){this.media.audioEnabled=!this.media.audioEnabled,this.toggleLocalTrack("audio",this.media.audioEnabled);var t=e.target||e.srcElement;t.classList.add(this.media.audioEnabled?"cts-on":"cts-off"),t.classList.remove(this.media.audioEnabled?"cts-off":"cts-on"),this.mediaUpdated()}videoToggleClicked(e){this.media.videoEnabled=!this.media.videoEnabled,this.toggleLocalTrack("video",this.media.videoEnabled);var t=e.target||e.srcElement;t.classList.add(this.media.videoEnabled?"cts-on":"cts-off"),t.classList.remove(this.media.videoEnabled?"cts-off":"cts-on"),this.mediaUpdated()}videoSwitchClicked(){if(this.media.canSwitchCameras&&"object"==typeof this.media.video){var e=JSON.parse(JSON.stringify(this.media));this.media.video.deviceId==this.media.frontCamera?this.media.video.deviceId=this.media.backCamera:this.media.video.deviceId=this.media.frontCamera,this.mediaUpdated(),this.updateRoom(e,this.media)}}settingsClicked(){this.parent.info("settingsClicked is not yet implemented")}videoCallStarted(e){this.elements.footer.classList.remove("cts-hidden"),this.elements.audioToggle.addEventListener("click",this.audioToggleClicked),this.elements.videoToggle.addEventListener("click",this.videoToggleClicked),this.elements.videoSwitch.addEventListener("click",this.videoSwitchClicked),this.media&&(this.media.audio&&(this.elements.audioToggle.classList.add(this.media.audioEnabled?"cts-on":"cts-off"),this.elements.audioToggle.classList.remove(this.media.audioEnabled?"cts-off":"cts-on")),this.media.video&&(this.elements.videoToggle.classList.add(this.media.videoEnabled?"cts-on":"cts-off"),this.elements.videoToggle.classList.remove(this.media.videoEnabled?"cts-off":"cts-on")),this.media.canSwitchCameras&&this.elements.videoSwitch.classList.remove("cts-hidden"))}videoCallEnded(){this.elements.footer.classList.add("cts-hidden"),this.elements.audioToggle.removeEventListener("click",this.audioToggleClicked),this.elements.videoToggle.removeEventListener("click",this.videoToggleClicked),this.elements.videoSwitch.removeEventListener("click",this.videoSwitchClicked),this.elements.audioToggle.classList.add("cts-hidden"),this.elements.videoToggle.classList.add("cts-hidden"),this.elements.videoSwitch.classList.add("cts-hidden")}showOnlineScreen(){this.elements.footer.classList.add("cts-hidden"),this.elements.offlineScreen.classList.add("cts-hidden"),this.elements.onlineScreen.classList.remove("cts-hidden")}showOfflineScreen(){this.elements.footer.classList.add("cts-hidden"),this.elements.onlineScreen.classList.add("cts-hidden"),this.elements.offlineScreen.classList.remove("cts-hidden")}}var l=i(1),d=i.n(l);function c(){var e=null;try{e=sessionStorage.getItem("cts_tabId")||Math.random().toString(36).substr(2,9),sessionStorage.setItem("cts_tabId",e)}catch(e){}return e||"default"}class h{constructor(e){this.environment=e.environment||"prod","dev"===this.environment?(this.defaultHost="https://callthestore-dev.web.app",this.defaultFirebaseConfig={apiKey:"AIzaSyAOB180Ivsfo_gI1Yhu6KD5cWuwCdMz1l4",authDomain:"callthestore-dev.firebaseapp.com",databaseURL:"https://callthestore-dev.firebaseio.com",projectId:"callthestore-dev",storageBucket:"callthestore-dev.appspot.com",messagingSenderId:"817654853201",appId:"1:817654853201:web:12e54733cbff4852f15270"}):"sandbox"===this.environment?(this.defaultHost="https://call-the-store-sandbox.web.app",this.defaultFirebaseConfig={apiKey:"AIzaSyDfewPQMCkbHAuRJ0LyVkimCFir6t-cHXI",authDomain:"call-the-store-sandbox.firebaseapp.com",databaseURL:"https://call-the-store-sandbox.firebaseio.com",projectId:"call-the-store-sandbox",storageBucket:"call-the-store-sandbox.appspot.com",messagingSenderId:"8767982896",appId:"1:8767982896:web:dec5bc63039a7ed7c74cf5"}):(this.defaultHost="https://store-time.web.app",this.defaultFirebaseConfig={apiKey:"AIzaSyClYNJJ3Uc1x7gm3Xpv065vPSwR_0su5fU",authDomain:"store-time.firebaseapp.com",databaseURL:"https://store-time.firebaseio.com",projectId:"store-time",storageBucket:"store-time.appspot.com",messagingSenderId:"836765699408"}),this.host=e.host||this.defaultHost,this.debug=!!e.debug,this.settings=Object.assign(h.defaultSettings(this.host),e),this.browser=null,this.browserSupported=!1,this.elements={},this.initialized=!1,this.listeningToReadyState=!1,this.styles=null,this.supported={chrome:">=63",firefox:">=56",safari:">=11"},this.firebase=null,this.db=null,this.auth=null,this.state={available:!1,call:!1,call_status:null,isTabVisible:!1,isPaneVisible:!1,paneOpen:!1,dnd:!1,user:null,userData:null,requestingCall:!1,call:null,tabId:c(),call_tabId:null},this.frame=null,this.init=this.init.bind(this),this.authStateChanged=this.authStateChanged.bind(this),this.documentClick=this.documentClick.bind(this),this.tabClicked=this.tabClicked.bind(this),this.dndOn=this.dndOn.bind(this),this.dndOff=this.dndOff.bind(this),this.pokeCall=this.pokeCall.bind(this),this.startCall=this.startCall.bind(this),this.showLandingPage=this.showLandingPage.bind(this),this.getStatusMessage=this.getStatusMessage.bind(this),this.elementEventHandler=this.elementEventHandler.bind(this),this.build=this.build.bind(this),this.focused=this.focused.bind(this),this.blurred=this.blurred.bind(this)}static defaultSettings(e){return{host:e,style:{}}}info(e,t){this.debug&&console&&console.info&&(t?console.info(`[CTS] ${e}: `,t):console.info(`[CTS] ${e}: `))}error(e,t){console&&console.error&&console.error(`[CTS] ${e}: `,t)}importFirebase(){return Promise.all([i.e(2),i.e(3)]).then(i.bind(null,200)).then(e=>{if(!this.firebase&&e&&e.firebase){var t=this.settings.firebase||this.defaultFirebaseConfig;this.firebase=e.firebase.initializeApp(t),this.db=this.firebase.database(),this.auth=this.firebase.auth(),this.auth.onAuthStateChanged(this.authStateChanged),this.db.ref(`availableLocations/${this.settings.company}/${this.settings.location}`).on("value",e=>{this.updateState(e.val()?"Available":"Unavailable")})}else firebase||console.log("Firebase failed to load");return this.firebase})}command(e){var t=this.state.user;if(t){var i=`/callers/${this.settings.company}/${this.settings.location}/${t.uid}/commands`;this.info(`path = ${i}, cmd = ${JSON.stringify(e)}`),this.db.ref(i).push(e)}}authStateChanged(e){var t=this.state.user;this.state.user=e;var i=this.settings.connectHash;if(this.state.connectHash=null,null!=this.state.user)this.db.ref(`callers/${this.settings.company}/${this.settings.location}/${e.uid}/data`).on("value",e=>{var t=this.state.userData;this.state.userData=e.val(),this.userDataUpdated(this.state.userData,t)}),i&&this.requestConnect(i);else{null!=t&&this.db.ref(`callers/${this.settings.company}/${this.settings.location}/${t.uid}/data`).off();var s=this.state.userData;this.state.userData=null,this.userDataUpdated(null,s)}}userDataUpdated(e,t){if(e){try{e.call_id?sessionStorage.setItem("cts_call_id",e.call_id):sessionStorage.removeItem("cts_call_id")}catch(e){}if(e.call_id)this.db.ref(`calls/${this.settings.company}/${this.settings.location}/${e.call_id}`).on("value",e=>{var t=this.state.call?{...this.state.call}:null;this.state.call=e.val(),this.callUpdated(this.state.call,t)});else if(t.call_id){this.db.ref(`calls/${this.settings.company}/${this.settings.location}/${t.call_id}`).off();var i=this.state.call?{...this.state.call}:null;delete this.state.call,this.callUpdated(null,i)}}else{try{sessionStorage.removeItem("cts_call_id")}catch(e){}if(t&&t.call_id){this.db.ref(`calls/${this.settings.company}/${this.settings.location}/${t.call_id}`).off();i=this.state.call?{...this.state.call}:null;delete this.state.call,this.callUpdated(null,i)}}}tabClicked(){this.auth&&(this.state.paneOpen=!0,this.update(),this.settings.screens&&this.settings.screens.showLandingScreen?this.showLandingPage():this.startCall())}dndOn(){this.state.call&&this.endCall(),document.cookie="cts-dnd=1; expires=0; path=/",this.state.dnd=!0,this.update()}dndOff(){document.cookie="cts-dnd=; expires=0; path=/",this.state.dnd=!1,this.update()}showLandingPage(){if(null===this.state.call_status){if(this.frame)return this.state.available?(this.frame.showOnlineScreen(),!0):(this.frame.showOfflineScreen(),!0)}else this.startCall();return!1}startCall(){this.state.call||(this.state.user?this.requestCall():this.auth.signInAnonymously().then(e=>{if(!e||!e.user)throw new Error("Failed to create new user");this.info("User signed in anonymously",e.user),this.state.user=e.user,this.requestCall()}).catch(e=>{this.error("Error signing in anonymously",e)}))}callUpdated(e,t){t||this.pokeCall();var i=this.state.userData?this.state.userData.call_id:null,s=this.state.userData?this.state.userData.call_token:null;if(e&&e.tabId&&(this.state.call_tabId=e.tabId),e&&this.state.requestingCall&&(this.state.requestingCall=!1),this.frame.connected)i?"Hold"!=e.status||t&&"Hold"==t.status?"Hold"!=e.status&&t&&"Hold"==t.status&&this.frame.holdOff():this.frame.holdOn():this.frame.disconnect();else if(i&&e)if("Queued"==e.status)this.updateState("CallQueued"),this.frame.setStatus(this.getStatusMessage("call_pending","Calling The Store...")),this.frame.elements.loading.style.display="block",this.frame.elements.footer.style.display="block";else if(!this.frame.connected&&("Active"==e.status||"Hold"==e.status)&&s&&this.state.call_tabId===this.state.tabId){var n="Hold"==e.status;this.frame.connect(`/"${this.settings.company}/${this.settings.location}/${i}`,s,n)}if(!e&&t){var a=3e3;"Hold"===t.status&&this.frame.holdOff(),this.state.hangingUp?(this.frame.setStatus(this.getStatusMessage("call_cancelled","Your call has been cancelled.")),delete this.state.hangingUp):"Queued"==t.status||"Missed"==t.status?(this.frame.setStatus(this.getStatusMessage("call_busy",["Whoops!","It looks like all staff are currently busy. Please try again in a few moments."])),a=1e4):this.frame.setStatus(this.getStatusMessage("call_ended","Thank you for your call.")),this.frame.elements.loading.style.display="none",this.frame.elements.footer.style.display="none",setTimeout(function(){this.updateState("CallEnded"),this.frame.setStatus()}.bind(this),a)}}getStatusMessage(e,t){if(this.settings.statuses){var i=this.settings.statuses[e];if("string"==typeof i||Array.isArray(i))return i}return t}requestCall(){this.state.requestingCall||(this.state.requestingCall=!0,this.command({command:"call",page:this.state.page||null,tabId:this.state.tabId}))}endCall(){this.state.userData&&this.state.userData.call_id&&(this.state.poke_timeout&&(clearTimeout(this.state.poke_timeout),delete this.state.poke_timeout),"Queued"===this.state.call_status&&(this.state.hangingUp=!0),this.command({command:"end_call",call_id:this.state.userData.call_id}))}pokeCall(){this.state.user&&this.state.userData&&this.state.userData.call_id?(this.command({command:"poke_call",call_id:this.state.userData.call_id}),this.state.poke_timeout=setTimeout(this.pokeCall,1e4)):this.state.poke_timeout&&(clearTimeout(this.state.poke_timeout),delete this.state.poke_timeout)}hidePane(){this.state.paneOpen=!1,this.update()}update(){var e=!(this.state.call_tabId&&this.state.call_tabId!==this.state.tabId);if(this.state.isPaneVisible=e&&this.state.paneOpen,this.state.isTabVisible=e&&!this.state.isPaneVisible&&(this.state.available||this.state.call)&&!this.state.dnd,this.frame&&null===this.state.call_status&&(this.state.available?this.frame.showOnlineScreen():this.frame.showOfflineScreen()),this.elements.pane)if(this.state.isPaneVisible){if(this.elements.pane.classList.remove("cts-hidden"),this.browser.isPlatform("mobile")&&document.documentElement&&document.body)try{document.documentElement.classList.add("cts-disable-scrolling"),document.body.classList.add("cts-disable-scrolling")}catch(e){}}else{this.elements.pane.classList.add("cts-hidden");try{this.browser.isPlatform("mobile")&&document.documentElement&&document.body&&(document.documentElement.classList.remove("cts-disable-scrolling"),document.body.classList.remove("cts-disable-scrolling"))}catch(e){}}this.elements.tab&&(this.state.isTabVisible?this.elements.tab.classList.remove("cts-hidden"):this.elements.tab.classList.add("cts-hidden"))}updateState(e){switch(this.info(`Update State: ${e}`),e){case"Available":this.state.available=!0,this.update();break;case"Unavailable":this.state.available=!1,this.update();break;case"CallQueued":this.state.paneOpen=!0,this.state.call_status="Queued",this.update();break;case"CallActive":this.state.paneOpen=!0,this.state.call_status="Active",this.update();break;case"CallEnded":this.state.call_tabId=null,this.state.call_status=null,this.state.paneOpen=!1,this.update()}}elementEventHandler(e){"dnd_on"===e.action&&this.dndOn()}build(){var e=document.createElement("div");e.id="cts-tab",e.classList.add("cts-hidden"),e.classList.add("notranslate"),e.style.cursor="pointer";var t=this.settings.style||{};for(var i in t.tab)e.style[i]=t.tab[i];this.settings.tabs&&this.settings.tabs.online&&(this.settings.tabs.online.style&&n.applyElementStyle(e,this.settings.tabs.online.style),this.settings.tabs.online.body&&n.applyElementContent(e,this.settings.tabs.online.body,this.elementEventHandler)),e.addEventListener("click",this.tabClicked);var s=document.createElement("div");for(var i in s.id="cts-pane",s.classList.add("cts-hidden"),t.pane)s.style[i]=t.pane[i];"mobile"===this.browser.getPlatformType(!0)&&(s.style.position="fixed",s.style.width="100%",s.style.maxWidth="unset",s.style.height="100%",s.style.maxHeight="unset",s.style.bottom="unset",s.style.top="0px",s.style.transform="unset",s.style.left="0px",s.style.margin="0px",s.style.padding="0px",s.style.border="none");var a=document.createElement("div");if(a.id="cts-frame",a.style.width="100%",a.style.height="100%",a.style.border="none",t.frame)for(var i in t.frame)a.style[i]=t.frame[i];s.appendChild(a);var r=document.createElement("div");for(var i in r.id="cts-container",t.container)r.style[i]=t.container[i];r.appendChild(e),r.appendChild(s),document.body.appendChild(r),this.elements.container=r,this.elements.tab=e,this.elements.pane=s,this.elements.frame=a}documentClick(e){for(var t=e.target;null!=t.parentNode;)if((t=t.parentNode)==this.elements.container)return;this.hidePane()}focused(){this.state.hasFocus=!0,this.state.lastFocused=new Date,this.state.call}blurred(){this.state.hasFocus=!1}getPageData(){try{for(var e={},t=!1,i=document.head.getElementsByTagName("meta"),s=0;s<i.length;s++){var n=i[s].getAttribute("property");if(n&&0==n.indexOf("og:")){var a=n.split(":").splice(1).join(":");if(!(a in e))i[s].getAttribute("content")&&(e[a]=i[s].getAttribute("content"),t=!0)}}return t?e:{url:document.location.href,title:document.title}}catch(e){this.debug&&console.error&&console.error("[CTS] Error getting page data: ",e)}return null}capable(e){if("undefined"!=typeof document&&"function"==typeof document.createElement&&"Promise"in window){var t=!1;if(["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){!t&&e in window&&(t=!0)})),t&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(this.browser=d.a.getParser(navigator.userAgent),this.browserSupported=this.browser.satisfies(this.supported),this.browserSupported)){var i=this.allowVideo;navigator.mediaDevices.enumerateDevices().then((function(t){var s=!1,n=!1;t.forEach((function(e){s||"audio"!==e.kind&&"audioinput"!==e.kind?!i||n||"video"!==e.kind&&"videoinput"!==e.kind||(n=!0):s=!0})),!s||!n&&i||e()}))}}}init(){this.initialized||!this.settings.company&&!this.settings.location||(this.styles||(this.styles=document.createElement("link"),this.styles.rel="stylesheet",this.styles.type="text/css",this.styles.href=`${this.settings.host}/core.css`,document.head.appendChild(this.styles)),"loading"!==document.readyState?(this.initialized=!0,this.listeningToReadyState&&document.removeEventListener("readystatechange",this.init),this.state.dnd="1"===n.getCookie("cts-dnd"),this.capable(function(){this.build(),this.importFirebase().then(e=>{this.frame=new o(this,this.elements.frame);var t=this.getPageData();t&&this.updatePage(t),document.addEventListener("mousedown",this.documentClick),document.addEventListener("touchstart",this.documentClick),window.addEventListener("focus",this.focused),window.addEventListener("blur",this.blurred),document.hasFocus()?this.focused():this.blurred()})}.bind(this))):this.listeningToReadyState||(this.listeningToReadyState=!0,document.addEventListener("readystatechange",this.init)))}getDebugInfo(){return Object.assign({},{host:this.host,userAgent:navigator.userAgent,browser:this.browser,supported:this.browserSupported,state:this.state})}updatePage(e){this.state.page=e,this.userData&&this.userData.call_id&&this.command({command:"update_call",call_id:this.userData.call_id,page:e})}}window.CallTheStore||(window.CallTheStore=new h(window.CallTheStoreSettings),window.CallTheStore.init())}]);