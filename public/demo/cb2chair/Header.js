"use strict";function _extends(){return _extends=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},_extends.apply(this,arguments)}function ownKeys(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function _objectSpread(n){for(var i,t=1;t<arguments.length;t++)i=arguments[t]!=null?arguments[t]:{},t%2?ownKeys(i,!0).forEach(function(t){_defineProperty(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function _defineProperty(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _typeof(n){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}function _classCallCheck(n,t){if(!_instanceof(n,t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}var Availability=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.ZipStore=Crate.React.Stores.ZipCodeStore,i.ZipCodeActions=Crate.React.Actions.ZipCodeActions,i.SelectedProductStore=Crate.React.Stores.SelectedProductStore,i.HeaderActions=Crate.React.Actions.HeaderActions,i.state={sku:n.sku,zip:n.zip?n.zip:"60062",message:n.message,isAlaskaHawaii:n.isAlaskaHawaii,ariaExpanded:!1,isQuotableGroundAndUnsupportedShipping:n.isQuotableGroundAndUnsupportedShipping},i.onZipChange=i.onZipChange.bind(_assertThisInitialized(i)),i.onProductChange=i.onProductChange.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){this.ZipStore.listen(this.onZipChange);this.SelectedProductStore.listen(this.onProductChange);var n=Crate.React.Stores.HeaderStore.getState();n.preFetched&&this.setState({message:n.message,isAlaskaHawaii:n.isAlaskaHawaii,isNla:n.isNla,sku:n.availabilityDetails.sku,zip:n.availabilityDetails.zipCode,isQuotableGroundAndUnsupportedShipping:n.isQuotableGroundAndUnsupportedShipping});this.props.autonomousUpdate&&this.queryAvailability(this.state.zip,this.state.sku)}},{key:"componentWillUnmount",value:function(){this.ZipStore.unlisten(this.onZipChange);this.SelectedProductStore.unlisten(this.onProductChange)}},{key:"onZipChange",value:function(n){(!n.zip||n.zip===this.state.zip)&&(n.storeId===0||n.storeId===this.state.storeId)||this.queryAvailability(n.zip,this.state.sku);this.setState({ariaExpanded:this.state.ariaExpanded==!1&&n.revealChangeZipBox?!0:!1,storeId:n.storeId})}},{key:"onProductChange",value:function(n){var t=n.selectedProduct.sku;this.state.sku&&t!==this.state.sku&&this.queryAvailability(this.state.zip,t)}},{key:"queryAvailability",value:function(n,t){var i=this;!t||Crate.Services.HttpService.get(location.origin+"/browse/userdata/GetAvailabilityDetails?sku=".concat(t)).then(function(r){return i.updateStateBasedOnAvailability(r,t,n)})}},{key:"updateStateBasedOnAvailability",value:function(n,t,i){this.HeaderActions.setAvailability(n);this.setState({sku:t,zip:i?i:this.state.zip,message:n.message,isAlaskaHawaii:n.isAlaskaHawaii,isQuotableGroundAndUnsupportedShipping:n.isQuotableGroundAndUnsupportedShipping})}},{key:"render",value:function(){var n=this,t=function(t){return React.createElement("span",null,React.createElement("span",{className:"availability-msg","aria-live":"polite"},n.props.isCanadaSite?"Postal Code ":"ZIP Code "),React.createElement("button",{className:"change-zip-link button-transparent nsInt",onClick:n.ZipCodeActions.toggleChangeZip,"aria-expanded":n.state.ariaExpanded},t))},u=function(t,i){return React.createElement("span",null,React.createElement("span",{className:"availability-msg","aria-live":"polite",dangerouslySetInnerHTML:{__html:i.replace(t,"")}}),React.createElement("button",{className:"change-zip-link button-transparent nsInt",onClick:n.ZipCodeActions.toggleChangeZip,"aria-expanded":n.state.ariaExpanded}," ",t," "))},f=function(n,i){return n&&n.length>0&&i.indexOf(n)>0?u(n,i):React.createElement("span",null,React.createElement("span",{className:"availability-msg","aria-live":"polite",dangerouslySetInnerHTML:{__html:i}}),t(n))},i="shop-bar-availability secondary-message";this.props.showSku||(i+=" hidden");var h=React.createElement("a",{href:"#",onClick:function(){Crate.React.Actions.PopupActions.fetchContent("/browse/popup?popupName=CanadianStoreLocations")}},"call your local store"),r=this.state.isQuotableGroundAndUnsupportedShipping&&React.createElement("span",{className:"availability-msg","aria-live":"polite"},React.createElement(QuotableGroundMessage,null),t(this.state.zip)),e=r||(this.state.message&&this.state.message.length>0?f(this.state.zip,this.state.message):null),o=r?" quotable-ground-message":"",s=i+o;return React.createElement("div",{className:s},e,React.createElement(ChangeZip,{zip:this.state.zip,isCanadaSite:this.props.isCanadaSite}))}}]),t}(React.Component),AvailabilityAndExclusiveText=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state=_objectSpread({},n.metadata,{isAlaskaHawaii:n.metadata?n.metadata.availability.isAlaskaHawaii:!1}),i.renderInternationalCannotShip=i.renderInternationalCannotShip.bind(_assertThisInitialized(i)),i.renderAvailability=i.renderAvailability.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentWillUpdate",value:function(){var n=Crate.React.Stores.HeaderStore.getState();n&&n.isAlaskaHawaii!=this.state.isAlaskaHawaii&&this.setState({isAlaskaHawaii:n.isAlaskaHawaii})}},{key:"shouldShowInternationalMessage",value:function(){var n=this.state.availability?this.state.availability.isInternationalCannotShipVisible:this.props.isInternationalCannotShipVisible;return this.state.isInternational&&!this.props.isCb2&&this.state.browseType===2&&(n=!0),n}},{key:"renderInternationalCannotShip",value:function(){var n=this.shouldShowInternationalMessage();return!this.props.isMobile&&this.state.isInternational&&n?React.createElement(InternationalMessages,{isInternational:this.state.isInternational,isCanada:this.props.internationalCode==="CA",canadaMsg:this.state.invalidItemCanadaMessage,badDescriptionMsg:this.state.invalidItemBadDestinationMessage,goodNewsMsg:this.state.invalidItemGoodNewsMessage,invalidItemMsg:this.state.invalidItemNote,isInternationalCannotShipVisible:n,sku:this.state.sku}):null}},{key:"renderAvailability",value:function(){var n={sku:this.state.sku,zip:this.state.zip,familyId:this.state.familyId,message:this.state.message||"",showSku:this.state.browseType===2,autonomousUpdate:this.props.isMobile,isQuotableGroundAndUnsupportedShipping:this.props.isQuotableGroundAndUnsupportedShipping,isCanadaSite:this.props.isCanadaSite};return this.state.isInternational&&(!this.props.isCb2||this.props.isInternationalCannotShipVisible)?null:React.createElement(Availability,n)}},{key:"render",value:function(){var t=this.shouldShowInternationalMessage(),n=this.renderAvailability(),i=this.renderInternationalCannotShip(),r=this.state.showSku&&!this.state.isInternational&&!this.state.isAlaskaHawaii?" | ":"",u=this.props.exclusiveText?" exclusive-text-enabled":"",f=this.state.isAlaskaHawaii?" alaska-hawaii-enabled":"";return React.createElement("div",{className:"shop-bar-availability-wrap"+u+f},React.createElement(ExclusiveMessage,{lineLevelMessage:this.props.lineLevelMessage,exclusiveText:this.props.exclusiveText,divider:r,isKids:this.props.isKids}),t?i:this.props.isMobile?React.createElement(MobileSkuAvailabilityWrapper,{isCb2:this.props.isCb2,lineLevelMessage:this.props.lineLevelMessage,availbilityComp:n}):n)}}]),t}(React.Component),AvailabilityExtended=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.freeFurnitureDeliveryPopup=i.freeFurnitureDeliveryPopup.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"freeFurnitureDeliveryPopup",value:function(){var n=this.props.PopupName||this.props.popupName;Crate.React.Actions.PopupActions.fetchContent("/browse/popup?popupName="+n)}},{key:"render",value:function(){return React.createElement("span",null,this.props.isFurniture&&this.props.message?React.createElement(PromoMessage,{message:this.props.Message||this.props.message,popupHandler:this.freeFurnitureDeliveryPopup}):null)}}]),t}(React.Component),ChangeZip=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.Store=Crate.React.Stores.ZipCodeStore,i.Actions=Crate.React.Actions.ZipCodeActions,i.state={zip:n.zip,revealChangeZipBox:!1,validationMessage:null},i.onChange=i.onChange.bind(_assertThisInitialized(i)),i.setZip=i.setZip.bind(_assertThisInitialized(i)),i.onEnterPress=i.onEnterPress.bind(_assertThisInitialized(i)),i.onChangeZip=i.onChangeZip.bind(_assertThisInitialized(i)),i.handleCloseButtonClick=i.handleCloseButtonClick.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){this.Store.listen(this.onChange)}},{key:"componentWillUnmount",value:function(){this.Store.unlisten(this.onChange)}},{key:"onChange",value:function(n){this.setState(n)}},{key:"setZip",value:function(n){var i=this;n.preventDefault();n.stopPropagation();var t=this.refs.zipInput.value,r=this.props.isCanadaSite?/^(?!.*[DdFfIiOoQqUu])[A-VXYa-vxy][0-9][A-Za-z][ ]?[0-9][A-Za-z][0-9]$/:/(^\d{5}$)|(^\d{5}-\d{4}$)/,u=this.props.isCanadaSite?"Please enter a valid postal code.":"Please enter a valid ZIP code.";if(!r.test(t)){this.setState({validationMessage:u});return}Crate.Services.HttpService.get(location.origin+"/browse/userdata/ValidateZip?zip=".concat(t)).then(function(n){return i.onZipValidation(n,t)})}},{key:"onZipValidation",value:function(n,t){n.isValid&&this.Actions.changeZip({zip:t,toggle:!0});this.setState({validationMessage:n.message})}},{key:"onChangeZip",value:function(n){this.setState({zip:n.target.value})}},{key:"onEnterPress",value:function(n){return n.which===13||n.keyCode===13?(this.setZip(n),!1):!0}},{key:"handleCloseButtonClick",value:function(){var n=this;this.setState({validationMessage:null},function(){n.Actions.toggleChangeZip()})}},{key:"render",value:function(){var t=this.state.validationMessage&&React.createElement("div",{className:"validation"},this.state.validationMessage),i=this.state.message?"invaliz-zip":"",n=React.createElement("div",{className:"nsInt zip-code-panel-content ".concat(i)},React.createElement("label",{className:"zip-code-label",htmlFor:"_txtZip"},this.props.isCanadaSite?"Change Postal Code: ":"Change Zip Code: "),React.createElement("div",{className:"form-zip-text-wrap jsZipCodeText"},React.createElement("input",{id:"_txtZip",type:"text",ref:"zipInput",className:"jsZipCode jsZipCodeTrigger jsToggle zip-input input-sm",onKeyPress:this.onEnterPress,onChange:this.onChangeZip,value:this.state.zip,maxLength:this.props.isCanadaSite?"7":"5","aria-label":this.props.isCanadaSite?"Enter delivery Postal Code":"Enter delivery ZIP Code",title:this.props.isCanadaSite?"Enter delivery Postal Code":"Enter delivery ZIP Code","aria-describedby":"changeZipCodeError"})),React.createElement("div",{className:"form-zip-button-wrap jsZipCodeArrow"},React.createElement("button",{onClick:this.setZip,className:"button button-primary button-sm form-zip-button-link jsSubmitZipCode jsZipCodeTrigger jsSubmit"},React.createElement("svg",{className:"button-icon svg-icon-arrow-submit","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-arrow-submit"})),React.createElement("span",{className:"sr-only"},"Submit"))),React.createElement("div",{id:"changeZipCodeError"},t)),r=React.createElement("div",{className:"nsInt zip-code-panel jsZipCodePanel "+(this.state.revealChangeZipBox||this.props.dynamic?"reveal-zip-code-panel":""),"aria-hidden":!this.state.revealChangeZipBox},n,React.createElement("button",{className:"zip-code-panel-close jsRevealZip",onClick:this.handleCloseButtonClick},React.createElement("span",{className:"sr-only"},"Close")));return this.props.dynamic?n:r}}]),t}(React.Component),ExclusiveMessage=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"exclusive-text","data-is-kids":this.props.isKids,"data-exclusive-text":this.props.exclusiveText},!!this.props.exclusiveText&&React.createElement("span",{className:"exclusive-label"},this.props.exclusiveText," ",React.createElement("span",{className:"exclusive-label-divider"},this.props.divider)))}}]),t}(React.Component),Hat=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={formattedPrice:n.price,isPersonalized:!1},i.handleSkuUpdated=i.handleSkuUpdated.bind(_assertThisInitialized(i)),i.handleReviewsClicked=i.handleReviewsClicked.bind(_assertThisInitialized(i)),i.handleHeaderChange=i.handleHeaderChange.bind(_assertThisInitialized(i)),i.linelevelMessageIcon=i.linelevelMessageIcon.bind(_assertThisInitialized(i)),i.handleLineLevelMessageClick=i.handleLineLevelMessageClick.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){Crate.React.Stores.SelectedProductStore.listen(this.handleSkuUpdated);Crate.React.Stores.HeaderStore.listen(this.handleHeaderChange)}},{key:"componentWillUnmount",value:function(){Crate.React.Stores.SelectedProductStore.unlisten(this.handleSkuUpdated)}},{key:"handleHeaderChange",value:function(n){this.setState({isPersonalized:n.isPersonalized})}},{key:"handleSkuUpdated",value:function(n){n.selectedProduct&&this.setState({personalizedFormattedPrice:n.selectedProduct.personalizedFormattedPrice});n.selectedProduct&&n.selectedProduct.formattedPrice&&this.setState({formattedPrice:n.selectedProduct.formattedPrice})}},{key:"handleLineLevelMessageClick",value:function(n){n!==null&&n!==""&&Crate.React.Actions.PopupActions.fetchContent("/browse/popup?popupName="+n)}},{key:"handleReviewsClicked",value:function(){var n=new CustomEvent("headerStarsClicked");document.body.dispatchEvent(n);this.props.isMobile||Crate.Scroll.toSection("section-reviews")}},{key:"linelevelMessageIcon",value:function(n,t){var i=this;return n?React.createElement("button",{className:"llm-popup-btn button-transparent","aria-label":"More Information (opens modal dialog)",onClick:function(){return i.handleLineLevelMessageClick(t)}},React.createElement("svg",{className:"svg-icon-help-outline"},React.createElement("use",{xlinkHref:"#svg-icon-help-outline","aria-hidden":"true",focusable:"false"}))):""}},{key:"render",value:function(){var n=this.state.isPersonalized?"Personalized "+this.props.name:this.props.name,t=this.props.lineLevelMessage&&this.props.lineLevelMessage.primary.longMessage!==""&&this.props.lineLevelMessage.primary.longMessage!==null?React.createElement("div",{className:"shop-bar-primary-llm line-level-primary-long"},this.props.lineLevelMessage.primary.longMessage,this.linelevelMessageIcon(this.props.lineLevelMessage.primary.hasPopup,this.props.lineLevelMessage.primary.popupName)):"",i=this.props.isFurniture&&this.props.lineLevelMessage.secondary.longMessage&&!this.props.isMobile&&this.props.lineLevelMessage.secondary.longMessage!==""&&this.props.lineLevelMessage.secondary.longMessage!==null?React.createElement("div",{className:"shop-bar-secondary-llm line-level-secondary"},this.props.lineLevelMessage.secondary.longMessage,this.linelevelMessageIcon(this.props.lineLevelMessage.secondary.hasPopup,this.props.lineLevelMessage.secondary.popupName)):"";return React.createElement("div",{className:"shop-bar-product-info","aria-live":"polite"},React.createElement("div",{className:"shop-bar-left-product-info"},React.createElement("h1",{className:"shop-bar-product-title"},n),React.createElement(AvailabilityAndExclusiveText,{metadata:this.props.metadata,exclusiveText:this.props.exclusiveText,starsPlaceholderUrl:this.props.starsPlaceholderUrl,isCb2:this.props.isCb2,isInternationalCannotShipVisible:this.props.isInternationalCannotShipVisible,isQuotableGroundAndUnsupportedShipping:this.props.isQuotableGroundAndUnsupportedShipping,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,internationalCode:this.props.internationalCode,isKids:this.props.isKids,isCanadaSite:this.props.isCanadaSite}),i),React.createElement("div",{className:"shop-bar-right-product-info"},React.createElement("span",{className:"shop-bar-price-area jsProductPrice",dangerouslySetInnerHTML:{__html:this.state.personalizedFormattedPrice||this.state.formattedPrice}}),t,React.createElement("div",{className:"sku-review-area"},React.createElement("div",{id:"header-review-outlet",className:"shop-bar-reviews"},React.createElement("a",{href:"#",className:"star-ratings-css-link",onClick:this.handleReviewsClicked},React.createElement(StarsOutlet,{starsUrl:this.props.reviewStarUrl,rating:this.props.reviewRating,totalreviews:this.props.reviewCount,isMobile:!1}))),!!this.props.sku&&React.createElement(Sku,{sku:this.props.sku}))))}}]),t}(React.Component),Header=function(n){function t(n){var i,r;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.Store=Crate.React.Stores.HeaderStore,i.ZipCodeActions=Crate.React.Actions.ZipCodeActions,i.ZipStore=Crate.React.Stores.ZipCodeStore,i.state=typeof n.json=="string"?JSON.parse(n.json):n.json,i.onStateChange=i.onStateChange.bind(_assertThisInitialized(i)),i.handleScroll=i.handleScroll.bind(_assertThisInitialized(i)),i.setSelectedProduct=Crate.React.Actions.SelectedProductActions.setSelectedProduct,n.grouper&&n.grouper.attributeGroups&&n.grouper.attributeGroups.length>0&&(r=n.grouper.attributeGroups[0].attributes.map(function(n){return n.matchingSkus}),i.grouperSkus=[],r.forEach(function(n){i.grouperSkus=i.grouperSkus.concat(n)})),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var n=this;this.props.productInfoUrl&&!!this.props.json.sku&&this.props.json.sku>0&&Crate.Services.HttpService.get(this.props.productInfoUrl+"?sku=".concat(this.props.json.sku)).then(function(t){n.setState(Object.assign({},n.state,t));var i=t.shopButtonModel?t.shopButtonModel:t.ShopButtonModel;Crate.React.Actions.HeaderActions.setShopButton(i);t.Zip!==n.ZipStore.getState().zip&&n.ZipCodeActions.changeZip({zip:t.Zip})});this.Store.listen(this.onStateChange);window.addEventListener("scroll",this.handleScroll);this.state.specialOrderProps&&this.state.specialOrderProps!=null||this.setSelectedProduct.defer({sku:this.state.sku})}},{key:"componentWillUnmount",value:function(){this.Store.unlisten(this.onStateChange)}},{key:"handleScroll",value:function(){var t=!!window.MSInputMethodContext&&!!document.documentMode,i=/Edge/.test(navigator.userAgent),r=window.pageYOffset,n=document.querySelector(".shop-bar"),u=document.querySelector(".sticky-header");r>=n.getBoundingClientRect().bottom?(n.classList.add("header-stick"),t||i?u.classList.add("sticky"):""):r<n.getBoundingClientRect().bottom&&(n.classList.remove("header-stick"),t||i?u.classList.remove("sticky"):"")}},{key:"onStateChange",value:function(n){var t=this.state;t.isAlaskaHawaii=n.isAlaskaHawaii;t.isNla=n.isNla;t.availability.IsPickUpInStore=n.isPickUpInStore;t.isPersonalized=n.isPersonalized;t.specialOrderProps&&t.specialOrderProps.model&&(t.specialOrderProps.model.isAlaskaHawaii=n.isAlaskaHawaii,t.specialOrderProps.model.isNla=n.isNla);this.setState(t)}},{key:"render",value:function(){var n=this.state.isInternational&&this.state.availability.isInternationalCannotShipVisible?null:React.createElement(AvailabilityExtended,_extends({isSo:this.state.isSo,isFurniture:this.state.browseType===2},this.state.availability.promoMessageDetail));return React.createElement("div",{className:"shop-bar".concat(this.props.isFurnNewExpConfigOn||this.props.isCb2?" shop-bar-divided":"")},React.createElement(Hat,{name:this.state.name,reviewStarUrl:this.props.reviewStarUrl,reviewCount:this.props.reviewCount,reviewRating:this.props.reviewRating,sku:this.state.sku,price:this.state.formattedPrice,isMobile:this.props.isMobile,metadata:this.state.availabilityMetadata,exclusiveText:this.state.exclusiveText,starsPlaceholderUrl:this.props.starsPlaceholderUrl,isFurniture:this.props.isFurniture,isQuotableGroundAndUnsupportedShipping:this.props.isQuotableGroundAndUnsupportedShipping,isCb2:this.props.isCb2,isInternationalCannotShipVisible:this.state.availability.IsInternationalCannotShipVisible,internationalCode:this.state.internationalCode,isKids:this.props.isKids,isCanadaSite:this.props.isCanadaSite,lineLevelMessage:this.props.lineLevelMessage}),(!this.state.specialOrderProps||!this.state.specialOrderProps.model)&&this.props.grouper&&this.state.browseType===2&&React.createElement("section",{className:"section-grouper"}," ",React.createElement(GrouperContainer,_extends({},this.props.grouper,{onChange:this.handleGrouperItemSelected,isFurniture:!0,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn}))," "),this.state.specialOrderProps&&this.state.specialOrderProps.model?React.createElement(SpecialOrderContainer,_extends({},this.state.specialOrderProps,{isMobile:this.props.isMobile,isCb2:this.props.isCb2,addToRecentlyViewedUrl:this.props.addToRecentlyViewedUrl,fetchRecentlyViewedUrl:this.props.fetchRecentlyViewedUrl,orderSwatchUrl:this.props.orderSwatchUrl,isInternationalCannotShipVisible:this.state.availability.isInternationalCannotShipVisible||this.state.availability.IsInternationalCannotShipVisible,isAlaskaHawaii:this.state.isAlaskaHawaii,isMadeToOrder:this.state.isMadeToOrder,isFurniture:this.props.isFurniture,IsPickUpInStore:this.state.availability.IsPickUpInStore,shopButtonModel:this.props.shopButtonModel,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,lineLevelMessage:this.props.lineLevelMessage})):React.createElement(ShopButtonCombo,{qty:1,sku:this.state.sku,isCb2:this.props.isCb2,optionChoiceParameter:"",isStorePickup:this.state.isStorePickup,isMainAddToCartEligible:1,isStockSku:!0,location:"Product Header",grouperSkus:this.grouperSkus,isPickUpInStore:this.state.availability.IsPickUpInStore,shopButtonModel:this.props.shopButtonModel,isPersonalized:this.state.isPersonalized,isCanadaSite:this.props.isCanadaSite,lineLevelMessage:this.props.lineLevelMessage}),n)}}]),t}(React.Component),HeaderConductor=function(n){return React.createElement("div",{className:"header-container"}," ",n.children()," ")},HeaderContainer=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.handleAddToCartBelowClick=i.handleAddToCartBelowClick.bind(_assertThisInitialized(i)),i.renderAddToCartBelow=i.renderAddToCartBelow.bind(_assertThisInitialized(i)),i.renderShopButton=i.renderShopButton.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleAddToCartBelowClick",value:function(){Crate.Scroll.toSection("family-line-products",!0)}},{key:"renderAddToCartBelow",value:function(){var n=this;return React.createElement("button",{onClick:function(t){return n.handleAddToCartBelowClick(t)},className:"button button-primary button-lg button-add-to-cart-all",id:"addToCartBelowButton"},React.createElement("span",null,"Add to Cart Below"))}},{key:"renderShopButton",value:function(){var t=this,n=this.renderAddToCartBelow();return this.props.isCanada?(this.props.isCb2||this.props.isHousewares)&&(!this.props.isCb2||this.props.hasItemInternationalShippable)?n:React.createElement(CallStore,null):this.props.isInternational?(this.props.isCb2||this.props.isHousewares)&&(!this.props.isCb2||this.props.hasItemInternationalShippable)?n:React.createElement("button",{onClick:function(n){return t.handleAddToCartBelowClick(n)},className:"button button-primary button-lg button-add-to-cart-all",id:"addToCartBelowButton"},React.createElement("span",null,"Request a Quote Below")):n}},{key:"render",value:function(){var n=this,t=typeof this.props.json=="string"?JSON.parse(this.props.json):this.props.json,i=this.renderShopButton();return React.createElement(HeaderConductor,null,function(){return JSON.parse(n.props.isProduct)?React.createElement(Header,{reviewStarUrl:n.props.reviewStarUrl,reviewCount:n.props.reviewCount,reviewRating:n.props.reviewRating,json:t,isMobile:n.props.isMobile,isCb2:n.props.isCb2,productInfoUrl:n.props.productInfoUrl,starsPlaceholderUrl:n.props.starsPlaceholderUrl,addToRecentlyViewedUrl:n.props.addToRecentlyViewedUrl,fetchRecentlyViewedUrl:n.props.fetchRecentlyViewedUrl,isQuotableGroundAndUnsupportedShipping:n.props.isQuotableGroundAndUnsupportedShipping,orderSwatchUrl:n.props.orderSwatchUrl,isFurniture:n.props.isFurniture,grouper:n.props.grouper,isKids:t.isKids,shopButtonModel:n.props.shopButtonModel,headerCrossSellName:n.props.headerCrossSellName,headerCrossSellUrl:n.props.headerCrossSellUrl,isCanadaSite:n.props.isCanadaSite,isFurnNewExpEnabled:n.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:n.props.isFurnNewExpConfigOn,lineLevelMessage:n.props.lineLevelMessage}):React.createElement("div",{className:"shop-bar"},React.createElement(Hat,{reviewStarUrl:n.props.reviewStarUrl,reviewCount:n.props.reviewCount,reviewRating:n.props.reviewRating,name:t.name,price:t.formattedPrice,exclusiveText:t.exclusiveText,isFamily:!0,starsPlaceholderUrl:n.props.starsPlaceholderUrl,isKids:t.isKids,isCanadaSite:n.props.isCanadaSite,lineLevelMessage:n.props.lineLevelMessage,isQuotableGroundAndUnsupportedShipping:n.props.isQuotableGroundAndUnsupportedShipping,isCb2:n.props.isCb2}),React.createElement("div",{className:"shop-bar-carting-area"},i))})}}]),t}(React.Component);HeaderContainer.defaultProps={isProduct:!0,isMobile:!1,handleAddToCartBelowClick:function(){Crate.Scroll.toSection("family-line-products",!0)}};var InternationalAvailabilityPopup=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.handleShowPopup=i.handleShowPopup.bind(_assertThisInitialized(i)),i.handleRequestQuoteClick=i.handleRequestQuoteClick.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleShowPopup",value:function(){var n=React.createElement(t,{showPopup:!0,sku:this.props.sku,message:this.props.message,note:this.props.note});Crate.React.Actions.PopupActions.updateContent({content:n})}},{key:"handleRequestQuoteClick",value:function(){window.location.href="/customer-service/international-order-request?sku="+this.props.sku}},{key:"render",value:function(){return this.props.showPopup?React.createElement("div",null,React.createElement("h2",{id:"popup-banner",className:"popup-banner"},React.createElement("span",{id:"popup-title",className:"popup-title"},"International Shipping")),React.createElement("div",null,React.createElement("p",{className:"col-sm-6",dangerouslySetInnerHTML:{__html:this.props.message}}),React.createElement("p",{className:"col-sm-6",dangerouslySetInnerHTML:{__html:this.props.note}})),React.createElement("div",null,React.createElement("button",{type:"button",className:"button button-primary button-lg button-request-quote",onClick:this.handleRequestQuoteClick},React.createElement("span",null,"Request a Quote")))):React.createElement("button",{className:"international-availability-button",type:"button",onClick:this.handleShowPopup},"View International Availability Details")}}]),t}(React.Component),InternationalMessages=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.handleInternationalAvailabilityClick=i.handleInternationalAvailabilityClick.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleInternationalAvailabilityClick",value:function(){Crate.React.Actions.PopupActions.fetchContent("/browse/popup?popupName=InternationalShippingDetail")}},{key:"renderCanada",value:function(){return this.props.isCb2&&!this.props.isInternationalCannotShipVisible?React.createElement("div",null):React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.canadaMsg}})}},{key:"renderInternational",value:function(){return React.createElement("div",null,React.createElement("span",{className:"international-title"},"International Customers: "),React.createElement("span",{className:"international-copy",dangerouslySetInnerHTML:{__html:this.props.badDescriptionMsg}}),"Â ",React.createElement(InternationalAvailabilityPopup,{sku:this.props.sku,message:this.props.goodNewsMsg,note:this.props.invalidItemMsg}))}},{key:"render",value:function(){var n=this.props.isCanada?this.renderCanada():this.renderInternational();return this.props.isInternational||this.props.isInternationalCannotShipVisible?React.createElement("div",{className:"international-container"},React.createElement("h2",{className:"section-header visible-xs"},React.createElement("a",{className:"section-header-anchor"},"Availability")),n):React.createElement("div",null)}}]),t}(React.Component),MobileSkuAvailabilityWrapper=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=!this.props.isCb2&&this.props.lineLevelMessage.shipping.longMessage!==null&&this.props.lineLevelMessage.shipping.longMessage!==""?React.createElement("div",{className:"product-shipping-cutoff-llm line-level-shipping-cutoff"},this.props.lineLevelMessage.shipping.longMessage):"";return React.createElement("div",{className:""},React.createElement("h2",{className:"section-header"},React.createElement("a",{className:"section-header-anchor"},"Availability")),n,React.createElement("div",{className:"availability-wrapper"},React.createElement("input",{id:"select-delivery",name:"select-delivery-option",type:"radio",defaultChecked:!0,className:"availability-radio"}),React.createElement("label",{htmlFor:"select-delivery",className:"availability-label"},"Ship"),React.createElement("div",{className:"availability-radio"}),this.props.availbilityComp))}}]),t}(React.Component),PromoMessage=function(n){var i=n.message,t=n.cssClass,r=t===void 0?"":t,u=n.popupHandler;return React.createElement("span",{className:"delivery-promo nsInt"},React.createElement("a",{href:"#",onClick:u}," ",React.createElement("span",{className:r},i)))},Sku=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={sku:n.sku},i.handleSkuUpdated=i.handleSkuUpdated.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){Crate.React.Stores.SelectedProductStore.listen(this.handleSkuUpdated)}},{key:"componentWillUnmount",value:function(){Crate.React.Stores.SelectedProductStore.unlisten(this.handleSkuUpdated)}},{key:"handleSkuUpdated",value:function(n){n.selectedProduct&&this.setState({sku:n.selectedProduct.sku})}},{key:"render",value:function(){var n=this.state.sku.toString().length<6?"0".concat(this.state.sku.toString()):this.state.sku.toString();return React.createElement("span",{className:"shop-bar-sku-area"},"SKU: ",React.createElement("span",{className:"shop-bar-sku-number jsSwatchSku"},n))}}]),t}(React.Component)