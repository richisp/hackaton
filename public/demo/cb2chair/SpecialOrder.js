"use strict";function _defineProperty(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _typeof(n){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}function _extends(){return _extends=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},_extends.apply(this,arguments)}function _classCallCheck(n,t){if(!_instanceof(n,t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}var Accordion=function(n){return n.isMobile?React.createElement("h2",{className:"a11y-drawer-toggle"},React.createElement("i",{className:"web-icon-close"}),n.title):null},ColorBar=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isFlyoutOpen:!1,flyoutChoiceCode:null,isLoading:n.isMobile?!0:!1,colorBarSku:n.model.colorBarChoices?n.model.colorBarChoices[0].sku:0},i.handleSwatchMouseOver=i.handleSwatchMouseOver.bind(_assertThisInitialized(i)),i.handleSwatchMouseOut=i.handleSwatchMouseOut.bind(_assertThisInitialized(i)),i.renderFlyout=i.renderFlyout.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleSwatchKeyDown",value:function(n,t){(t.keyCode===13||t.keyCode===32)&&this.handleSwatchClick(n)}},{key:"handleSwatchKeyUp",value:function(n,t){t.keyCode===9&&this.handleSwatchMouseOver(n)}},{key:"handleSwatchClick",value:function(n){this.props.onChange(n);this.props.isMobile||Crate.Scroll.toSpecialOrderConfig()}},{key:"handleSwatchMouseOver",value:function(n){var t=this;this.props.isFlyoutAvailabile&&(this.timeoutId||n===null||(this.timeoutId=window.setTimeout(function(){t.timeoutId=null;t.setState({isFlyoutOpen:!0,flyoutChoiceCode:n})},200)))}},{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"handleSwatchMouseOut",value:function(){var n=this;this.props.isFlyoutAvailabile&&(this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),window.setTimeout(function(){n.timeoutId||n.setState({isFlyoutOpen:!1,flyoutChoiceCode:null})},200))}},{key:"labelSliderAfterChange",value:function(){var n=document.querySelectorAll(".stock-item.slick-active");document.querySelector(".color-bar-label-wrap").classList.remove("text-fade");n.length>0?document.querySelector(".color-bar-label-wrap").classList.add("stock-itme-visible"):document.querySelector(".color-bar-label-wrap").classList.remove("stock-itme-visible")}},{key:"labelSliderBeforeChange",value:function(){var n=document.querySelectorAll(".stock-item.slick-active");n.length>0&&document.querySelector(".color-bar-label-wrap").classList.add("text-fade")}},{key:"renderFlyout",value:function(){var i=this,t,n,r;return this.props.isMobile||!this.state.isFlyoutOpen?null:(t=this.props.model||{},t.colorBarChoices=t.colorBarChoices||[],n=t.colorBarChoices.find(function(n){return i.state.flyoutChoiceCode===n.choiceCode})||{},r={choiceCode:n.choiceCode,name:n.choiceName,priceGroupCode:n.priceGroupCode,zoomImagePath:n.zoomImagePath,romanceCopy:n.romanceCopy,description:n.choiceDescription,optionCode:n.optionCode,optionShortName:t.optionShortName,attributes:n.choiceAttibutes.map(function(n){return{attributeId:n.attributeId,name:n.name,value:n.value}})},t.optionType===3||t.optionType===24||t.optionType===22)?React.createElement("div",{onMouseOver:function(){return i.handleSwatchMouseOver(i.state.flyoutChoiceCode)},onMouseOut:this.handleSwatchMouseOut},React.createElement(FlyoutLeg,{swatch:r,parentId:"colorbar",isOpen:!0,isCloseButtonHidden:!0,optionLabel:this.props.model.optionShortName,notchStyle:{visibility:"hidden",height:18},swatchImageStyle:{margin:0,width:"100%"},isMobile:this.props.isMobile})):React.createElement("div",{onMouseOver:function(){return i.handleSwatchMouseOver(i.state.flyoutChoiceCode)},onMouseOut:this.handleSwatchMouseOut},React.createElement(FlyoutFabric,{swatch:r,sku:this.props.sku>0?this.props.sku:this.state.colorBarSku,parentId:"colorbar",isOpen:!0,isCloseButtonHidden:!0,notchStyle:{visibility:"hidden",height:18},swatchImageStyle:{margin:0,width:"100%"},isMobile:this.props.isMobile,isInternational:this.props.isInternational,priceTierDescriptions:this.props.priceTierDescriptions,fabricFeatures:this.props.fabricFeatures,isNoSwatch:this.props.isNoSwatch,isCanadaSite:this.props.isCanadaSite}))}},{key:"render",value:function(){var n=this,i=this.props.model||{},c,f,l,o;i.colorBarChoices=i.colorBarChoices||[];var v=this.state.isLoading&&this.state.isMobile?"server-side-rendered":"",r=this.props.isCb2&&!this.props.isMobile?7:this.props.isFurnNewExpEnabled?8:6,t=this.props.isCb2?i.colorBarChoices.slice(0,r):i.colorBarChoices,u,e=[],s=[],a=React.createElement("li",{className:"divider"}),h;if(this.props.isFurnNewExpEnabled){for(c=function(i){var u=n.props.selectedSwatch&&n.props.selectedSwatch.choiceCode===t[i].choiceCode,r={choiceCode:t[i].choiceCode,imagePath:t[i].imagePath,description:t[i].choiceName,attributes:t[i].choiceAttibutes,skuProperty:t[i].skuProperty};r.skuProperty==0?e.push(React.createElement("li",{key:r.choiceCode,id:"colorbar-list-item-wrap-".concat(r.choiceCode),className:"swatch-list-item stock-item",onMouseOver:function(){return n.handleSwatchMouseOver(r.choiceCode)},onMouseOut:n.handleSwatchMouseOut,onBlur:n.handleSwatchMouseOut,onKeyUp:function(t){return n.handleSwatchKeyUp(r.choiceCode,t)}},React.createElement(Swatch,{id:"".concat(n.props.radioGroup||"colorbar","-").concat(r.choiceCode),swatchClasses:"js-swatch-hover",choice:r,name:"color-bar-swatch",radioGroup:n.props.radioGroup,isSelected:u,onClick:function(){return n.handleSwatchClick(r.choiceCode)},onKeyDown:function(t){return n.handleSwatchKeyDown(r.choiceCode,t)},ariaDescribedBy:"dialog-layer-fabric-".concat(r.choiceCode)}))):s.push(React.createElement("li",{key:r.choiceCode,id:"colorbar-list-item-wrap-".concat(r.choiceCode),className:"swatch-list-item non-stock-item",onMouseOver:function(){return n.handleSwatchMouseOver(r.choiceCode)},onMouseOut:n.handleSwatchMouseOut,onBlur:n.handleSwatchMouseOut,onKeyUp:function(t){return n.handleSwatchKeyUp(r.choiceCode,t)}},React.createElement(Swatch,{id:"".concat(n.props.radioGroup||"colorbar","-").concat(r.choiceCode),swatchClasses:"js-swatch-hover",choice:r,name:"color-bar-swatch",radioGroup:n.props.radioGroup,isSelected:u,onClick:function(){return n.handleSwatchClick(r.choiceCode)},onKeyDown:function(t){return n.handleSwatchKeyDown(r.choiceCode,t)},ariaDescribedBy:"dialog-layer-fabric-".concat(r.choiceCode)})))},f=0;f<t.length;f++)c(f);h=e.length;u=e.concat(a).concat(s)}else u=t.map(function(t){var r=n.props.selectedSwatch&&n.props.selectedSwatch.choiceCode===t.choiceCode,i={choiceCode:t.choiceCode,imagePath:t.imagePath,description:t.choiceName,attributes:t.choiceAttibutes};return React.createElement("li",{key:i.choiceCode,id:"colorbar-list-item-wrap-".concat(i.choiceCode),className:"swatch-list-item",onMouseOver:function(){return n.handleSwatchMouseOver(i.choiceCode)},onMouseOut:n.handleSwatchMouseOut,onBlur:n.handleSwatchMouseOut,onKeyUp:function(t){return n.handleSwatchKeyUp(i.choiceCode,t)}},React.createElement(Swatch,{id:"".concat(n.props.radioGroup||"colorbar","-").concat(i.choiceCode),swatchClasses:"js-swatch-hover",choice:i,name:"color-bar-swatch",radioGroup:n.props.radioGroup,isSelected:r,onClick:function(){return n.handleSwatchClick(i.choiceCode)},onKeyDown:function(t){return n.handleSwatchKeyDown(i.choiceCode,t)},ariaDescribedBy:"dialog-layer-fabric-".concat(i.choiceCode)}))});return l={infinite:!1,speed:500,dots:!1,arrows:!this.props.isCb2,slidesToShow:r,slidesToScroll:this.props.isFurnNewExpEnabled?r-1:r,variableWidth:this.props.isFurnNewExpEnabled||this.props.variableWidth?!0:!1,accessibility:!0,afterChange:this.props.isFurnNewExpEnabled?this.labelSliderAfterChange:function(){},beforeChange:this.props.isFurnNewExpEnabled?this.labelSliderBeforeChange:function(){},prevArrow:React.createElement("button",{className:"slick-arrow","aria-label":"Previous",onClick:this.props.onClick},React.createElement("svg",{className:"icon svg-icon-arrow-left","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-arrow-left"})),React.createElement("span",{className:"sr-only"},"Previous")),nextArrow:React.createElement("button",{className:"slick-arrow","aria-label":"Next",onClick:this.props.onClick},React.createElement("svg",{className:"icon svg-icon-arrow-right","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-arrow-right"})),React.createElement("span",{className:"sr-only"},"Next"))},o=this.props.collectionCode==604||this.props.collectionCode==605?"Custom: 3-5 Weeks":"Allow Extra Time",React.createElement("fieldset",{className:"shop-bar-color-bar-fieldset"},React.createElement("legend",{className:"sr-only"},"Select Color"),React.createElement("div",{id:"colorbar",className:"shop-bar-color-bar".concat(this.props.isFurnNewExpEnabled?" stock-"+h:" disable-divider")},React.createElement("div",{className:"color-bar-label-wrap stock-itme-visible"},React.createElement("div",{className:"left"},React.createElement("span",{className:"stocked"},"Quick Ship"),React.createElement("span",{className:"non-stocked"},o)),React.createElement("div",{className:"right"},React.createElement("span",{className:"non-stocked"},o))),React.createElement("ul",{className:this.state.isLoading?"place-holder-swatch":"hidden"},React.createElement("li",null,React.createElement("span",null)),React.createElement("li",null,React.createElement("span",null)),React.createElement("li",null,React.createElement("span",null)),React.createElement("li",null,React.createElement("span",null)),React.createElement("li",null,React.createElement("span",null)),React.createElement("li",null,React.createElement("span",null))),React.createElement("ul",{className:"shop-bar-carousel "+(this.state.isLoading?"hidden":"")},u.length>0&&React.createElement(CrateSlickCarousel,_extends({},l,{focusSelector:".radio-item input"}),u)),this.renderFlyout()))}}]),t}(React.Component);ColorBar.defaultProps={isFlyoutAvailabile:!1};var ComfortScale=function(n){return React.createElement("div",{id:"comfort-scale-item-".concat(n.name),className:"comfort-scale-item"},React.createElement("h4",{className:"scale-box-header"},n.name),React.createElement("div",{className:"scale-box"},React.createElement("div",{className:"scale-box-label","aria-hidden":"true"},"Soft"),React.createElement("div",{className:"scale-box-items"},React.createElement("div",{className:"sr-only"},"Firmness rating: "),React.createElement("span",{className:"scale-box-item","aria-hidden":n.scale===1?"false":"true"},React.createElement("span",{className:"sr-only"},"1"),React.createElement("span",{className:"checkmark","aria-hidden":"true"},"✓")),React.createElement("span",{className:"scale-box-item","aria-hidden":n.scale===2?"false":"true"},React.createElement("span",{className:"sr-only"},"2"),React.createElement("span",{className:"checkmark","aria-hidden":"true"},"✓")),React.createElement("span",{className:"scale-box-item","aria-hidden":n.scale===3?"false":"true"},React.createElement("span",{className:"sr-only"},"3"),React.createElement("span",{className:"checkmark","aria-hidden":"true"},"✓")),React.createElement("span",{className:"scale-box-item","aria-hidden":n.scale===4?"false":"true"},React.createElement("span",{className:"sr-only"},"4"),React.createElement("span",{className:"checkmark","aria-hidden":"true"},"✓")),React.createElement("span",{className:"scale-box-item","aria-hidden":n.scale===5?"false":"true"},React.createElement("span",{className:"sr-only"},"5"),React.createElement("span",{className:"checkmark","aria-hidden":"true"},"✓")),React.createElement("div",{className:"sr-only"}," of 5 ".concat(n.altText),".")),React.createElement("div",{className:"scale-box-label","aria-hidden":"true"},"Firm")))},CushionOptions=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isFlyoutOpen:!1},i.handleKeyDown=i.handleKeyDown.bind(_assertThisInitialized(i)),i.handleChoiceClick=i.handleChoiceClick.bind(_assertThisInitialized(i)),i.handleFlyoutClose=i.handleFlyoutClose.bind(_assertThisInitialized(i)),i.renderOptions=i.renderOptions.bind(_assertThisInitialized(i)),i.handleAccordionAfterOpen=i.handleAccordionAfterOpen.bind(_assertThisInitialized(i)),i.handleAccordionAfterClose=i.handleAccordionAfterClose.bind(_assertThisInitialized(i)),i.currencyType=n.isCanadaSite?"CAD ":"$",i}return _inherits(t,n),_createClass(t,[{key:"handleAccordionAfterOpen",value:function(){this.props.setSticky(!0)}},{key:"handleAccordionAfterClose",value:function(){this.props.setSticky(!1)}},{key:"handleKeyDown",value:function(n,t,i){(n.keyCode===32||n.keyCode===13)&&this.handleSwatchClick(t,i)}},{key:"handleChoiceClick",value:function(n,t){this.props.onSwatchSelected(n,t);this.setState({isFlyoutOpen:!0})}},{key:"handleFlyoutClose",value:function(n){this.setState({isFlyoutOpen:!1});document.getElementById("Cushion-"+n).focus()}},{key:"renderOptions",value:function(){for(var n=this,f=this.props.model.optionChoices,i=[],t=null,o=f.length,e=0,u=this.props.model.shortName?this.props.model.shortName:"Cushion",s=function(r){var o=f[r];t!==null&&(n.props.isMobile||e%2==0)&&(i.push(t),t=null);var s=n.props.selectedSwatch&&o.choiceCode===n.props.selectedSwatch.choiceCode,h=o.currentAddPrice!==0&&!n.props.isInternational&&![70,71,72,73].includes(o.optionCode)?" (+".concat(n.currencyType).concat(o.formattedAddPrice,")"):"";i.push(React.createElement("div",{className:"radio-item auto-width-child",key:o.choiceCode},React.createElement("div",null,React.createElement("input",{type:"radio",name:u,checked:s,defaultValue:o.description,className:"sr-only",id:"".concat(u,"-").concat(o.choiceCode),onClick:function(){return n.handleChoiceClick(o.choiceCode,n.props.model.optionCode)},onKeyDown:function(t){return n.handleKeyDown(t,o.choiceCode,n.props.model.optionCode)}}),React.createElement("label",{htmlFor:"".concat(u,"-").concat(o.choiceCode),title:o.description},o.description+h)),s&&n.state.isFlyoutOpen&&n.props.flyoutChoiceCode===o.choiceCode&&n.props.model.specialOrderOptionType!==25&&o.romanceCopy!==""?React.createElement("span",{className:"flyout-notch"}):""));s&&n.state.isFlyoutOpen&&n.props.flyoutChoiceCode===o.choiceCode&&o.romanceCopy!==null&&(t=React.createElement(FlyoutCushion,{key:"s".concat(o.choiceCode),choice:o,isOpen:!0,onClose:function(){return n.handleFlyoutClose(n.props.selectedSwatch.choiceCode)},cushionInfo:n.props.cushionInfo}));e++},r=0;r<o;r++)s(r);return t!==null&&i.push(t),i}},{key:"render",value:function(){var n=this.props.isMobile?!0:this.props.isProductOption?!0:!1,t=this.props.isProductOption&&React.createElement("span",{className:"custom-selected-swatch-name","aria-live":"polite"},this.props.selectedSwatch.description),i=this.props.model.shortName?this.props.model.shortName:"Cushion",r={option:"Cushion Drawer"},u={iD:i,desktop:n,speed:"fast",onEngaged:function(){return Crate.React.Actions.AnalyticsActions.fireProductOptionsToggledEvent(r)},afterOpen:this.handleAccordionAfterOpen,afterClose:this.handleAccordionAfterClose};return React.createElement(A11yAccordion,u,React.createElement("div",{className:"interaction-area-header"},React.createElement("div",null,"Select ",this.props.model.longName),t),React.createElement("div",{className:"interaction-area cushion-interaction-area"},React.createElement("div",{className:this.props.isMobile&&"a11y-drawer-panel"},React.createElement("fieldset",{className:"filter-by-cushion"},React.createElement("legend",{"class":"sr-only"},"Select ",this.props.model.longName),React.createElement("div",{className:this.props.isMobile?"radio-toggle-group auto-width-children":"radio-toggle-group auto-width-children auto-width-children-split-1-1"},this.renderOptions())))))}}]),t}(React.Component),FabricOptions=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={recentlyViewedSwatches:n.recentlyViewedSwatches,isGroupedByPrice:n.showPriceGroupToggle?!1:!0,filters:[]},i.applyFilter=i.applyFilter.bind(_assertThisInitialized(i)),i.removeFilter=i.removeFilter.bind(_assertThisInitialized(i)),i.virtuallyApplyFilter=i.virtuallyApplyFilter.bind(_assertThisInitialized(i)),i.validateFilter=i.validateFilter.bind(_assertThisInitialized(i)),i.handleAccordionAfterOpen=i.handleAccordionAfterOpen.bind(_assertThisInitialized(i)),i.handleAccordionAfterClose=i.handleAccordionAfterClose.bind(_assertThisInitialized(i)),i.handlePriceGroupChange=i.handlePriceGroupChange.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleAccordionAfterOpen",value:function(){this.props.setSticky(!0)}},{key:"handleAccordionAfterClose",value:function(){this.props.setSticky(!1)}},{key:"handlePriceGroupChange",value:function(){var n=this.state.isGroupedByPrice;this.setState({isGroupedByPrice:!n})}},{key:"analyticClick",value:function(){Crate.React.Actions.AnalyticsActions.fireLinkClick({linkName:"Shop leather from below pop layer"})}},{key:"applyFilter",value:function(n,t){var i=this.state.filters.slice(),r=i.findIndex(function(t){return t.name===n});r<0?i.push({name:n,value:t}):i[r].value=t;this.setState({filters:i})}},{key:"removeFilter",value:function(n){var t=this.state.filters.slice(),i=t.findIndex(function(t){return t.name===n});i>=0&&t.splice(i,1);this.setState({filters:t})}},{key:"virtuallyApplyFilter",value:function(n,t){var i,r;return n==undefined||t==undefined?[]:(i=this.state.filters?this.state.filters.slice():[],i.some(function(i){return i.name===n&&i.value===t}))?i:(r=i.findIndex(function(t){return t.name===n}),r>=0&&i.splice(r,1),t!=="All"&&i.push({name:n,value:t}),i)}},{key:"validateFilter",value:function(n,t){var i=this.virtuallyApplyFilter(n,t),r=this.props.model.optionChoices;return r.some(function(n){return i.every(function(t){var i=n.attributes.find(function(n){return n.name===t.name});return i&&i.value===t.value})})}},{key:"isOptimizelyEnabled",value:function(){if(typeof optimizely=="undefined"||typeof optimizely.get=="undefined")return!1;var t=optimizely.get("state").getActiveExperimentIds(),i=t.find(function(n){return optimizely.get("data").experiments[n].name.toLowerCase()=="test - view all fabrics in custom panel"}),n=optimizely.get("state").getVariationMap()[i];return!!n&&n.name.toLowerCase()=="variation #1"}},{key:"render",value:function(){var t=this,n=this.props.model,i=this.props.recentlyViewedSwatches?React.createElement(RecentlyViewedSwatches,{isMobile:this.props.isMobile,optionCode:n.optionCode,swatches:this.props.recentlyViewedSwatches,selectedSwatch:this.props.selectedSwatch,sku:this.props.sku,label:this.props.recentlyViewedSwatchesLabel,onSwatchSelected:this.props.onSwatchSelected,isNoSwatch:this.props.isNoSwatch,isCanadaSite:this.props.isCanadaSite}):null,r=React.createElement(FabricSwatchSelections,{filters:this.state.filters,swatches:n.optionChoices,sku:this.props.sku,optionCode:n.optionCode,flyoutChoiceCode:this.props.flyoutChoiceCode,selectedSwatch:this.props.selectedSwatch,priceTierDescriptions:this.props.priceTierDescriptions,fabricFeatures:this.props.fabricFeatures,refSkuMessage:this.props.refSkuMessage,stockSkuMessage:this.props.stockSkuMessage,stockPriceGroupTitle:this.props.stockPriceGroupTitle,mtoSkuMessage:this.props.mtoSkuMessage,isGroupedByPrice:this.state.isGroupedByPrice,isInternational:this.props.isInternational,isMobile:this.props.isMobile,isCb2:this.props.isCb2,onSwatchSelected:this.props.onSwatchSelected,isMtoCollection:this.props.isMtoCollection,isNoSwatch:this.props.isNoSwatch,priceGroups:this.props.priceGroups,isCanadaSite:this.props.isCanadaSite,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,collectionCode:this.props.collectionCode}),u=this.props.isMobile?!0:this.props.isProductOption?!0:!1,f=this.props.isProductOption&&React.createElement("span",{className:"custom-selected-swatch-img"},React.createElement("img",{alt:"","aria-hidden":"true",src:this.props.selectedSwatch.imagePath})),e=this.props.isProductOption&&React.createElement("span",{className:"custom-selected-swatch-name","aria-live":"polite"},this.props.selectedSwatch.name),o={option:"Fabric Drawer"},s={iD:"fabric-drawer",desktop:u,speed:"fast",disableIt:this.props.noOfOptions<2&&(!this.props.isProductOption||this.props.isCb2)?!0:!1,onEngaged:function(){return Crate.React.Actions.AnalyticsActions.fireProductOptionsToggledEvent(o)},afterOpen:this.handleAccordionAfterOpen,afterClose:this.handleAccordionAfterClose};return React.createElement("div",{className:this.props.isSectional&&"sectional-interaction-area"},React.createElement(A11yAccordion,s,React.createElement("div",{className:"interaction-area-header"},React.createElement("div",{className:"interaction-area-title"},"Select ",this.props.model.longName),this.props.isFurnNewExpConfigOn&&React.createElement("span",{className:"button-icon-text-container button-text-close"},React.createElement("svg",{className:"svg-icon-custom","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-custom"})),React.createElement("span",null,"All Options")),f,e),React.createElement("div",{className:"interaction-area fabric-interaction-area jsFabricInteratctionArea"},this.props.recentlyViewedSwatches&&!this.props.isFurnNewExpConfigOn&&i,this.props.fabricFeatures&&this.props.isFiltersVisible&&React.createElement(FilterByFabricFeature,{isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,fabricFeatures:this.props.fabricFeatures,isMobile:this.props.isMobile,applyFilterHandler:this.applyFilter,removeFilterHandler:this.removeFilter,validateFilterHandler:this.validateFilter,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName}),this.props.showPriceGroupToggle&&this.props.isFiltersVisible&&React.createElement(GroupByPriceToggle,{checked:this.state.isGroupedByPrice,onChange:this.handlePriceGroupChange}),!this.isOptimizelyEnabled()&&this.props.colorsRange&&this.props.isFiltersVisible&&React.createElement(FilterByColor,{isMobile:this.props.isMobile,colorsRange:this.props.colorsRange,applyFilterHandler:this.applyFilter,validateFilterHandler:this.validateFilter,selectedSwatch:this.props.selectedSwatch}),this.props.patterns&&this.props.isFiltersVisible&&!this.props.isFurnNewExpConfigOn&&React.createElement(FilterByPattern,{patterns:this.props.patterns,applyFilterHandler:this.applyFilter,removeFilterHandler:this.removeFilter,validateFilterHandler:this.validateFilter}),React.createElement("fieldset",{className:"filter-by-thumbnail filter-by-fabric-swatch"},React.createElement("legend",{className:"sr-only"},"Select ",this.props.model.longName),React.createElement("div",{className:"radio-group"},r),this.props.headerCrossSellUrl&&this.props.isFurnNewExpConfigOn&&React.createElement("div",{className:"fabric-vs-leather-wrap"},React.createElement("p",null,"Looking for ",this.props.headerCrossSellName," options?"),React.createElement("a",{className:"button-transparent leather-option-link fabric-leather-test-bottom",href:this.props.headerCrossSellUrl,onClick:function(){return t.analyticClick()}},"Shop ",this.props.headerCrossSellName))))))}}]),t}(React.Component),FabricSwatchSelections=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isFlyoutOpen:!1},i.renderSwatchesGrouped=i.renderSwatchesGrouped.bind(_assertThisInitialized(i)),i.renderSwatchesGroupedStocked=i.renderSwatchesGroupedStocked.bind(_assertThisInitialized(i)),i.renderSwatchesGroupedNonStocked=i.renderSwatchesGroupedNonStocked.bind(_assertThisInitialized(i)),i.renderSwatchesUngrouped=i.renderSwatchesUngrouped.bind(_assertThisInitialized(i)),i.renderSwatchesWithPrice=i.renderSwatchesWithPrice.bind(_assertThisInitialized(i)),i.applyFilters=i.applyFilters.bind(_assertThisInitialized(i)),i.handleSwatchClick=i.handleSwatchClick.bind(_assertThisInitialized(i)),i.handleSwatchKeyDown=i.handleSwatchKeyDown.bind(_assertThisInitialized(i)),i.handleFlyoutClose=i.handleFlyoutClose.bind(_assertThisInitialized(i)),i.currencyType=n.isCanadaSite?"CAD ":"$",i.firstPriceGroup=[],i}return _inherits(t,n),_createClass(t,[{key:"componentWillUpdate",value:function(){this.firstPriceGroup=[]}},{key:"applyFilters",value:function(n){for(var r=this.props.filters.slice(),u=function(t){var u=r[t],i;return u.value?(i=n.attributes.find(function(n){return n.name===u.name}),typeof i=="undefined"||i==null||i.value!==u.value?{v:!1}:void 0):"continue"},i,t=0;t<r.length;t++){i=u(t);switch(i){case"continue":continue;default:if(_typeof(i)==="object")return i.v}}return!0}},{key:"handleSwatchClick",value:function(n,t){this.props.onSwatchSelected(n,t,"custom-layer");this.setState({isFlyoutOpen:!0})}},{key:"handleSwatchKeyDown",value:function(n,t,i){(n.keyCode===32||n.keyCode===13)&&this.handleSwatchClick(t,i)}},{key:"handleFlyoutClose",value:function(n){this.setState({isFlyoutOpen:!1});document.getElementById("fabric-"+n).focus()}},{key:"renderSwatchesUngrouped",value:function(n){for(var t=this,r=[],i=null,o=n.length,f=0,s=this.props.isMobile?5:7,h=function(u){var e=n[u],o;if(!t.applyFilters(e))return"continue";t.applyFilters(e)&&t.firstPriceGroup.push(e.priceGroupCode);i!==null&&f%s==0&&(r.push(i),i=null);o=t.props.selectedSwatch&&e.choiceCode===t.props.selectedSwatch.choiceCode;r.push(React.createElement(Swatch,{key:e.choiceCode,id:"fabric-".concat(e.choiceCode),swatchClasses:"radio-item",isLazyLoad:!0,imageClasses:"",choice:e,name:"filter-fabric-swatch",isSelected:o,isFlyoutOpen:t.props.flyoutChoiceCode===e.choiceCode&&t.state.isFlyoutOpen,isDisabled:!1,onClick:function(){return t.handleSwatchClick(e.choiceCode,t.props.optionCode)},onKeyDown:function(n){return t.handleSwatchKeyDown(n,e.choiceCode,t.props.optionCode)}}));o&&t.state.isFlyoutOpen&&t.props.flyoutChoiceCode===e.choiceCode&&(i=React.createElement(FlyoutFabric,{key:"s".concat(e.choiceCode),swatch:e,parentId:"flyout-fabric-wrap-".concat(e.choiceCode),sku:t.props.sku,isOpen:!0,isMobile:t.props.isMobile,isInternational:t.props.isInternational,priceTierDescriptions:t.props.priceTierDescriptions,fabricFeatures:t.props.fabricFeatures,onClose:function(){return t.handleFlyoutClose(t.props.selectedSwatch.choiceCode)},isNoSwatch:t.props.isNoSwatch,isCanadaSite:t.props.isCanadaSite}));f++},e,u=0;u<o;u++)e=h(u),e==="continue";return i!==null&&r.push(i),r}},{key:"renderSwatchesWithPrice",value:function(n,t){for(var i=this,r=[],u=null,v=n.length,s=0,y=this.props.isMobile?5:7,e=[],h,o,c,l,a,f=0;f<v;f++)this.applyFilters(n[f])&&e.push(n[f]);for(h=function(n){var f=e[n],o;c=typeof t!="undefined"&&typeof i.props.priceGroups!="undefined"&&i.props.priceGroups!=null&&Object.keys(i.props.priceGroups).length>0?t.regularPrice==f.formattedChoicePrice?React.createElement("div",{className:"special-order-title"},i.currencyType,t.regularPrice):React.createElement("div",{className:"special-order-title"},React.createElement("span",{className:"sale-price"},"Sale ",i.currencyType,f.formattedChoicePrice),React.createElement("span",{className:"reg-price"}," reg ",i.currencyType,t.regularPrice)):React.createElement("div",{className:"special-order-title"},i.currencyType,f.formattedChoicePrice);l=React.createElement("div",{className:"item item-"+n});a=n!=0&&e[s-1];u!==null&&s%y==0&&(r.push(u),u=null);o=i.props.selectedSwatch&&f.choiceCode===i.props.selectedSwatch.choiceCode;(n==0||a.formattedChoicePrice!=f.formattedChoicePrice)&&(r.push(l),r.push(c));r.push(React.createElement(Swatch,{key:f.choiceCode,id:"fabric-".concat(f.choiceCode),swatchClasses:"radio-item",isLazyLoad:!0,imageClasses:"",choice:f,name:"filter-fabric-swatch",isSelected:o,isFlyoutOpen:i.props.flyoutChoiceCode===f.choiceCode&&i.state.isFlyoutOpen,isDisabled:!1,onClick:function(){return i.handleSwatchClick(f.choiceCode,i.props.optionCode)},onKeyDown:function(n){return i.handleSwatchKeyDown(n,f.choiceCode,i.props.optionCode)}}));o&&i.state.isFlyoutOpen&&i.props.flyoutChoiceCode===f.choiceCode&&(u=React.createElement(FlyoutFabric,{key:"s".concat(f.choiceCode),swatch:f,parentId:"flyout-fabric-wrap-".concat(f.choiceCode),sku:i.props.sku,isOpen:!0,isMobile:i.props.isMobile,isInternational:i.props.isInternational,priceTierDescriptions:i.props.priceTierDescriptions,fabricFeatures:i.props.fabricFeatures,onClose:function(){return i.handleFlyoutClose(i.props.selectedSwatch.choiceCode)},isNoSwatch:i.props.isNoSwatch,isCanadaSite:i.props.isCanadaSite}));s++},o=0;o<e.length;o++)h(o);return u!==null&&r.push(u),r}},{key:"renderSwatchesGroupedStocked",value:function(){var n=this,r=this,t=this.props.swatches.filter(function(n){return n.isStock==!0}),i=t.length>0&&t.reduce(function(n,t){var i=t.priceGroupCode;return n[i]=n[i]||[],n[i].push(t),n},{});return i?Object.keys(i).map(function(u){var e=n.renderSwatchesUngrouped(i[u]),f;return(n.firstPriceGroup=[],f={},typeof n.props.priceGroups!="undefined"&&n.props.priceGroups!=null&&Object.keys(n.props.priceGroups).length>0&&(f=t.length>0?n.props.priceGroups[u]:""),e.length===0)?null:React.createElement("fieldset",{key:u},React.createElement("legend",null,u==="0"&&n.props.stockSkuMessage&&React.createElement("p",{className:"special-order-delivery-message"},React.createElement("span",{className:"special-order-title"},n.props.stockSkuMessage.split(/:(.+)/)[0],":  "),React.createElement("span",{className:"special-order-text"},n.props.stockSkuMessage.split(/:(.+)/)[1])),u==="1"&&(n.props.mtoSkuMessage||n.props.refSkuMessage)&&React.createElement("div",null,React.createElement("p",{className:"sr-only"},"Special Order Fabrics"),React.createElement("p",{className:"special-order-delivery-message"},n.props.isMtoCollection?React.createElement("span",null,React.createElement("span",{className:"special-order-title"},n.props.mtoSkuMessage.split(/:(.+)/)[0],":")," ",React.createElement("span",{className:"special-order-text"},n.props.mtoSkuMessage.split(/:(.+)/)[1])):React.createElement("span",null,React.createElement("span",{className:"special-order-title"},n.props.refSkuMessage.split(/:(.+)/)[0],":")," ",React.createElement("span",{className:"special-order-text"},n.props.refSkuMessage.split(/:(.+)/)[1]))),React.createElement("p",{className:"special-order-price-group-message"},"Prices vary by group")),n.props.stockPriceGroupTitle&&React.createElement("div",{dangerouslySetInnerHTML:{__html:n.props.stockPriceGroupTitle}}),n.props.isCb2&&(n.props.isFurnNewExpConfigOn?typeof n.props.priceGroups!="undefined"&&n.props.priceGroups!=null&&Object.keys(n.props.priceGroups).length>0?f.currentPrice==f.regularPrice?React.createElement("p",{className:"special-order-title"},n.currencyType,f.regularPrice):React.createElement("p",{className:"special-order-title"},React.createElement("span",{className:"sale-price"},"Sale ",n.currencyType,f.currentPrice),React.createElement("span",{className:"reg-price"}," reg ",n.currencyType,f.regularPrice)):React.createElement("p",{className:"special-order-title "+(u==="0"&&"sr-only")},r.props.priceTierDescriptions[u]):React.createElement("p",{className:"special-order-title "+(u==="0"&&"sr-only")},r.props.priceTierDescriptions[u],typeof f!="undefined"&&f!=null&&Object.keys(f).length>0?": "+n.currencyType+f.currentPrice:""))),n.props.isFurnNewExpConfigOn&&t.length>0?n.renderSwatchesWithPrice(i[u],f):e)}):null}},{key:"renderSwatchesGroupedNonStocked",value:function(){var n=this,t=this,r=this.props.swatches.filter(function(n){return n.isStock==!1}),i=r.reduce(function(n,t){var i=t.priceGroupCode;return n[i]=n[i]||[],n[i].push(t),n},{});return Object.keys(i).map(function(r){var e=n.renderSwatchesUngrouped(i[r]),u={},f;return(typeof n.props.priceGroups!="undefined"&&n.props.priceGroups!=null&&Object.keys(n.props.priceGroups).length>0&&(u=n.props.priceGroups[r]),e.length===0)?null:(f=n.props.collectionCode==604||n.props.collectionCode==605,React.createElement("fieldset",{key:r},React.createElement("legend",null,r===n.firstPriceGroup[0].toString()&&(n.props.mtoSkuMessage||n.props.refSkuMessage)&&React.createElement("div",null,React.createElement("p",{className:"sr-only"},"Special Order Fabrics"),React.createElement("p",{className:"special-order-delivery-message"},n.props.isMtoCollection?React.createElement("span",null,React.createElement("span",{className:"special-order-title"},f?"CUSTOM":n.props.mtoSkuMessage.split(/:(.+)/)[0],":")," ",React.createElement("span",{className:"special-order-text"},n.props.mtoSkuMessage.split(/:(.+)/)[1])):React.createElement("span",null,React.createElement("span",{className:"special-order-title"},f?"CUSTOM":n.props.refSkuMessage.split(/:(.+)/)[0],":")," ",React.createElement("span",{className:"special-order-text"},n.props.refSkuMessage.split(/:(.+)/)[1]))),React.createElement("p",{className:"special-order-price-group-message"},"Prices vary by group")),n.props.priceGroups&&typeof n.props.priceGroups!="undefined"&&Object.keys(n.props.priceGroups).length>0&&n.props.priceGroups[r].title?React.createElement("div",{dangerouslySetInnerHTML:{__html:n.props.priceGroups[r].title}}):console.log("Fabric price groups are null or empty, or price group title does not exist."),n.props.isFurnNewExpConfigOn?typeof n.props.priceGroups!="undefined"&&n.props.priceGroups!=null&&Object.keys(n.props.priceGroups).length>0?u.currentPrice==u.regularPrice?React.createElement("p",{className:"special-order-title"},n.currencyType,u.regularPrice):React.createElement("p",{className:"special-order-title"},React.createElement("span",{className:"sale-price"},"Sale ",n.currencyType,u.currentPrice),React.createElement("span",{className:"reg-price"}," reg ",n.currencyType,u.regularPrice)):t.props.priceTierDescriptions[r]!="No Up-charge Fabrics"&&React.createElement("p",{className:"special-order-title"},t.props.priceTierDescriptions[r]):React.createElement("p",{className:"special-order-title "+(r==="0"&&"sr-only")},t.props.priceTierDescriptions[r],typeof u!="undefined"&&u!=null&&Object.keys(u).length>0?": "+n.currencyType+u.currentPrice:"")),e))})}},{key:"renderSwatchesGrouped",value:function(){return React.createElement("div",null,this.renderSwatchesGroupedStocked(),this.renderSwatchesGroupedNonStocked())}},{key:"render",value:function(){var n=this.props.isGroupedByPrice?this.renderSwatchesGrouped(this.props.swatches):this.renderSwatchesUngrouped(this.props.swatches);return React.createElement("div",null,n)}}]),t}(React.Component),FilterByColor=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.attributeName="Color Attribute - Primary",i.state={selectedColor:"Off White"},i.handleFilterChange=i.handleFilterChange.bind(_assertThisInitialized(i)),i.handleOnclick=i.handleOnclick.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var n=this,t=this.props.selectedSwatch,i=t.attributes.find(function(t){return t.name===n.attributeName});this.handleFilterChange(i.value)}},{key:"handleFilterChange",value:function(n){this.setState({selectedColor:n});this.props.applyFilterHandler(this.attributeName,n)}},{key:"handleOnclick",value:function(){this.props.isMobile&&Crate.Scroll.toColorBucket()}},{key:"render",value:function(){var n=this,t=this.state.selectedColor,i=this.props.colorsRange.map(function(i){var r=n.props.validateFilterHandler(n.attributeName,i.name);return React.createElement("div",{className:"radio-item",key:i.value},React.createElement("input",{type:"radio",name:"filter-color-family","aria-label":i.name,disabled:!r,checked:t===i.name,className:"sr-only",id:i.value,value:i.value,onChange:function(){return n.handleFilterChange(i.name)},onClick:function(){return n.handleOnclick()}}),React.createElement("label",{htmlFor:i.value,title:i.name},React.createElement("span",{className:"sr-only"},i.name)),React.createElement("span",{className:"notch"}))});return React.createElement("fieldset",{id:"js-color-by-color-family",className:"filter-by-color-family"},React.createElement("legend",null,"Select Color Range"),i)}}]),t}(React.Component),FilterByFabricFeature=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={selectedAttributes:[],panelOpen:!1},i.handleFilterChange=i.handleFilterChange.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleFilterChange",value:function(n,t){var i=this.state.selectedAttributes.slice(),r=i.indexOf(n);r<0?(i.push(n),this.props.applyFilterHandler(n,t)):(i.splice(r,1),this.props.removeFilterHandler(n));this.setState({selectedAttributes:i})}},{key:"handleClick",value:function(){this.setState({panelOpen:!this.state.panelOpen})}},{key:"analyticClick",value:function(){Crate.React.Actions.AnalyticsActions.fireLinkClick({linkName:"Shop leather fabric feature"})}},{key:"render",value:function(){var n=this,i=this.props.fabricFeatures.map(function(t){var i=n.props.validateFilterHandler(t.attributeName,t.value),r=n.state.selectedAttributes.indexOf(t.attributeName)>=0,u=React.createElement("span",{id:"tooltip-fabric-feature-".concat(t.altName),className:"a11y-checkbox-tooltip"},t.tooltip);return React.createElement("div",{className:"checkbox-item",key:t.altName},React.createElement("input",{id:"fabric-feature-".concat(t.altName),type:"checkbox",name:"fabric-feature",className:"a11y-checkbox","aria-describedby":!n.props.isMobile&&"tooltip-fabric-feature-".concat(t.altName),onChange:function(){return n.handleFilterChange(t.attributeName,t.value)},checked:r,disabled:!i}),React.createElement("label",{htmlFor:"fabric-feature-".concat(t.altName),className:"a11y-checkbox-label"},t.name),!n.props.isMobile&&u)}),t=React.createElement("fieldset",{className:"filter-by-checkbox filter-by-fabric-feature"},React.createElement("legend",null,"Select Fabric Features"),i,this.props.headerCrossSellUrl&&this.props.isFurnNewExpConfigOn&&React.createElement("div",{className:"fabric-vs-leather-wrap"},React.createElement("p",null,"Looking for ",this.props.headerCrossSellName," options?"),React.createElement("a",{className:"button-transparent leather-option-link fabric-leather-test-bottom",href:this.props.headerCrossSellUrl,onClick:function(){return n.analyticClick()}},"Shop ",this.props.headerCrossSellName))),r=React.createElement("div",{className:"fabric-feature"},React.createElement("button",{className:"fabric-feature-toggle button-transparent","aria-controls":"fabric-feature-content","aria-expanded":this.state.panelOpen,onClick:function(){return n.handleClick()}},"Filter by Features",React.createElement("svg",{className:"svg-icon-chevron-down".concat(this.state.panelOpen?" rotate-icon":""),"aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-chevron-down"}))),React.createElement("div",{id:"fabric-feature-content",className:"fabric-feature-content".concat(this.state.panelOpen?"":" hidden"),"aria-hidden":!this.state.panelOpen},t));return React.createElement("div",null,this.props.isFurnNewExpConfigOn?r:t)}}]),t}(React.Component),FilterByPattern=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.attributeName="Solid vs. Pattern",i.state={selectedPattern:"All"},i.handleFilterChange=i.handleFilterChange.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleFilterChange",value:function(n){n==="All"?this.props.removeFilterHandler(this.attributeName):this.props.applyFilterHandler(this.attributeName,n);this.setState({selectedPattern:n})}},{key:"render",value:function(){var n=this,t=this.state.selectedPattern,i=this.props.patterns.map(function(i){var r=n.props.validateFilterHandler(n.attributeName,i.value);return React.createElement("div",{className:"radio-item auto-width-child",key:i.value},React.createElement("input",{type:"radio",name:"fabric-patterns",className:"a11y-radio",disabled:!r,onChange:function(){return n.handleFilterChange(i.value)},checked:t===i.value,value:i.value,id:"fabric-patterns-".concat(i.value)}),React.createElement("label",{htmlFor:"fabric-patterns-".concat(i.value),className:"a11y-radio-label"},i.name))});return React.createElement("fieldset",{className:"filter-by-radio filter-by-pattern"},React.createElement("legend",{className:"sr-only"},"Select All, Solids, or Patterns"),React.createElement("div",{className:"auto-width-children"},i))}}]),t}(React.Component),Flyout=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isOpen:n.isOpen},i.close=i.close.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"close",value:function(){this.setState({isOpen:!1});this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var n=Object.assign({display:this.state.isOpen?"block":"none"},this.props.style),t=!this.props.isCloseButtonHidden&&React.createElement("button",{id:"dialog-btn-close-".concat(this.props.choiceCode),className:"dialog-btn-close",onClick:this.close,type:"button"},React.createElement("i",{className:"web-icon-close"}),React.createElement("span",{className:"sr-only"},"Close"));return this.state.isOpen&&React.createElement("div",{id:this.props.id,style:n,className:this.props.dialogClassName,"aria-hidden":!this.state.isOpen,role:"dialog","aria-describedby":"dialog-body-".concat(this.props.choiceCode)},React.createElement("h2",{id:"dialog-title-".concat(this.props.choiceCode),className:"sr-only"},"Swatch Information"),t,React.createElement("div",{id:"dialog-body-".concat(this.props.choiceCode),className:this.props.contentClassName},this.props.children))}}]),t}(React.Component),FlyoutCushion=function(n){var t,f=function(n){if(!n||n.length===0)return n;var t=n.charAt(0).toLowerCase();return n.length>1?t+n.substring(1):t},i=n.choice,r=n.cushionInfo[f(i.description)],u;return r?(u=r.comfortScales.map(function(n){return React.createElement(ComfortScale,{name:n.name,scale:n.scale,key:n.name,altText:n.altText})}),React.createElement("div",{className:"custom-cushion-flyout-container"},React.createElement(Flyout,(t={id:"dialog-layer-cushion-".concat(i.choiceCode),parentId:"flyout-cushion-wrap-".concat(i.choiceCode),dialogClassName:"custom-cushion-layer",choiceCode:i.choiceCode},_defineProperty(t,"dialogClassName","custom-cushion-layer"),_defineProperty(t,"contentClassName","custom-cushion-layer-content"),_defineProperty(t,"isOpen",n.isOpen),_defineProperty(t,"onClose",n.onClose),t),React.createElement("div",{className:"custom-cushion-title"},React.createElement("p",null,r.name)),React.createElement("div",{className:"custom-cushion-info"},React.createElement("span",null,r.subtitle)),React.createElement("div",{className:"custom-cushion-layer-description"},React.createElement("p",null,i.romanceCopy)),React.createElement("div",{className:"comfort-scale"},React.createElement("h3",{className:"sr-only"},"Comfort Scale"),React.createElement("p",{className:"sr-only"},"Soft is equal to 1. Firm is equal to 5."),u)))):null},FlyoutFabric=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.isSampleAvailable=i.isSampleAvailable.bind(_assertThisInitialized(i)),i.getFabricOrigin=i.getFabricOrigin.bind(_assertThisInitialized(i)),i.renderFabricFeatures=i.renderFabricFeatures.bind(_assertThisInitialized(i)),i.getFabricContent=i.getFabricContent.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"isSampleAvailable",value:function(){if(this.props.isNoSwatch)return!1;var n=this.props.swatch.attributes.find(function(n){return n.attributeId===1002});return n&&n.value==="Yes"}},{key:"getFabricOrigin",value:function(){var n=this.props.swatch.attributes.find(function(n){return n.attributeId===947});return n?n.value:null}},{key:"getFabricContent",value:function(){var n=this.props.swatch.attributes.find(function(n){return n.attributeId===996});return n?n.value:null}},{key:"renderFabricFeatures",value:function(){var n=this.props.swatch;return this.props.fabricFeatures?this.props.fabricFeatures.map(function(t){var i=n.attributes.find(function(n){return t.attributeName===n.name&&t.value===n.value});return i&&React.createElement("div",{key:i.attributeId,className:"custom-swatch-layer-order-swatches-and-care-icons"},React.createElement("div",{className:"custom-swatch-layer-care-icons"},React.createElement("svg",{className:"svg-icon-fabric-"+t.altName.toLowerCase(),"aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-fabric-"+t.altName.toLowerCase()})),React.createElement("span",{className:"sr-only"},t.altName.toLowerCase())))}):null}},{key:"render",value:function(){var n=this.props.swatch,r=this.getFabricOrigin(),u=this.renderFabricFeatures(),t=this.getFabricContent()&&this.getFabricContent().split(","),f=t&&t.map(function(n,t){return React.createElement("li",{key:t},n)}),i=n.priceGroupCode&&n.priceGroupCode!==0?React.createElement("p",{className:"custom-swatch-layer-info"},React.createElement("span",{id:"custom-swatch-layer-price-group",className:"custom-swatch-layer-label"},this.props.priceTierDescriptions[n.priceGroupCode])):null,e=this.props.parentId!="colorbar"?this.props.swatch.choiceCode:0,o=this.isSampleAvailable()&&!this.props.isInternational&&React.createElement(OrderFreeSwatchesForm,{sku:this.props.sku,selected:this.props.swatch.choiceCode,choiceCode:e,isMobile:this.props.isMobile,isCanadaSite:this.props.isCanadaSite}),s=Object.assign({},this.props.swatchImageStyle),h=n.optionCode!==1?React.createElement("div",{className:"custom-swatch-layer-info-area"},i,React.createElement("p",{className:"custom-swatch-layer-info"},React.createElement("span",{className:"custom-swatch-layer-label"},n.optionShortName,":"),React.createElement("span",{className:"custom-swatch-layer-text",id:"custom-swatch-layer-fabric-name"},n.name!=null&&n.name!==""?n.name:n.description))):React.createElement("div",{className:"custom-swatch-layer-info-area"},i,React.createElement("p",{className:"custom-swatch-layer-info"},React.createElement("span",{className:"custom-swatch-layer-label"},"Fabric:"),React.createElement("span",{className:"custom-swatch-layer-text",id:"custom-swatch-layer-fabric-name"},n.name)),React.createElement("p",{className:"custom-swatch-layer-info"},React.createElement("span",{className:"custom-swatch-layer-label"},"Fabric Origin:"),React.createElement("span",{className:"custom-swatch-layer-text",id:"custom-swatch-layer-fabric-origin"},r)),React.createElement("p",{className:"custom-swatch-layer-info"},React.createElement("span",{className:"custom-swatch-layer-label"},"Fabric Content:"),React.createElement("span",{className:"custom-swatch-layer-text",id:"custom-swatch-layer-fabric-content"},React.createElement("ul",null,f))),u);return React.createElement(Flyout,{id:"dialog-layer-fabric-".concat(n.choiceCode),parentId:this.props.parentId,dialogClassName:"custom-swatch-layer",style:this.props.style,notchStyle:this.props.notchStyle,isCloseButtonHidden:this.props.isCloseButtonHidden,contentClassName:"custom-swatch-layer-content",choiceCode:n.choiceCode,isOpen:this.props.isOpen,isMobile:this.props.isMobile,onClose:this.props.onClose},React.createElement("div",{className:"custom-swatch-layer-img-area"},React.createElement("img",{id:"custom-item-swatch-zoom",alt:n.name,src:n.zoomImagePath,style:s})),React.createElement("div",{className:"custom-swatch-layer-data-area"},h,React.createElement("div",{className:"custom-swatch-layer-description".concat(n.romanceCopy&&n.romanceCopy!=""?"":" no-romance-copy")},React.createElement("p",null,n.romanceCopy),o)))}}]),t}(React.Component),FlyoutLeg=function(n){var t=n.swatch;return React.createElement("div",{id:"main-dialog-leg-finish-".concat(t.choiceCode)},React.createElement(Flyout,{id:"dialog-layer-leg-".concat(t.choiceCode),parentId:"flyout-leg-wrap-".concat(t.choiceCode),dialogClassName:"custom-leg-layer",contentClassName:"custom-leg-layer-content",style:n.style,notchStyle:n.notchStyle,isCloseButtonHidden:n.isCloseButtonHidden,choiceCode:t.choiceCode,isOpen:n.isOpen,isMobile:n.isMobile,onClose:n.onClose},React.createElement("div",{className:"custom-leg-layer-img-area"},React.createElement("img",{id:"custom-item-leg-zoom",alt:t.description,src:t.zoomImagePath})),React.createElement("div",{className:"custom-leg-layer-data-area"},React.createElement("div",{className:"custom-leg-layer-info-area"},React.createElement("p",{className:"custom-leg-layer-info"},React.createElement("span",{className:"custom-leg-layer-label"},n.optionLabel,": "),React.createElement("span",{id:"leg-description-".concat(t.choiceCode),className:"custom-leg-layer-text"},t.description))))))},GroupByPriceToggle=function(n){return React.createElement("fieldset",{className:"filter-by-price-group"},React.createElement("legend",{className:"sr-only"},"Show Price Groups"),React.createElement("div",{className:"checkbox-toggle-item"},React.createElement("input",{id:"checkbox-show-price-group",className:"sr-only",type:"checkbox",checked:n.checked,name:"show-price-group",defaultValue:"yes",onChange:n.onChange}),React.createElement("label",{htmlFor:"checkbox-show-price-group"},"Show Price Groups")))},LegFinishOptions=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isFlyoutOpen:!1,showFlyout:n.model.specialOrderOptionType===26?!1:!0},i.groupChoicesByPrice=i.groupChoicesByPrice.bind(_assertThisInitialized(i)),i.handleSwatchKeyDown=i.handleSwatchKeyDown.bind(_assertThisInitialized(i)),i.handleSwatchClick=i.handleSwatchClick.bind(_assertThisInitialized(i)),i.handleFlyoutClose=i.handleFlyoutClose.bind(_assertThisInitialized(i)),i.renderOptions=i.renderOptions.bind(_assertThisInitialized(i)),i.handleAccordionAfterOpen=i.handleAccordionAfterOpen.bind(_assertThisInitialized(i)),i.handleAccordionAfterClose=i.handleAccordionAfterClose.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleAccordionAfterOpen",value:function(){this.props.setSticky(!0)}},{key:"handleAccordionAfterClose",value:function(){this.props.setSticky(!1)}},{key:"handleSwatchKeyDown",value:function(n,t,i){(n.keyCode===32||n.keyCode===13)&&this.handleSwatchClick(t,i)}},{key:"handleSwatchClick",value:function(n,t){this.props.onSwatchSelected(n,t);this.setState({isFlyoutOpen:this.state.showFlyout})}},{key:"handleFlyoutClose",value:function(n){this.setState({isFlyoutOpen:!1});document.getElementById(this.props.model.shortName+"-"+n).focus()}},{key:"groupChoicesByPrice",value:function(){var n=this.props.model;return n.optionChoices.reduce(function(n,t){var i=t.currentAddPrice;return n[i]=n[i]||[],n[i].push(t),n},{})}},{key:"renderOptions",value:function(n,t){for(var i=this,u=[],r=null,o=n.length,e=0,s=this.props.isMobile?5:7,h=function(f){var o=n[f],h;r!==null&&e%s==0&&(u.push(r),r=null);h=i.props.selectedSwatch&&o.choiceCode===i.props.selectedSwatch.choiceCode;u.push(React.createElement(Swatch,{key:o.choiceCode,id:"".concat(i.props.model.shortName,"-").concat(o.choiceCode),swatchClasses:"radio-item",imageClasses:"",choice:o,name:"filter-".concat(i.props.model.shortName,"-swatch"),isSelected:h,isFlyoutOpen:i.props.flyoutChoiceCode===o.choiceCode&&i.state.isFlyoutOpen,isDisabled:!1,onClick:function(){return i.handleSwatchClick(o.choiceCode,t)},onKeyDown:function(n){return i.handleSwatchKeyDown(n,o.choiceCode,t)}}));h&&i.state.isFlyoutOpen&&i.props.flyoutChoiceCode===o.choiceCode&&i.state.showFlyout&&(r=React.createElement(FlyoutLeg,{key:"s".concat(o.choiceCode),swatch:o,isOpen:!0,optionLabel:i.props.model.shortName,onClose:function(){return i.handleFlyoutClose(i.props.selectedSwatch.choiceCode)}}));e++},f=0;f<o;f++)h(f);return r!==null&&u.push(r),u}},{key:"render",value:function(){var r=this,n=this.props.model,t=this.groupChoicesByPrice(),i=Object.keys(t),u=this.props.isInternational||i.length===1?React.createElement("div",{className:"radio-group"},this.renderOptions(n.optionChoices,n.optionCode)):i.map(function(i){var u=i!==0?React.createElement("legend",null,"+$".concat(i)):React.createElement("legend",{className:"sr-only"},"No upcharge fee");return React.createElement("fieldset",{key:i},u,React.createElement("div",{className:"radio-group"},r.renderOptions(t[i],n.optionCode)))});var f=!!this.props.isMobile||!!this.props.isProductOption,e=this.props.isProductOption&&React.createElement("span",{className:"custom-selected-swatch-img"},React.createElement("img",{alt:"","aria-hidden":"true",src:this.props.selectedSwatch.imagePath})),o=this.props.isProductOption&&React.createElement("span",{className:"custom-selected-swatch-name","aria-live":"polite"},this.props.selectedSwatch.description),s={option:"Leg Drawer"},h={iD:"leg-drawer",desktop:f,speed:"fast",onEngaged:function(){return Crate.React.Actions.AnalyticsActions.fireProductOptionsToggledEvent(s)},afterOpen:this.handleAccordionAfterOpen,afterClose:this.handleAccordionAfterClose};return React.createElement(A11yAccordion,h,React.createElement("div",{className:"interaction-area-header"},React.createElement("div",null,"Select ",this.props.model.longName),e,o),React.createElement("div",{className:"interaction-area leg-interaction-area"},React.createElement("fieldset",{className:"filter-by-thumbnail filter-by-leg-swatch"},React.createElement("legend",{className:"sr-only"},"Select ",this.props.model.longName),u)))}}]),t}(React.Component),OptionChoiceParameter=function(n){var t=Object.keys(n);return t.map(function(t){return{optionCode:t,choiceCode:n[t].choiceCode}})},OrderFreeSwatchesAddressValidation=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"handleSuggestionSelection",value:function(n){var i=n.target.value,r=n.target.options[n.target.options.selectedIndex].innerText,t;i=="-1"?this.props.handleUseAddressAsEntered(!0):i!=""?(t=this.parseAddress(r),this.props.handleSetCityStateZip(t.city,t.state,t.zip)):this.props.handleUseAddressAsEntered(!1)}},{key:"handleCheckboxChecked",value:function(n){this.props.handleUseAddressAsEntered(n.target.checked)}},{key:"parseAddress",value:function(n){n=n.trim();var i={},t=n.indexOf(",");return i.city=n.slice(0,t),n=n.substring(t+2),t=n.lastIndexOf(" "),i.state=n.slice(0,t),i.zip=n.substring(t+1),i}},{key:"renderNoSuggestions",value:function(){var n=this;return React.createElement("div",{id:"order-swatches-validation",className:"validation js-order-swatches-validation errorMessage",tabIndex:"-1"},React.createElement("svg",{className:"icon svg-icon-error","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-error"})),React.createElement("span",null,"The street address you entered may not be accurate. Please go back to edit your address or choose to keep address as entered."),React.createElement("div",{className:"jsDivUseAsEntered"},React.createElement("input",{type:"checkbox",className:"a11y-checkbox jsUseAsEntered",id:"chkUseAsEntered",onChange:function(t){return n.handleCheckboxChecked(t)}}),React.createElement("label",{className:"a11y-checkbox-label",htmlFor:"chkUseAsEntered"},"Use address as entered")))}},{key:"renderHasSuggestions",value:function(){var n=this;return React.createElement("div",{id:"order-swatches-validation",className:"validation js-order-swatches-validation errorMessage",tabIndex:"-1"},React.createElement("svg",{className:"icon svg-icon-error","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-error"})),React.createElement("span",null,"There appears to be a problem with the city, state and ZIP combination. Please select one of our suggestions below."),React.createElement("select",{id:"selectSuggestions",className:"select-sm width200",onChange:function(t){return n.handleSuggestionSelection(t)}},React.createElement("option",{value:""},"Please select"),React.createElement("option",{value:"-1"}," -- Use address as entered -- "),React.createElement("option",{value:"0"},"NORTHBROOK, IL 60062"),React.createElement("option",{value:"1"},"NORTHBROOK, IL 60065"),React.createElement("option",{value:"2"},"CHICAGO, IL 60656"),React.createElement("option",{value:"3"},"HARWOOD HEIGHTS, IL 60656"),React.createElement("option",{value:"4"},"HARWOOD HTS, IL 60656"),React.createElement("option",{value:"5"},"NORRIDGE, IL 60656")))}},{key:"render",value:function(){return this.props.data?this.props.data.HasSuggestedAddresses?this.renderNoSuggestions():this.renderNoSuggestions():React.createElement("div",null)}}]),t}(React.Component),OrderFreeSwatchesFabric=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"renderSwatches",value:function(){var n=this;return this.props.data.map(function(t,i){var r=n.props.selectedSwatch==t.ChoiceCode;return React.createElement(OrderFreeSwatchesSwatch,{key:i,swatchData:t,defaultSelected:r,isDisabled:n.props.isLimitReached,handleChecked:n.props.handleChecked})})}},{key:"render",value:function(){var n="_fabricName_"+this.props.fabricName,t=this.renderSwatches(),i=this.props.fabricName=="Recently Viewed Fabrics"?this.props.fabricName:"Fabric: "+this.props.fabricName;return React.createElement("div",{className:"swatch-group"},React.createElement("h3",{id:n,className:"swatch-group-heading"},i),t)}}]),t}(React.Component),OrderFreeSwatchesForm=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),_defineProperty(_assertThisInitialized(i),"handleAddressChange",function(n){function o(n){return n.length<1?n:n.charAt(0).toLowerCase()+n.slice(1)}var r=n.target,f=r.type==="checkbox"?r.checked:r.value,e,t,u;typeof f!="undefined"&&(e=o(r.name),t=i.state.address,t[e]=f,u=Crate.Services.AddressValidationService.validateAddress(t,i.props.isCanadaSite),t.isValid=u.isValid,t.validationErrors=u.validationErrors,i.setState({address:t}))}),i.state={selectedSwatchCount:n.data&&n.data.DefaultSwatch>0?1:0,selectedSwatches:n.data&&n.data.DefaultSwatch>0?[n.data.DefaultSwatch]:[],addressValidationData:undefined,useAddressAsEntered:!1,showErrors:!1,address:{addressId:0,firstName:"",lastName:"",address1:"",address2:"",address3:"",country:"USA",city:"",state:"",postalCode:"",dayPhone:"",emailAddress:"",isValid:!1,validationErrors:{}}},i.showDialog=i.showDialog.bind(_assertThisInitialized(i)),i.handleChecked=i.handleChecked.bind(_assertThisInitialized(i)),i.handleSubmit=i.handleSubmit.bind(_assertThisInitialized(i)),i.handleUseAddressAsEntered=i.handleUseAddressAsEntered.bind(_assertThisInitialized(i)),i.handleCloseOrderForm=i.handleCloseOrderForm.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"showDialog",value:function(){var n=this,i;Crate.React.Actions.AnalyticsActions.fireOrderSwatchOpen();i={sku:this.props.sku,choiceCode:this.props.choiceCode,selected:this.props.selected,suppressColorBar:this.props.suppressColorBar};Crate.Services.HttpService.post("/browse/popup/orderfreeswatchesdata",i).then(function(i){var o=document.getElementById("popup-container").scrollTop,r=React.createElement(t,{showDialog:!0,data:i,isMobile:n.props.isMobile,returnScrollPosition:o,isCanadaSite:n.props.isCanadaSite}),u,f,e;n.props.isMobile&&document.getElementById("special-order-popup-container")!=null?(u=document.getElementById("swatch-order-form-container"),f=document.getElementById("special-order-popup-container"),f.classList.add("hidden"),e=ReactDOM.render(r,u),Crate.ComponentLoader.ComponentReferences.push(e),document.getElementById("popup-container").scrollTop=0):Crate.React.Actions.PopupActions.updateContent({content:r,title:"Order free swatch form",containerClasses:["tall","wide"]})})}},{key:"handleUseAddressAsEntered",value:function(n){this.setState({useAddressAsEntered:n})}},{key:"handleChecked",value:function(n,t){var i;n?(i=this.state.selectedSwatches,i.push(t),this.setState({selectedSwatchCount:this.state.selectedSwatchCount+1,selectedSwatches:i})):(i=this.state.selectedSwatches.filter(function(n){return n!==t}),this.setState({selectedSwatchCount:this.state.selectedSwatchCount-1,selectedSwatches:i}))}},{key:"handleCloseOrderForm",value:function(){var n=document.getElementById("swatch-order-form-container"),t=document.getElementById("special-order-popup-container");ReactDOM.unmountComponentAtNode(n);t.classList.remove("hidden");document.getElementById("popup-container").scrollTop=this.props.returnScrollPosition}},{key:"handleSubmit",value:function(){var t=this,n;this.state.address.isValid?(n={Sku:this.props.data.Sku,FirstName:this.state.address.firstName.trim(),LastName:this.state.address.lastName.trim(),Address1:this.state.address.address1.trim(),Address2:this.state.address.address2.trim(),City:this.state.address.city.trim(),State:this.state.address.state.trim(),PostalCode:this.state.address.postalCode.trim(),DayPhone:this.state.address.dayPhone.trim(),EmailAddress:this.state.address.emailAddress.trim(),swatch:this.state.selectedSwatches,UseAddressAsEntered:this.state.useAddressAsEntered},Crate.Services.HttpService.post("/browse/specialorder/orderfreeswatchessubmit",n).then(function(i){if(i.Succeeded){Crate.Services.HttpService.post("/browse/specialorder/GetEmailHashed",{email:n.EmailAddress}).then(function(n){n.emailHash&&Crate.React.Actions.AnalyticsActions.fireFormSubmitted({formName:"swatchOrder",formStatus:"Submitted",formEmail:n.emailHash})});var r=window.location.hostname,u=React.createElement("span",{className:"success m30"},"Thank You",React.createElement("br",null),"We have received your order for swatches. You should receive your swatches within ",t.props.isCanadaSite?"5-12":"5-7"," business days. Thank you for your interest in ordering from ",r);Crate.React.Actions.PopupActions.updateContent({content:u,containerClasses:["wide"]})}else t.setState({addressValidationData:i.AddressValidationResult})})):this.setState({showErrors:!0},function(){var n=document.querySelectorAll(".input-validation-error")[0];n!=undefined&&n.focus()})}},{key:"render",value:function(){return this.props.showDialog?this.renderPopup():React.createElement("button",{className:"order-swatches-link button-transparent nsInt",onClick:this.showDialog},"Order Free Swatches")}},{key:"renderFabricsByName",value:function(){var n=this;return Object.keys(this.props.data.FabricsByName).map(function(t,i){var r=n.state.selectedSwatchCount>=5;return React.createElement(OrderFreeSwatchesFabric,{key:i,fabricName:t,data:n.props.data.FabricsByName[t],selectedSwatch:n.props.data.DefaultSwatch,isLimitReached:r,handleChecked:n.handleChecked})})}},{key:"renderStateProvince",value:function(n,t,i){var r=this,u=React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"State"},"State: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("div",{className:"clear"}),React.createElement("select",{className:"select-md width200 jsState"+i,id:"State",name:"State",onChange:this.handleAddressChange,ref:function(n){r.stateInput=n}},React.createElement("option",{value:""},"Please Select"),React.createElement("option",{value:"AL"},"Alabama"),React.createElement("option",{value:"AK"},"Alaska"),React.createElement("option",{value:"AZ"},"Arizona"),React.createElement("option",{value:"AR"},"Arkansas"),React.createElement("option",{value:"CA"},"California"),React.createElement("option",{value:"CO"},"Colorado"),React.createElement("option",{value:"CT"},"Connecticut"),React.createElement("option",{value:"DE"},"Delaware"),React.createElement("option",{value:"DC"},"District of Columbia"),React.createElement("option",{value:"FL"},"Florida"),React.createElement("option",{value:"GA"},"Georgia"),React.createElement("option",{value:"HI"},"Hawaii"),React.createElement("option",{value:"ID"},"Idaho"),React.createElement("option",{value:"IL"},"Illinois"),React.createElement("option",{value:"IN"},"Indiana"),React.createElement("option",{value:"IA"},"Iowa"),React.createElement("option",{value:"KS"},"Kansas"),React.createElement("option",{value:"KY"},"Kentucky"),React.createElement("option",{value:"LA"},"Louisiana"),React.createElement("option",{value:"ME"},"Maine"),React.createElement("option",{value:"MD"},"Maryland"),React.createElement("option",{value:"MA"},"Massachusetts"),React.createElement("option",{value:"MI"},"Michigan"),React.createElement("option",{value:"MN"},"Minnesota"),React.createElement("option",{value:"MS"},"Mississippi"),React.createElement("option",{value:"MO"},"Missouri"),React.createElement("option",{value:"MT"},"Montana"),React.createElement("option",{value:"NE"},"Nebraska"),React.createElement("option",{value:"NV"},"Nevada"),React.createElement("option",{value:"NH"},"New Hampshire"),React.createElement("option",{value:"NJ"},"New Jersey"),React.createElement("option",{value:"NM"},"New Mexico"),React.createElement("option",{value:"NY"},"New York"),React.createElement("option",{value:"NC"},"North Carolina"),React.createElement("option",{value:"ND"},"North Dakota"),React.createElement("option",{value:"OH"},"Ohio"),React.createElement("option",{value:"OK"},"Oklahoma"),React.createElement("option",{value:"OR"},"Oregon"),React.createElement("option",{value:"PA"},"Pennsylvania"),React.createElement("option",{value:"RI"},"Rhode Island"),React.createElement("option",{value:"SC"},"South Carolina"),React.createElement("option",{value:"SD"},"South Dakota"),React.createElement("option",{value:"TN"},"Tennessee"),React.createElement("option",{value:"TX"},"Texas"),React.createElement("option",{value:"UT"},"Utah"),React.createElement("option",{value:"VT"},"Vermont"),React.createElement("option",{value:"VA"},"Virginia"),React.createElement("option",{value:"WA"},"Washington"),React.createElement("option",{value:"WV"},"West Virginia"),React.createElement("option",{value:"WI"},"Wisconsin"),React.createElement("option",{value:"WY"},"Wyoming"),React.createElement("option",{value:"AS"},"American Samoa"),React.createElement("option",{value:"FM"},"Federal States of Micronesia"),React.createElement("option",{value:"GU"},"Guam"),React.createElement("option",{value:"MH"},"Marshall Islands"),React.createElement("option",{value:"MP"},"Northern Mariana Islands"),React.createElement("option",{value:"PW"},"Palau"),React.createElement("option",{value:"PR"},"Puerto Rico"),React.createElement("option",{value:"VI"},"Virgin Islands"),React.createElement("option",{value:"AA"},"AA (Military)"),React.createElement("option",{value:"AE"},"AE (Military)"),React.createElement("option",{value:"AP"},"AP (Military)")),React.createElement("span",{className:n},t.state&&React.createElement("span",{htmlFor:"State"},"The State field is required."))),f=React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"State"},"Province: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("div",{className:"clear"}),React.createElement("select",{className:"select-md width200 jsState",id:"State",name:"State",onChange:this.handleAddressChange,ref:function(n){r.stateInput=n}},React.createElement("option",{value:""},"Please Select"),React.createElement("option",{value:"AB"},"Alberta"),React.createElement("option",{value:"BC"},"British Columbia"),React.createElement("option",{value:"MB"},"Manitoba"),React.createElement("option",{value:"NB"},"New Brunswick"),React.createElement("option",{value:"NL"},"Newfoundland and Labrador"),React.createElement("option",{value:"NS"},"Nova Scotia"),React.createElement("option",{value:"ON"},"Ontario"),React.createElement("option",{value:"PE"},"Prince Edward Island"),React.createElement("option",{value:"QC"},"Quebec"),React.createElement("option",{value:"SK"},"Saskatchewan"),React.createElement("option",{value:"NT"},"Northwest Territories"),React.createElement("option",{value:"NU"},"Nunavut"),React.createElement("option",{value:"YT"},"Yukon")),React.createElement("span",{className:n},t.state&&React.createElement("span",{htmlFor:"State"},"The Province field is required.")));return this.props.isCanadaSite?f:u}},{key:"renderPopup",value:function(){var t=this,n=this.state.address.validationErrors?this.state.address.validationErrors:{},i=this.renderFabricsByName(),r=this.state.selectedSwatchCount<=0?"field-validation-error":"hidden",u=this.state.showErrors&&(n.firstNameInvalid||n.firstName||this.state.address.firstName==="")?"field-validation-error":"hidden",f=this.state.showErrors&&(n.lastNameInvalid||n.lastName||this.state.address.lastName==="")?"field-validation-error":"hidden",e=this.state.showErrors&&(n.address1Invalid||n.address1||this.state.address.address1==="")?"field-validation-error":"hidden",o=this.state.showErrors&&(n.cityInvalid||n.city||this.state.address.city==="")?"field-validation-error":"hidden",s=this.state.showErrors&&(n.state||this.state.address.state==="")?"field-validation-error":"hidden",h=this.state.showErrors&&(n.postalCode||this.state.address.postalCode==="")?"field-validation-error":"hidden",c=this.state.showErrors&&(n.dayPhone||this.state.address.dayPhone==="")?"field-validation-error":"hidden",l=this.state.showErrors&&(n.emailInvalid||n.email||this.state.address.emailAddress==="")?"field-validation-error":"hidden",a=this.props.isMobile&&document.getElementById("swatch-order-form-container")!=null?"button button-secondary button-xl popup-close":"hidden",v=this.state.showErrors&&(n.firstNameInvalid||n.firstName||this.state.address.firstName==="")?" input-validation-error":"",y=this.state.showErrors&&(n.lastNameInvalid||n.lastName||this.state.address.lastName==="")?" input-validation-error":"",p=this.state.showErrors&&(n.address1Invalid||n.address1||this.state.address.address1==="")?" input-validation-error":"",w=this.state.showErrors&&(n.cityInvalid||n.city||this.state.address.city==="")?" input-validation-error":"",b=this.state.showErrors&&(n.state||this.state.address.state==="")?" input-validation-error":"",k=this.state.showErrors&&(n.postalCode||this.state.address.postalCode==="")?" input-validation-error":"",d=this.state.showErrors&&(n.dayPhone||this.state.address.dayPhone==="")?" input-validation-error":"",g=this.state.showErrors&&(n.emailInvalid||n.email||this.state.address.emailAddress==="")?" input-validation-error":"";return React.createElement("div",{id:"order-swatches-form"},React.createElement("h2",{id:"_popUpHeader"},"Order Free Swatches"),React.createElement("button",{id:"popup-close",type:"button",className:a,title:"Close Popup",onClick:this.handleCloseOrderForm},React.createElement("span",{className:"sr-only"},"Close Popup"),React.createElement("svg",{className:"icon svg-icon-close","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-close"}))),React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"intro"},"Swatches arrive within ",this.props.isCanadaSite?"5-12":"5-7"," business days."),React.createElement("span",{className:r},React.createElement("span",null,"Please select at least 1 swatch."))),React.createElement("div",{className:"col-xs-12"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 col-md-7 column-swatches"},i),React.createElement("div",{className:"col-xs-12 col-md-5 column-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement(OrderFreeSwatchesAddressValidation,{data:this.state.addressValidationData,handleUseAddressAsEntered:this.handleUseAddressAsEntered,handleSetCityStateZip:this.handleSetCityStateZip}))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"FirstName"},"First Name: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping given-name",className:"input-md"+v,id:"FirstName",maxLength:"20",name:"FirstName",type:"text",onBlur:this.handleAddressChange}),React.createElement("span",{className:u},(n.firstName||this.state.address.firstName==="")&&React.createElement("span",{htmlFor:"FirstName"},"The First Name field is required."),n.firstNameInvalid&&React.createElement("span",{htmlFor:"FirstName"},"The First Name field is invalid."))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"LastName"},"Last Name: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping family-name",className:"input-md"+y,id:"LastName",maxLength:"20",name:"LastName",type:"text",onBlur:this.handleAddressChange}),React.createElement("span",{className:f},(n.lastName||this.state.address.lastName==="")&&React.createElement("span",{htmlFor:"LastName"},"The Last Name field is required."),n.lastNameInvalid&&React.createElement("span",{htmlFor:"LastName"},"The Last Name field is invalid."))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"Address1"},"Address 1: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping address-line1",className:"input-md jsAddress1"+p,id:"Address1",maxLength:"30",name:"Address1",type:"text",onBlur:this.handleAddressChange}),React.createElement("span",{className:e},(n.address1||this.state.address.address1==="")&&React.createElement("span",{htmlFor:"Address1"},"The Address 1 field is required."),n.address1Invalid&&React.createElement("span",{htmlFor:"Address1"},"The Address 1 field is invalid."))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"Address2"},"Address 2:"),React.createElement("input",{autoComplete:"shipping address-line2",className:"input-md jsAddress2",id:"Address2",maxLength:"30",name:"Address2",type:"text",onBlur:this.handleAddressChange})),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"City"},"City: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping address-level2",className:"input-md jsCity"+w,id:"City",maxLength:"28",name:"City",type:"text",onBlur:this.handleAddressChange,ref:function(n){t.cityInput=n}}),React.createElement("span",{className:o},(n.city||this.state.address.city==="")&&React.createElement("span",{htmlFor:"City"},"The City field is required."),n.cityInvalid&&React.createElement("span",{htmlFor:"City"},"The City field is invalid."))),this.renderStateProvince(s,n,b),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"PostalCode"},this.props.isCanadaSite?"Postal Code: ":"Zip Code: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping postal-code",className:"input-md w200 jsZip"+k,id:"PostalCode",maxLength:this.props.isCanadaSite?"7":"5",name:"PostalCode",type:"text",onBlur:this.handleAddressChange,ref:function(n){t.postalCodeInput=n}}),React.createElement("span",{className:h},(n.postalCode||this.state.address.postalCode==="")&&React.createElement("span",{htmlFor:"PostalCode"},this.props.isCanadaSite?"The Postal Code field is invalid":"ZIP Code must contain 5 digits."))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"DayPhone"},"Day Phone: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping tel-national",className:"input-md width200"+d,id:"DayPhone",maxLength:"16",name:"DayPhone",size:"12",type:"tel",onBlur:this.handleAddressChange}),React.createElement("span",{className:c},(n.dayPhone||this.state.address.dayPhone==="")&&React.createElement("span",{htmlFor:"DayPhone"},"Please enter a valid Phone Number."))),React.createElement("div",{className:"row"},React.createElement("label",{htmlFor:"EmailAddress"},"Email Address: ",React.createElement("span",null,React.createElement("span",{className:"required"},"Required"))),React.createElement("input",{autoComplete:"shipping email",className:"input-md"+g,id:"EmailAddress",maxLength:"66",name:"EmailAddress",size:"12",type:"email",onBlur:this.handleAddressChange}),React.createElement("span",{className:l},n.emailInvalid&&React.createElement("span",{htmlFor:"EmailAddress"},"Please enter a valid Email Address."),(n.email||this.state.address.emailAddress==="")&&React.createElement("span",{htmlFor:"EmailAddress"},"Email Address is required."))),React.createElement("div",{className:"row"},React.createElement("input",{className:"jsAddressAsEntered hidden",id:"UseAddressAsEntered",name:"UseAddressAsEntered",type:"checkbox",value:"true"})),React.createElement("div",{className:"row order-swatch-button-wrap"},React.createElement("button",{id:"button-order-swatches",className:"button button-primary button-lg jsAddToCart jsSubmit","aria-labelledby":"button-order-swatches note-variations",type:"submit",onClick:this.handleSubmit},"Order Swatches")),React.createElement("div",{className:"row"},React.createElement("p",{id:"note-variations",className:"note-variations"},"Colors may differ from their appearance on your screen due to monitor variations. Dye lots may vary."))))))}}]),t}(React.Component),OrderFreeSwatchesSwatch=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isSelected:n.defaultSelected},i}return _inherits(t,n),_createClass(t,[{key:"handleCheckboxChanged",value:function(n){this.props.handleChecked(n.target.checked,this.props.swatchData.ChoiceCode);this.setState({isSelected:n.target.checked})}},{key:"render",value:function(){var t=this,i=this.props.swatchData.Description+" sample",r="choice_"+this.props.swatchData.ChoiceCode,n="chk_"+this.props.swatchData.ChoiceCode,u=this.props.isDisabled&&!this.state.isSelected;return React.createElement("div",{className:"swatch-item"},React.createElement("img",{alt:i,className:"swatch-img",id:r,src:this.props.swatchData.ImagePath}),React.createElement("div",{className:"checkbox-item"},React.createElement("input",{className:"a11y-checkbox jsSwatchOption",id:n,name:"Swatch",value:this.props.swatchData.ChoiceCode,type:"checkbox",defaultChecked:this.state.isSelected,onChange:function(n){return t.handleCheckboxChanged(n)},disabled:u}),React.createElement("label",{className:"ckBoxLabel swatchSampleLabel a11y-checkbox-label",htmlFor:n},React.createElement("strong",null,"Color: "),this.props.swatchData.Description)))}}]),t}(React.Component),OutwardPlayer=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isLoaded:!1},i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var t=this,n=ReactDOM.findDOMNode(this);[272,273,274,245,23].indexOf(this.props.collectionCode)>=0?(console.log("CrateBarrelComposer"),owComposerAPI.init("Prod","CrateBarrelComposer",n,{secure:!0,style:{width:"100%",height:"100%"}})):(console.log("CrateBarrelComposer2"),owComposerAPI.init("Prod","CrateBarrelComposer2",n,{secure:!0,style:{width:"100%",height:"100%"}}));owComposerAPI.on("loaded",function(){t.setState({isLoaded:!0})});owComposerAPI.show()}},{key:"componentDidUpdate",value:function(){var n=this.props.imageName;this.state.isLoaded&&n&&owComposerAPI.send("SetConfiguration",n)}},{key:"render",value:function(){return React.createElement("div",{id:"jsOutwardPlayer",className:"custom-player-area"})}}]),t}(React.Component),OutwardPopup=function(n){return React.createElement("div",{className:"custom-player-zoom-img-wrap outward-player-popup",tabIndex:"0",role:"dialog","aria-hidden":"false"},React.createElement("div",{className:"zoom-img-top-bar"},React.createElement("button",{className:"zoom-img-button-close",type:"button",onClick:n.onClose},React.createElement("i",{className:"web-icon-close"}),React.createElement("span",{className:"sr-only"},"Close"))),React.createElement(OutwardPlayer,{imageName:n.imageName}))},Price=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={formattedPrice:n.formattedPrice},i.handleProductUpdated=i.handleProductUpdated.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){Crate.React.Stores.SelectedProductStore.listen(this.handleProductUpdated)}},{key:"componentWillUnmount",value:function(){Crate.React.Stores.SelectedProductStore.unlisten(this.handleProductUpdated)}},{key:"handleProductUpdated",value:function(n){n.selectedProduct&&n.selectedProduct.formattedPrice&&this.setState({formattedPrice:n.selectedProduct.formattedPrice})}},{key:"render",value:function(){return React.createElement("span",{className:"custom-price-area",dangerouslySetInnerHTML:{__html:this.state.formattedPrice}})}}]),t}(React.Component),ProductOptions=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isLoaded:!1,selectedOptionChoices:n.initialSelections,animationCLass:n.isMobile?"product-option-image-animation":"no-animation",stickyActive:!1,openDrawerSelector:"#custom-upholstery-data-col .a11y-drawer-wrap[aria-hidden='false']"},i.handleSwatchSelected=i.handleSwatchSelected.bind(_assertThisInitialized(i)),i.setSticky=i.setSticky.bind(_assertThisInitialized(i)),i.buildOptionChoiceParameterMagicString=i.buildOptionChoiceParameterMagicString.bind(_assertThisInitialized(i)),i.handleSwatchSelectionEvent=i.handleSwatchSelectionEvent.bind(_assertThisInitialized(i)),i.renderColorBar=i.renderColorBar.bind(_assertThisInitialized(i)),i.renderAvailability=i.renderAvailability.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){this.props.isCb2&&this.refs.productOptionWrap.classList.add(this.state.animationCLass);this.setState({initialPositionTop:this.refs.productOptionWrap.getBoundingClientRect().top,initialPositionBottom:this.refs.productOptionWrap.getBoundingClientRect().bottom});var n=document.querySelector("body");n.addEventListener("swatchSelectionChanged",this.handleSwatchSelectionEvent)}},{key:"handleSwatchSelectionEvent",value:function(n){this.setState({selectedOptionChoices:n.detail.selectedOptionChoices})}},{key:"setSticky",value:function(n){if(n&&!this.state.stickyActive)this.setState({stickyActive:!0}),this.refs.productOptionWrap.classList.add(this.state.animationCLass),this.props.isMobile&&Crate.Scroll.toSection("custom-upholstery-row");else if(!n&&this.state.stickyActive){var t=document.querySelectorAll(this.state.openDrawerSelector).length;t<1&&(this.setState({stickyActive:!1}),this.refs.productOptionWrap.classList.remove(this.state.animationCLass))}}},{key:"handleSwatchSelected",value:function(n,t,i){if(t||this.props.model.options){var e=this.props.model.colorBar,r=t?this.props.availableOptions.find(function(n){return n.optionCode===t}):this.props.availableOptions.find(function(n){return n.specialOrderOptionType===e.optionType}),f=r.optionChoices.find(function(t){return t.choiceCode===n}),u=this.state.selectedOptionChoices;if(u[r.optionCode]=f,this.setState({selectedOptionChoices:u},function(){var n=new CustomEvent("swatchSelectionChanged",{detail:{selectedOptionChoices:u}});document.body.dispatchEvent(n)}),i&&i!=="recent-swatch"&&r.specialOrderOptionType===1)this.props.onRecentlyViewedChange(f.choiceCode,f.optionCode);this.props.onSwatchSelected(n,r.optionCode,u)}}},{key:"buildOptionChoiceParameterMagicString",value:function(n){if(!n)return this.props.model.currentOptionChoiceParameter;var t=Object.keys(n),i=t.map(function(t){return t+","+n[t].choiceCode});return i.join("_")}},{key:"renderColorBar",value:function(){var n=this.props.model,t=this.props.availableOptions.find(function(t){return t.specialOrderOptionType===n.colorBar.optionType}),i=this.state.selectedOptionChoices||{},r=this.props.isCb2?"Select Fabric":"Select Color";return React.createElement("div",{className:"product-option-colorbar-wrap"},React.createElement("h2",{className:"section-header"},React.createElement("a",{className:"section-header-anchor"},r)),React.createElement(ColorBar,{model:n.colorBar,collectionCode:n.collectionCode,sku:this.props.sku,isMobile:this.props.isMobile,isCb2:this.props.isCb2,selectedSwatch:i[t.optionCode],isFlyoutAvailabile:!0,priceTierDescriptions:n.priceTierDescriptions,fabricFeatures:n.fabricFeatureOptions,onChange:this.handleSwatchSelected,isNoSwatch:n.isNoSwatch,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled}))}},{key:"renderAvailability",value:function(){var n={sku:this.props.availabilityMetadata.sku,zip:this.props.availabilityMetadata.zip,familyId:this.props.availabilityMetadata.familyId,message:this.props.availabilityMetadata.message||"",showSku:this.props.availabilityMetadata.browseType===2,autonomousUpdate:this.props.isMobile,isCanadaSite:this.props.isCanadaSite};return this.props.availabilityMetadata.isInternational&&(!this.props.isCb2||this.props.isInternationalCannotShipVisible)?null:React.createElement(Availability,n)}},{key:"render",value:function(){var n,t=this.props.model,i=this.state.selectedOptionChoices||{},r=this.buildOptionChoiceParameterMagicString(i),u=this.props.isMobile&&React.createElement("div",null,this.props.availabilityMetadata&&React.createElement(AvailabilityAndExclusiveText,{lineLevelMessage:this.props.lineLevelMessage,isCb2:this.props.isCb2,metadata:this.props.availabilityMetadata,isMobile:!0,isCanadaSite:this.props.isCanadaSite}),t.isInternationalShip&&this.props.availabilityMetadata&&this.props.isInternationalCannotShipVisible&&React.createElement(InternationalMessages,{isMobile:this.props.isMobile,sku:this.props.sku,isInternational:t.isInternationalShip,isCanada:t.internationalCode==="CA",canadaMsg:this.props.availabilityMetadata.invalidItemCanadaMessage,badDescriptionMsg:this.props.availabilityMetadata.invalidItemBadDestinationMessage,goodNewsMsg:this.props.availabilityMetadata.invalidItemGoodNewsMessage,invalidItemMsg:this.props.availabilityMetadata.invalidItemNote,isInternationalCannotShipVisible:this.props.isInternationalCannotShipVisible}),React.createElement(StoreAvailabilityPopup,{sku:this.props.sku,linkText:"On display in my store?",isCanadaSite:this.props.isCanadaSite}),React.createElement("section",{className:"section-price-v3"},React.createElement(Price,{formattedPrice:this.props.model.formattedPrice})),React.createElement(ShopButtonCombo,{sku:this.props.sku,isCb2:this.props.isCb2,isMobile:this.props.isMobile,qty:1,location:"Product Header",optionChoiceParameter:r,isStockSku:this.props.isStockSku,colorBarSkus:this.props.model.colorBarSkus,shopButtonModel:this.props.shopButtonModel,isCanadaSite:this.props.isCanadaSite})),f=this.props.isMobile&&this.props.isFurnNewExpConfigOn&&this.props.isFurnNewExpEnabled&&this.renderAvailability(),e=this.props.isCb2?"Create your custom design":"Create Your Own",o=this.props.isCb2?"":"You have choices. Customize now.";return React.createElement("section",{id:"section-product-option",tabIndex:"-1",ref:"productOptionWrap",className:"special-order-configuration-panel product-option section-region".concat(this.props.isFurnNewExpEnabled?" color-bar-divided":"")},this.props.isMobile&&this.renderColorBar(),f,React.createElement("h2",{className:"section-header"},React.createElement("a",{className:"section-header-anchor"},e)),React.createElement("p",{className:"section-tagline"},o),React.createElement(SpecialOrderConfigurationPanel,(n={isMobile:this.props.isMobile,isCb2:this.props.isCb2,noOfOptions:this.props.model.options.length,isOpen:!0,availableOptions:this.props.availableOptions,sku:this.props.sku,imageName:this.props.imageName,stockSkuMessage:this.props.stockSkuMessage,stockPriceGroupTitle:this.props.stockPriceGroupTitle,refSkuMessage:this.props.refSkuMessage,mtoSkuMessage:this.props.mtoSkuMessage,isInternational:this.props.isInternational,recentlyViewedSwatches:this.props.recentlyViewedSwatches,recentlyViewedSwatchesLabel:this.props.recentlyViewedSwatchesLabel,flatImageUrl:this.props.flatImage,flatImageAltText:this.props.imageAltText,priceTierDescriptions:t.priceTierDescriptions,cushionInfo:t.cushionOptions,fabricFeatures:t.fabricFeatureOptions,patterns:t.patternOptions,colorsRange:t.colorRangeOptions,selectedOptionChoices:i},_defineProperty(n,"availableOptions",this.props.availableOptions),_defineProperty(n,"onSwatchSelected",this.handleSwatchSelected),_defineProperty(n,"isNoSwatch",t.isNoSwatch),_defineProperty(n,"collectionCode",t.collectionCode),_defineProperty(n,"isMtoCollection",t.isMtoCollection),_defineProperty(n,"isScene7",t.isCollectionScene7),_defineProperty(n,"isProductOption",this.props.isProductOption),_defineProperty(n,"priceGroups",this.props.priceGroups),_defineProperty(n,"setSticky",this.setSticky),_defineProperty(n,"isCanadaSite",this.props.isCanadaSite),_defineProperty(n,"isFurnNewExpConfigOn",this.props.isFurnNewExpConfigOn),_defineProperty(n,"isFurnNewExpEnabled",this.props.isFurnNewExpEnabled),_defineProperty(n,"headerCrossSellUrl",this.props.headerCrossSellUrl),_defineProperty(n,"headerCrossSellName",this.props.headerCrossSellName),_defineProperty(n,"isSectionalPlannerEnabled",this.props.isSectionalPlannerEnabled),_defineProperty(n,"itemTypeCode",this.props.itemTypeCode),_defineProperty(n,"optionChoiceParameter",this.props.optionChoiceParameter),n)),u)}}]),t}(React.Component),RecentlyViewedSwatches=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={disabledTooltipChoiceCode:null,toolTipOpen:!1},i.handleSwatchKeyDown=i.handleSwatchKeyDown.bind(_assertThisInitialized(i)),i.handleDisabledSwatchClick=i.handleDisabledSwatchClick.bind(_assertThisInitialized(i)),i.handleSwatchClick=i.handleSwatchClick.bind(_assertThisInitialized(i)),i.handleDisabledSwatchTooltipDismiss=i.handleDisabledSwatchTooltipDismiss.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleSwatchKeyDown",value:function(n,t,i){(n.keyCode===32||n.keyCode===13)&&this.handleSwatchClick(t,i,"recent-swatch")}},{key:"handleDisabledSwatchKeyDown",value:function(n,t){(n.keyCode===32||n.keyCode===13)&&this.handleDisabledSwatchClick(t);n.keyCode===27&&this.handleDisabledSwatchTooltipDismiss(t)}},{key:"handleDisabledSwatchTooltipDismiss",value:function(n){n.focus();this.setState({toolTipOpen:!1})}},{key:"handleSwatchClick",value:function(n,t,i){this.props.onSwatchSelected(n,t,i);this.setState({toolTipOpen:!1})}},{key:"handleDisabledSwatchClick",value:function(n){this.setState({disabledTooltipChoiceCode:n,toolTipOpen:!0})}},{key:"renderOrderFreeSwatchesLink",value:function(){if(!this.props.isNoSwatch)return React.createElement("div",{className:"recent-swatch-order-free"},React.createElement(OrderFreeSwatchesForm,{sku:this.props.sku,suppressColorBar:!0,selected:this.props.selectedSwatch.choiceCode,isMobile:this.props.isMobile,isCanadaSite:this.props.isCanadaSite}))}},{key:"render",value:function(){var n=this,u=this,t=this.props.selectedSwatch||{},i=this.renderOrderFreeSwatchesLink(),r=this.props.swatches.length>0&&this.props.swatches.map(function(i){var r=i.choiceCode==t.choiceCode;return i.isRecentlyViewedSwatchDisabled?React.createElement(Swatch,{key:i.choiceCode,swatchClasses:"radio-group-item jsRecentSwatchDisabled disabled-diagonal-line",id:"disable-swatch-radio-"+i.choiceCode,imageClasses:"recent-swatch-image",choice:i,name:"",isSelected:r,isDisabled:!0,type:"recent-swatch",dismissOnClick:function(t){return n.handleDisabledSwatchTooltipDismiss(t)},onClick:function(){return n.handleDisabledSwatchClick(i.choiceCode)},isDisabledTooltipVisible:n.state.disabledTooltipChoiceCode===i.choiceCode&&n.state.toolTipOpen,onKeyDown:function(t){return n.handleDisabledSwatchKeyDown(t,i.choiceCode)}}):React.createElement(Swatch,{key:i.choiceCode,swatchClasses:"radio-group-item jsRecentSwatchEnabled",imageClasses:"recent-swatch-image",choice:i,name:"",isSelected:r,type:"recent-swatch",onClick:function(){return n.handleSwatchClick(i.choiceCode,n.props.optionCode,"recent-swatch")},onKeyDown:function(t){return n.handleSwatchKeyDown(t,i.choiceCode,n.props.optionCode)}})});return React.createElement("div",{className:"jsRecentSwatchesDiv recent-swatches-container"},React.createElement("div",{className:"recent-viewed-swatch-info hidden-xs"},React.createElement("span",{className:"recent-viewed-swatch-label"},"Fabric:"),React.createElement("span",{className:"recent-viewed-swatch-text"},t.description),this.props.selectedLegSwatch&&React.createElement("span",null,React.createElement("span",{className:"recent-viewed-swatch-label leg-label"},"Leg:"),React.createElement("span",{className:"recent-viewed-swatch-text"},this.props.selectedLegSwatch.description))),this.props.isRecentlyViewedSwatchAvailable&&React.createElement("fieldset",null,React.createElement("legend",null,this.props.label),i,React.createElement("div",{className:"jsRecentSwatchContainer radio-group"},r)))}}]),t}(React.Component),SpecialOrder=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isLoaded:!1,selectedOptionChoices:n.initialSelections},i.handleScrollOptionsButtonClick=i.handleScrollOptionsButtonClick.bind(_assertThisInitialized(i)),i.handleSwatchSelected=i.handleSwatchSelected.bind(_assertThisInitialized(i)),i.buildOptionChoiceParameterMagicString=i.buildOptionChoiceParameterMagicString.bind(_assertThisInitialized(i)),i.renderColorBar=i.renderColorBar.bind(_assertThisInitialized(i)),i.handleSwatchSelectionEvent=i.handleSwatchSelectionEvent.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var n=document.querySelector("body");n.addEventListener("swatchSelectionChanged",this.handleSwatchSelectionEvent)}},{key:"handleSwatchSelected",value:function(n,t,i){if(t||this.props.model.options){var e=this.props.model.colorBar,r=t?this.props.availableOptions.find(function(n){return n.optionCode===t}):this.props.availableOptions.find(function(n){return n.specialOrderOptionType===e.optionType}),f=r.optionChoices.find(function(t){return t.choiceCode===n}),u=this.state.selectedOptionChoices;if(u[r.optionCode]=f,this.setState({selectedOptionChoices:u},function(){var n=new CustomEvent("swatchSelectionChanged",{detail:{selectedOptionChoices:u}});document.body.dispatchEvent(n)}),i&&i!=="recent-swatch"&&r.specialOrderOptionType===1)this.props.onRecentlyViewedChange(f.choiceCode,f.optionCode);this.props.onSwatchSelected(n,r.optionCode,u)}}},{key:"handleSwatchSelectionEvent",value:function(n){this.setState({selectedOptionChoices:n.detail.selectedOptionChoices})}},{key:"buildOptionChoiceParameterMagicString",value:function(n){if(!n)return this.props.model.currentOptionChoiceParameter;var t=Object.keys(n),i=t.map(function(t){return t+","+n[t].choiceCode});return i.join("_")}},{key:"handleScrollOptionsButtonClick",value:function(){Crate.Scroll.toSection("section-product-option");document.getElementById("fabric-drawer").getAttribute("aria-hidden")=="true"&&document.querySelector(".custom-upholstery-data-col [aria-controls='fabric-drawer']").click()}},{key:"renderColorBar",value:function(){var n=this.props.model,t=this.props.availableOptions.find(function(t){return t.specialOrderOptionType===n.colorBar.optionType}),i=this.state.selectedOptionChoices||{};return React.createElement(ColorBar,{model:n.colorBar,collectionCode:n.collectionCode,sku:this.props.sku,isMobile:this.props.isMobile,isCb2:this.props.isCb2,selectedSwatch:i[t.optionCode],isFlyoutAvailabile:!0,priceTierDescriptions:n.priceTierDescriptions,fabricFeatures:n.fabricFeatureOptions,onChange:this.handleSwatchSelected,isNoSwatch:n.isNoSwatch,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled})}},{key:"render",value:function(){var n=this.props.model,t=this.state.selectedOptionChoices||{},r=this.buildOptionChoiceParameterMagicString(t),u=n.showCustomizer&&React.createElement("button",{title:"More Options",className:"button button-secondary button-customize scroll-more-options",type:"button",onClick:this.handleScrollOptionsButtonClick,style:{zIndex:100,float:"left"}},React.createElement("span",{className:"button-icon-text-container button-text-close"},React.createElement("svg",{className:"svg-icon-custom","aria-hidden":"true",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-custom"})),React.createElement("span",{className:"sr-only"},"Skip to "),React.createElement("span",null,this.props.isCb2?"See All Colors":this.props.isFurnNewExpConfigOn?"All Options":"More Options"))),i;return this.summaryBar=React.createElement(SpecialOrderSummaryContainer,{isCb2:this.props.isCb2,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isMobile:this.props.isMobile,availableOptions:this.props.availableOptions,selectedOptions:t}),i=React.createElement(ShopButtonCombo,{sku:this.props.sku,isCb2:this.props.isCb2,isMobile:this.props.isMobile,qty:1,location:"Product Header",optionChoiceParameter:r,isStockSku:this.props.isStockSku,colorBarSkus:this.props.model.colorBarSkus,shopButtonModel:this.props.shopButtonModel,isCanadaSite:this.props.isCanadaSite,lineLevelMessage:this.props.lineLevelMessage}),React.createElement("div",{className:this.props.isFurnNewExpConfigOn||this.props.isCb2?"color-bar-divided":""},React.createElement("div",{className:"color-bar-wrapper "+(this.props.isOpen?"color-bar-wrapper-open":"")},React.createElement("div",{className:"color-bar-container "+(this.props.isOpen?"color-bar-container-hide":"")},this.renderColorBar()),u),this.props.isMobile&&this.summaryBar,this.props.availabilityMetadata&&React.createElement(AvailabilityAndExclusiveText,{lineLevelMessage:this.props.lineLevelMessage,metadata:this.props.availabilityMetadata,isMobile:!0,isCanadaSite:this.props.isCanadaSite}),n.isInternationalShip&&this.props.availabilityMetadata&&this.props.isInternationalCannotShipVisible&&React.createElement(InternationalMessages,{isMobile:this.props.isMobile,sku:this.props.sku,isInternational:n.isInternationalShip,isCanada:n.internationalCode==="CA",canadaMsg:this.props.availabilityMetadata.invalidItemCanadaMessage,badDescriptionMsg:this.props.availabilityMetadata.invalidItemBadDestinationMessage,goodNewsMsg:this.props.availabilityMetadata.invalidItemGoodNewsMessage,invalidItemMsg:this.props.availabilityMetadata.invalidItemNote,isInternationalCannotShipVisible:this.props.isInternationalCannotShipVisible}),this.props.isMobile&&React.createElement(StoreAvailabilityPopup,{sku:this.props.sku,linkText:"On display in my store?",isCanadaSite:this.props.isCanadaSite}),this.props.isMobile&&React.createElement("section",{className:"section-price-v3"},React.createElement(Price,{formattedPrice:this.props.model.formattedPrice})),i,!this.props.isMobile&&this.summaryBar)}}]),t}(React.Component),SpecialOrderConfigurationPanel=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={flyoutChoiceCode:null,isOutwardPopupVisible:!1,flatImage:n.flatImageUrl,optionChoiceParameter:n.optionChoiceParameter},i.cb2FlatImageMacro=n.isMobile?"$web_product_mobile_custom$":"$web_product_custom_panel$",i.productOptionsMacro="$web_product_custom_panel_pop$",i.flatImageMacro=n.isCb2||n.isScene7?i.cb2FlatImageMacro:"width=640&height=360&padding=35&trim&bg=white",i.renderFabricOptions=i.renderFabricOptions.bind(_assertThisInitialized(i)),i.renderFabricOptionsSimple=i.renderFabricOptionsSimple.bind(_assertThisInitialized(i)),i.renderLegFinishOptions=i.renderLegFinishOptions.bind(_assertThisInitialized(i)),i.renderCushionOptions=i.renderCushionOptions.bind(_assertThisInitialized(i)),i.handleSwatchSelected=i.handleSwatchSelected.bind(_assertThisInitialized(i)),i.toggleOutwardPopup=i.toggleOutwardPopup.bind(_assertThisInitialized(i)),i.handleProductStoreUpdated=i.handleProductStoreUpdated.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){Crate.React.Stores.SelectedProductStore.listen(this.handleProductStoreUpdated)}},{key:"handleProductStoreUpdated",value:function(n){var t=n.selectedProduct.optionChoices[0],i=t.optionCode,r=t.choiceCode,u="".concat(i,",").concat(r);n.selectedProduct&&n.selectedProduct.flatImage&&this.setState({flatImage:n.selectedProduct.flatImage,optionChoiceParameter:u})}},{key:"handleSwatchSelected",value:function(n,t,i){this.setState({flyoutChoiceCode:n});this.props.onSwatchSelected(n,t,i)}},{key:"toggleOutwardPopup",value:function(n){this.props.isCb2||this.setState({isOutwardPopupVisible:n})}},{key:"renderFabricOptions",value:function(n){return React.createElement(FabricOptions,{key:n.optionCode,isMobile:this.props.isMobile,isCb2:this.props.isCb2,noOfOptions:this.props.noOfOptions,isSectional:this.props.isSectional,isFiltersVisible:n.optionChoices.length>18&&!this.props.isCb2,model:n,sku:this.props.sku,flyoutChoiceCode:this.state.flyoutChoiceCode,showPriceGroupToggle:!this.props.isFurnNewExpConfigOn,priceTierDescriptions:this.props.priceTierDescriptions,fabricFeatures:this.props.fabricFeatures,stockSkuMessage:this.props.stockSkuMessage,stockPriceGroupTitle:this.props.stockPriceGroupTitle,refSkuMessage:this.props.refSkuMessage,mtoSkuMessage:this.props.mtoSkuMessage,patterns:this.props.patterns,colorsRange:this.props.colorsRange,isInternational:this.props.isInternational,recentlyViewedSwatches:this.props.recentlyViewedSwatches,recentlyViewedSwatchesLabel:this.props.recentlyViewedSwatchesLabel,selectedSwatch:this.props.selectedOptionChoices[n.optionCode],onSwatchSelected:this.handleSwatchSelected,isMtoCollection:this.props.isMtoCollection,isNoSwatch:this.props.isNoSwatch,isProductOption:this.props.isProductOption,priceGroups:this.props.priceGroups,setSticky:this.props.setSticky,isCanadaSite:this.props.isCanadaSite,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,collectionCode:this.props.collectionCode})}},{key:"renderFabricOptionsSimple",value:function(n){return React.createElement(FabricOptions,{key:n.optionCode,isMobile:this.props.isMobile,isCb2:this.props.isCb2,noOfOptions:this.props.noOfOptions,isSectional:this.props.isSectional,isFiltersVisible:n.optionChoices.length>18&&!this.props.isCb2,model:n,sku:this.props.sku,flyoutChoiceCode:this.state.flyoutChoiceCode,showPriceGroupToggle:!1,stockSkuMessage:this.props.stockSkuMessage,stockPriceGroupTitle:this.props.stockPriceGroupTitle,refSkuMessage:this.props.refSkuMessage,mtoSkuMessage:this.props.mtoSkuMessage,priceTierDescriptions:this.props.priceTierDescriptions,isInternational:this.props.isInternational,selectedSwatch:this.props.selectedOptionChoices[n.optionCode],onSwatchSelected:this.handleSwatchSelected,isMtoCollection:this.props.isMtoCollection,fabricFeatures:this.props.fabricFeatures,isNoSwatch:this.props.isNoSwatch,isProductOption:this.props.isProductOption,priceGroups:this.props.priceGroups,setSticky:this.props.setSticky,isCanadaSite:this.props.isCanadaSite,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,collectionCode:this.props.collectionCode})}},{key:"renderLegFinishOptions",value:function(n){return React.createElement(LegFinishOptions,{key:n.optionCode,isMobile:this.props.isMobile,model:n,flyoutChoiceCode:this.state.flyoutChoiceCode,selectedSwatch:this.props.selectedOptionChoices[n.optionCode],onSwatchSelected:this.handleSwatchSelected,isProductOption:this.props.isProductOption,setSticky:this.props.setSticky})}},{key:"renderCushionOptions",value:function(n){return React.createElement(CushionOptions,{key:n.optionCode,isMobile:this.props.isMobile,isInternational:this.props.isInternational,model:n,flyoutChoiceCode:this.state.flyoutChoiceCode,selectedSwatch:this.props.selectedOptionChoices[n.optionCode],cushionInfo:this.props.cushionInfo,onSwatchSelected:this.handleSwatchSelected,isProductOption:this.props.isProductOption,setSticky:this.props.setSticky,isCanadaSite:this.props.isCanadaSite})}},{key:"render",value:function(){var n=this;if(this.props.isProductOption&&this.props.isScene7&&(this.flatImageMacro=this.productOptionsMacro),!this.props.isOpen)return null;if(this.state.isOutwardPopupVisible)return React.createElement(OutwardPopup,{imageName:this.props.imageName,onClose:function(){return n.toggleOutwardPopup(!1)}});var t=this.props.isFurnNewExpConfigOn&&this.props.availableOptions.filter(function(n){return n.specialOrderOptionExperience==1}),i=this.props.isFurnNewExpConfigOn&&this.props.availableOptions.filter(function(n){return n.specialOrderOptionExperience==2}),r=t.length!=0&&t&&this.props.isFurnNewExpConfigOn?React.createElement(RecentlyViewedSwatches,{isMobile:this.props.isMobile,optionCode:t[0]&&t[0].optionCode,swatches:this.props.recentlyViewedSwatches,selectedSwatch:this.props.selectedOptionChoices[t[0]&&t[0].optionCode],sku:this.props.sku,label:this.props.recentlyViewedSwatchesLabel,onSwatchSelected:this.handleSwatchSelected,isNoSwatch:this.props.isNoSwatch,isCanadaSite:this.props.isCanadaSite,selectedLegSwatch:this.props.selectedOptionChoices[i[0]&&i[0].optionCode],isRecentlyViewedSwatchAvailable:this.props.recentlyViewedSwatches.length>0}):null,u=this.props.availableOptions.map(function(t){switch(t.specialOrderOptionExperience){case 1:return n.renderFabricOptions(t);case 2:return n.renderLegFinishOptions(t);case 3:return n.renderCushionOptions(t);case 6:case 7:return n.renderFabricOptionsSimple(t);default:return null}}),f=this.props.isCb2||this.props.isProductOption?React.createElement(ScalableImage,{id:"custom-player-img",src:"".concat(this.state.flatImage,"?&").concat(this.flatImageMacro),alt:this.props.flatImageAltText,macros:"$web_product_lg$",simulatePopup:this.props.isMobile&&!this.props.isProductOption}):this.props.isMobile||this.props.isScene7?React.createElement(ScalableImage,{id:"custom-player-img",src:"".concat(this.state.flatImage,"?").concat(this.flatImageMacro),alt:this.props.flatImageAltText,macros:"$web_product_lg$",simulatePopup:this.props.isMobile}):React.createElement(OutwardPlayer,{imageName:this.props.imageName,collectionCode:this.props.collectionCode}),e=this.state.optionChoiceParameter?"&oc=".concat(this.state.optionChoiceParameter):"",o=React.createElement("div",{className:"build-your-own nsInt"},React.createElement("p",{id:"build-your-own-subtitle"},"Looking for a different configuration?"),React.createElement("a",{href:"/sectional-planner?collectionCode=".concat(this.props.collectionCode,"&itemTypeCode=").concat(this.props.itemTypeCode).concat(e),className:"button button-secondary button-lg button-build-your-own","aria-describedby":"build-your-own-subtitle"},"Build Your Own"));return React.createElement("div",null,React.createElement("div",{id:"custom-upholstery-row",className:"jsCustomizer custom-upholstery-row"},React.createElement("div",{id:"custom-upholstery-player-col",className:"jsDivProduct jsCustomUpholsteryPlayerCol custom-upholstery-player-col"},React.createElement("div",{onClick:function(){return n.toggleOutwardPopup(!0)}},React.createElement("span",{className:"tap-zoom-overlay visible-xs"},"TAP TO ZOOM"),f),this.props.isFurnNewExpConfigOn&&!this.props.isMobile&&r,this.props.isCb2&&this.props.isSectionalPlannerEnabled&&o),React.createElement("div",{id:"custom-upholstery-data-col",className:"jsDivProduct custom-upholstery-data-col"},React.createElement("h2",{id:"customize-product",className:"sr-only customize-product-title"},"Product Options"),React.createElement("div",{className:(this.props.isMobile||this.props.isProductOption)&&"a11y-drawers"},u))),React.createElement("div",{id:"custom-upholstery-flyouts"}),this.props.isFurnNewExpConfigOn&&this.props.isMobile&&r)}}]),t}(React.Component),SpecialOrderContainer=function(n){function t(n){var i,r,u;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),r=n.model||{},u=new SpecialOrderModelAdapter(r,n.imageUrls),i.initialSelections=u.initialSelections,i.state={sku:r.sku,availableOptions:u.availableOptions,availabilityMessage:r.availabilityMessage,imageName:r.imagePath||"",isLoading:!1,isLoaded:!1,isOpen:!1||n.isProductOption,isStockSku:r.isStockSku,price:r.currentPrice,flatImage:r.flatImage,imageAltText:r.imageAltText,recentlyViewedSwatches:[],optionChoiceParameter:r.currentOptionChoiceParameter},i.handleOptionButtonClick=i.handleOptionButtonClick.bind(_assertThisInitialized(i)),i.handleOptionChoiceSelected=i.handleOptionChoiceSelected.bind(_assertThisInitialized(i)),i.updateRecentlyViewedSwatches=i.updateRecentlyViewedSwatches.bind(_assertThisInitialized(i)),i.setSelectedProduct=Crate.React.Actions.SelectedProductActions.setSelectedProduct,i.handlePopupStoreUpdated=i.handlePopupStoreUpdated.bind(_assertThisInitialized(i)),i.onStateChange=i.onStateChange.bind(_assertThisInitialized(i)),i.handleProductStoreUpdated=i.handleProductStoreUpdated.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var t,n;Crate.React.Stores.PopupStore.listen(this.handlePopupStoreUpdated);Crate.React.Stores.SelectedProductStore.listen(this.handleProductStoreUpdated);t=this;this.props.isMobile&&Crate.React.Stores.HeaderStore.listen(this.onStateChange);n=undefined;typeof window.location!="undefined"&&(n=window.location.href.indexOf("oc=")>=1?this.props.model.flatImage:undefined);this.setSelectedProduct.defer({sku:this.state.sku,isStockSku:this.state.isStockSku,optionChoices:new OptionChoiceParameter(this.initialSelections),flatImage:n,price:this.state.price,optionChoiceParameter:this.state.optionChoiceParameter});this.props.isProductOption&&this.handleOptionButtonClick()}},{key:"componentWillUnmount",value:function(){Crate.React.Stores.PopupStore.unlisten(this.handlePopupStoreUpdated)}},{key:"handlePopupStoreUpdated",value:function(n){this.props.isMobile&&n.isOpen===!1&&this.setState({isOpen:!1})}},{key:"onStateChange",value:function(n){this.setState(n)}},{key:"handleProductStoreUpdated",value:function(n){n.availableOptions&&!this.props.isProductOption&&this.setState({availableOptions:n.availableOptions})}},{key:"handleOptionButtonClick",value:function(){var n=this,i=this.state.isOpen,t;if(this.state.isLoaded&&!this.props.isProductOption){this.setState({isOpen:!i},function(){n.props.isMobile||Crate.Scroll.toSpecialOrderConfig()});return}this.setState({isLoading:!0});t={sku:this.state.sku,optionChoices:new OptionChoiceParameter(this.initialSelections)};Crate.Services.HttpService.post(this.props.configurationOptionsUrl,t).then(function(t){var i=t.options.map(function(n){return{optionCode:n.optionCode,shortName:n.shortName,longName:n.longName,optionChoices:n.optionChoices,specialOrderOptionExperience:n.specialOrderOptionExperience,specialOrderOptionType:n.specialOrderOptionType}});n.setState({availableOptions:i,sku:t.sku,isStockSku:t.isStockSku,imageName:t.imageName,recentlyViewedSwatchesLabel:t.recentlyViewedSwatchesLabel,recentlyViewedSwatches:t.recentlyViewedSwatches,isInternational:t.isInternational,stockSkuMessage:t.stockSkuMessage,stockPriceGroupTitle:t.stockPriceGroupTitle,refSkuMessage:t.refSkuMessage,mtoSkuMessage:t.mtoSkuMessage,isLoading:!1,isLoaded:!0,isOpen:!0,priceGroups:t.priceGroups},function(){n.props.isProductOption&&Crate.React.Actions.SelectedProductActions.setAvailableOptions(i);n.props.isMobile||n.props.isProductOption||Crate.Scroll.toSpecialOrderConfig()})})}},{key:"handleOptionChoiceSelected",value:function(n,t,i){var r=this,u=new OptionChoiceParameter(i),f={sku:this.state.sku,optionChoices:u};Crate.Services.HttpService.post(this.props.choiceDetailsUrl,f).then(function(n){var i,f,t,e;r.setState({sku:n.sku,imageName:n.imageName,isStockSku:n.isStockSku,price:n.price,formattedPrice:n.formattedPrice,availabilityMessage:n.availabilityMessage,flatImage:n.flatImage,imageAltText:n.imageAltText,optionChoiceParameter:n.optionChoiceParameter});i=n.options.find(function(n){return n.optionCode===1});f=i!=null?i.choice.priceGroupCode:0;r.setSelectedProduct({sku:n.sku,isStockSku:n.isStockSku,optionChoices:u,price:n.price,formattedPrice:n.formattedPrice,imageName:n.imageName,flatImage:n.flatImage,optionChoiceParameter:n.optionChoiceParameter,fabricPriceGroupCode:f});t=window.location.href;t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?")));t=t.substring(0,t.lastIndexOf("s")+1);e=n.isStockSku?"":"?oc="+n.optionChoiceParameter;history.replaceState({},document.title,t+n.sku+e);Crate.React.Actions.AnalyticsActions.fireColorBarChangeEvent(n)})}},{key:"updateRecentlyViewedSwatches",value:function(n,t){var r=this,i;this.props.isCb2||(i={optionCode:t,choiceCode:n,sku:this.state.sku},Crate.Services.HttpService.post("/browse/recentlyviewedswatches/updaterecentlyviewedswatches",i).then(function(n){r.setState({recentlyViewedSwatches:n})}))}},{key:"render",value:function(){return this.props.model?this.props.isProductOption?React.createElement(ProductOptions,_extends({},this.props,this.state,{initialSelections:this.initialSelections,onSwatchSelected:this.handleOptionChoiceSelected,onOptionButtonClick:this.handleOptionButtonClick,onRecentlyViewedChange:this.updateRecentlyViewedSwatches,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn,isSectionalPlannerEnabled:this.props.isSectionalPlannerEnabled,itemTypeCode:this.props.itemTypeCode,optionChoiceParameter:this.props.optionChoiceParameter})):this.props.isMobile?React.createElement("section",{className:"section-region"},React.createElement("h2",{className:"section-header"}),React.createElement("a",{className:"section-header-anchor"},"Select Color"),React.createElement(SpecialOrder,_extends({},this.props,this.state,{initialSelections:this.initialSelections,onSwatchSelected:this.handleOptionChoiceSelected,onOptionButtonClick:this.handleOptionButtonClick,onRecentlyViewedChange:this.updateRecentlyViewedSwatches,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn}))):React.createElement(SpecialOrder,_extends({},this.props,this.state,{initialSelections:this.initialSelections,onSwatchSelected:this.handleOptionChoiceSelected,onOptionButtonClick:this.handleOptionButtonClick,onRecentlyViewedChange:this.updateRecentlyViewedSwatches,headerCrossSellUrl:this.props.headerCrossSellUrl,headerCrossSellName:this.props.headerCrossSellName,isCanadaSite:this.props.isCanadaSite,isFurnNewExpEnabled:this.props.isFurnNewExpEnabled,isFurnNewExpConfigOn:this.props.isFurnNewExpConfigOn})):null}}]),t}(React.Component),SpecialOrderModelAdapter=function(n,t){for(var s=function(){for(var u=n.options||[],f=[],i,e,o,r=0;r<u.length;r++)(i=u[r],i.choice&&i.choice.attributeValues)&&(e=i.choice.attributeValues.map(function(n){return{attributeId:n.attributeLookup.attributeId,name:n.attributeLookup.attributeName,sequence:n.attributeLookup.sequence,shortValue:n.shortValue,type:n.attributeLookup.attributeType,value:n.value}}),o={optionCode:i.optionCode,choiceCode:i.choice.choiceCode,name:i.choice.name,description:i.choice.description,priceGroupCode:i.choice.priceGroupCode,imagePath:t[i.choice.choiceCode],attributes:e},f.push({optionCode:i.optionCode,shortName:i.shortName,optionChoices:[o],specialOrderOptionExperience:i.specialOrderOptionExperience,specialOrderOptionType:i.specialOrderOptionType}));return f},h=function(){return n.colorBar?n.colorBar.colorBarChoices?n.colorBar.colorBarChoices.map(function(n){var i=n.choiceAttibutes.map(function(n){return{attributeId:n.attributeId,name:n.name,sequence:n.sequence,shortValue:n.shortValue,type:n.type,value:n.value}});return{optionCode:n.optionCode,choiceCode:n.choiceCode,name:n.choiceName,description:n.choiceDescription,priceGroupCode:"0",imagePath:t[n.choiceCode],attributes:i}}):[]:[]},c=function(n){for(var r={},i,t=0;t<n.length;t++)i=n[t],r[i.optionCode]=i.optionChoices[0];return r},r=s()||[],f=h(),e=r.find(function(t){return t.specialOrderOptionType===n.colorBar.optionType}),u,o,i=0;i<f.length;i++)u=f[i],o=e.optionChoices.some(function(n){return n.choiceCode===u.choiceCode}),o||e.optionChoices.push(u);return{availableOptions:r,initialSelections:c(r)}},SpecialOrderPopup=function(n){return React.createElement("div",null,React.createElement("div",{id:"special-order-popup-container",className:"custom-xs-popup"},React.createElement("div",{className:"custom-layer-top"},React.createElement("button",{type:"button",className:"button button-secondary button-xl popup-close",title:"Close Popup",onClick:n.handleBackButtonClick},React.createElement("span",{className:"sr-only"},"Close Popup")),React.createElement(Price,{formattedPrice:n.formattedPrice})),React.createElement("div",{className:"custom-area-header"},React.createElement("div",{className:"custom-qty-btn-row"},n.shopButtons),React.createElement(RevealContent,null,React.createElement("div",{id:"custom-summary-drawers",className:"jsCustomSummaryDrawers custom-reveal-summary-content","aria-hidden":"false"},React.createElement("span",{className:"custom-area-availability jsCustomAreaAvailability",dangerouslySetInnerHTML:{__html:n.availabilityMessage}}),n.summaryBar))),n.children),React.createElement("div",{id:"swatch-order-form-container"}),React.createElement("div",{id:"fullscreen-img-custome-layer-container"}))},SpecialOrderSummary=function(n){var t={None:0,Fabric:1,Image:2,Text:3,DropDown:4,RadioButton:5,FabricOld:6,Leather:7},i=n.availableOptions||[],r=n.selectedOptions||{},u=i.map(function(i){if(!i.shortName||!i.specialOrderOptionExperience)return null;var u=r[i.optionCode];return u?React.createElement("span",{key:i.optionCode,className:"shop-bar-summary-item"},!n.suppressImages&&(i.specialOrderOptionExperience===t.Fabric||i.specialOrderOptionExperience===t.Leather||i.specialOrderOptionExperience===t.FabricOld||i.specialOrderOptionExperience===t.Image)&&i.specialOrderOptionType!==26&&u.imagePath&&React.createElement("img",{className:"shop-bar-summary-item-img jsChoiceImg_".concat(i.optionCode),src:u.imagePath,alt:"","aria-hidden":"true"}),React.createElement("span",{className:"shop-bar-summary-item-text","aria-live":"polite"},React.createElement("span",{className:"shop-bar-summary-item-label jsOptionLabel_".concat(i.optionCode)},React.createElement("span",{className:"sr-only"},"Selected"),i.shortName,":"),React.createElement("span",{className:"shop-bar-summary-item-description jsChoiceDescription_".concat(i.optionCode)},u.name||u.description))):null});return React.createElement("div",{className:"shop-bar-summary"},u)},SpecialOrderSummaryContainer=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={selectedOptions:n.selectedOptions,isLoading:n.isMobile?!0:!1},i.handleProductStoreUpdated=i.handleProductStoreUpdated.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){Crate.React.Stores.SelectedProductStore.listen(this.handleProductStoreUpdated);this.setState({isLoading:!1})}},{key:"componentWillUnmount",value:function(){Crate.React.Stores.SelectedProductStore.unlisten(this.handleProductStoreUpdated)}},{key:"handleProductStoreUpdated",value:function(n){var t;if(n.selectedProduct){var f=this.props.availableOptions||[],r=n.selectedProduct.optionChoices,u={};for(t=0;t<r.length;t++){var i=r[t],e=f.find(function(n){return n.optionCode===Number(i.optionCode)}),o=e.optionChoices.find(function(n){return n.choiceCode===i.choiceCode});u[i.optionCode]=o}this.setState({selectedOptions:u})}}},{key:"render",value:function(){return React.createElement("div",null,this.state.isLoading?React.createElement("div",{className:"plcae-holder-summary"},React.createElement("span",{className:"plcae-holder-blank"}),React.createElement("span",{className:"plcae-holder-blank"})):React.createElement(SpecialOrderSummary,_extends({},this.props,this.state)))}}]),t}(React.Component),Swatch=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this;return React.createElement("div",{className:this.props.isDisabled?"radio-item disabled-diagonal-line":"radio-item"},React.createElement("input",{type:"radio",className:"sr-only",name:this.props.radioGroup||this.props.name,"aria-disabled":this.props.isDisabled,defaultValue:this.props.choice.description,checked:this.props.isSelected,id:this.props.id,ref:function(t){return n.input=t},"aria-describedby":this.props.ariaDescribedBy?this.props.ariaDescribedBy:"tooltip-fabric-feature-".concat(this.props.choice.choiceCode),onKeyDown:this.props.onKeyDown}),React.createElement("label",{htmlFor:this.props.id,title:this.props.choice.description},this.props.isDisabled&&React.createElement("img",{className:"diagonal-line-image",src:"//images.crateandbarrel.com/is/image/Crate/notavailableswatch?fmt=png-alpha",alt:"disabled",onClick:this.props.onClick}),this.props.isLazyLoad?React.createElement("img",{className:"swatch-img lazyload","data-lazy-loaded":"true","data-src":this.props.choice.imagePath,alt:this.props.choice.description,onClick:this.props.onClick}):React.createElement("img",{className:"swatch-img",src:this.props.choice.imagePath,alt:this.props.choice.description,onClick:this.props.onClick}),this.props.isDisabledTooltipVisible&&React.createElement("span",{className:"tooltip-notch"})),this.props.isDisabledTooltipVisible&&React.createElement("span",{id:"tooltip-fabric-feature-".concat(this.props.choice.choiceCode),className:"a11y-radio-tooltip"},"Not available on this frame",React.createElement("button",{type:"button",className:"button-dismiss",title:"Dismiss","aria-label":"Dismiss",onClick:function(){return n.props.dismissOnClick(n.input)}},React.createElement("svg",{className:"svg-icon-close",focusable:"false"},React.createElement("use",{xlinkHref:"#svg-icon-close"})))),this.props.isFlyoutOpen&&this.props.isSelected?React.createElement("span",{className:"flyout-notch"}):"")}}]),t}(React.Component)