Array.from||(Array.from=function(){var t=Object.prototype.toString,o=function(o){return"function"==typeof o||"[object Function]"===t.call(o)},e=function(t){var o=Number(t);return isNaN(o)?0:0!==o&&isFinite(o)?(o>0?1:-1)*Math.floor(Math.abs(o)):o},r=Math.pow(2,53)-1,n=function(t){var o=e(t);return Math.min(Math.max(o,0),r)};return function(t){var e=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,a=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof a){if(!o(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,l=n(r.length),d=o(e)?Object(new e(l)):new Array(l),u=0;u<l;)s=r[u],a?d[u]="undefined"==typeof i?a(s,u):a.call(i,s,u):d[u]=s,u+=1;return d.length=l,d}}()),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var o=(this.document||this.ownerDocument).querySelectorAll(t),e=o.length;--e>=0&&o.item(e)!==this;);return e>-1}),"undefined"==typeof _roomvo&&(_roomvo={serverUrl:"https://www.roomvo.com",visitorIds:{},vendorCodeMap:{},queuedVendorCodeRequests:[],previousBodyStyleOverflow:null,prefilter:"",stimrClass:"roomvo-stimr",generalButtonClass:"roomvo-button",styleSheetExists:!1,trackingCode:"",log:"",mainFunctionDone:!1}),_roomvo.addToLog=function(t){try{var o=1e6;_roomvo.log.length+t.length<o?_roomvo.log+=t+"\n":_roomvo.log+=".....\n"}catch(e){_roomvo.log=e.toString()}},_roomvo.addToLog("Roomvo log begins..."),_roomvo.debug=function(){for(var t=document.querySelectorAll("."+_roomvo.stimrClass),o=0,e=0;e<t.length;++e)"hidden"==t[e].style.visibility&&++o;console.log(t.length+" STIMRs on page, "+o+" hidden."),console.log(_roomvo.log.split("\n").length+" lines in log.");var r=_roomvo.getVendorCode();r&&(console.log("Vendor code on page: "+r),_roomvo.runIfVendorCodeAvailable(r,function(){console.log("Available: "+r)}))},_roomvo.getPathFromFullUrl=function(t){var o=document.createElement("a");o.href=t;var e=o.pathname;return e.length>0&&"/"!=e[0]&&(e="/"+e),e},_roomvo.getCurrentUrlPath=function(){return _roomvo.getPathFromFullUrl(decodeURIComponent(window.location.href))},_roomvo.getCurrentPathComponents=function(){var t=this.getCurrentUrlPath(),o=t.replace(/(^\/)|(\/$)/g,"");return o.split("/")},_roomvo.getLastPathComponent=function(){var t=_roomvo.getCurrentPathComponents();return t[t.length-1]},_roomvo.getParameterByName=function(t,o){o||(o=decodeURIComponent(window.location.href)),t=t.replace(/[\[\]]/g,"\\$&");var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=e.exec(o);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},_roomvo.addWindowMessageListener=function(t){var o=window.addEventListener?"addEventListener":"attachEvent",e=window[o],r="attachEvent"==o?"onmessage":"message";e(r,t,!1)},_roomvo.JsonStringify=function(t){return!JSON.stringify&&JSON.serialize?JSON.serialize(t):JSON.stringify(t)},_roomvo.JsonParse=function(t){return!JSON.parse&&JSON.deserialize?JSON.deserialize(t):JSON.parse(t)},_roomvo.isEmpty=function(t){for(var o in t)if(t.hasOwnProperty(o))return!1;return _roomvo.JsonStringify(t)===_roomvo.JsonStringify({})},_roomvo.isWebGlSupported=function(){try{var t=document.createElement("canvas"),o=t.getContext("webgl")||t.getContext("experimental-webgl");if(null==o)throw"nowebgl"}catch(e){return!1}return!0},_roomvo.isIe=function(){var t=navigator.userAgent;return!!t&&t.indexOf("Trident/")>-1},_roomvo.isBot=function(){return/bot|googlebot|spider|robot|crawl|baidu|bing|msn|duckduckgo|teoma|slurp|yandex|sitecrawl/i.test(navigator.userAgent)},_roomvo.safelyGetTrimmedInnerText=function(t){var o=document.querySelector(t);return o&&o.innerText?o.innerText.trim():""},_roomvo.debounce=function(t,o,e){var r;return function(){var n=this,i=arguments,a=e&&!r;clearTimeout(r),r=setTimeout(function(){r=null,e||t.apply(n,i)},o),a&&t.apply(n,i)}},_roomvo.onAllSelectorsAvailable=function(t,o,e){var r=function(t,o){if(!t)return!1;for(var e=0;e<o.length;++e)if(!t.querySelector(o[e]))return!1;return!0},n=function(t,o,e){r(t,o)?e():setTimeout(n,60,t,o,e)};n(t,o,e)},_roomvo.onSelectorAvailableOrAttached=function(t,o,e){if(t){if(t.querySelector(o)&&e())return;var r=new MutationObserver(function(r,n){for(var i=0;i<r.length;++i)if(r[i].addedNodes)for(var a=0;a<r[i].addedNodes.length;++a){var s=r[i].addedNodes[a];if(s.matches&&s.matches(o)&&t.querySelector(o)&&e())return void n.disconnect();if(s.querySelector){var l=s.querySelector(o);if(l&&t.querySelector(o)&&e())return void n.disconnect()}}}),n={childList:!0,subtree:!0};r.observe(t,n)}},_roomvo.track=function(t){var o=new FormData;for(var e in t)o.append(e,t[e]);var r=new XMLHttpRequest;r.open("POST",_roomvo.serverUrl+"/api/events/",!0),r.send(o)},_roomvo.getDeviceType=function(){var t=!1;return function(o){var e=new RegExp(["(android|bb\\d+|meego).+mobile|avantgo|bada/|blackberry","|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp","|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)/|plucker","|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|wap|windows ce|xda","|xiino|android|ipad|playbook|silk"].join(""),"i"),r=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s","|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu","|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)","|br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw","|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)","|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo","|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c","|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|/)|ibro|idea","|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |/)|klon","|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|/(k|l|u)|50|54|-[a-w])|libw|lynx","|m1-w|m3ga|m50/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef","|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]","|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph","|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire","|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)","|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)","|sdk/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3","|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)","|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)","|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61","|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-","|your|zeto|zte-"].join(""),"i");t=!!o&&(e.test(o)||r.test(o.substring(0,4)))}(navigator.userAgent||navigator.vendor||window.opera),t?_roomvo.TOUCH_DEVICE:_roomvo.DESKTOP_DEVICE},_roomvo.resetElem=function(t){t.setAttribute("style","animation : none"),t.setAttribute("style","animation-delay : 0"),t.setAttribute("style","animation-direction : normal"),t.setAttribute("style","animation-duration : 0"),t.setAttribute("style","animation-fill-mode : none"),t.setAttribute("style","animation-iteration-count : 1"),t.setAttribute("style","animation-name : none"),t.setAttribute("style","animation-play-state : running"),t.setAttribute("style","animation-timing-function : ease"),t.setAttribute("style","backface-visibility : visible"),t.setAttribute("style","background : 0"),t.setAttribute("style","background-attachment : scroll"),t.setAttribute("style","background-clip : border-box"),t.setAttribute("style","background-color : transparent"),t.setAttribute("style","background-image : none"),t.setAttribute("style","background-origin : padding-box"),t.setAttribute("style","background-position : 0 0"),t.setAttribute("style","background-position-x : 0"),t.setAttribute("style","background-position-y : 0"),t.setAttribute("style","background-repeat : repeat"),t.setAttribute("style","background-size : auto auto"),t.setAttribute("style","border : 0"),t.setAttribute("style","border-style : none"),t.setAttribute("style","border-width : medium"),t.setAttribute("style","border-color : inherit"),t.setAttribute("style","border-bottom : 0"),t.setAttribute("style","border-bottom-color : inherit"),t.setAttribute("style","border-bottom-left-radius : 0"),t.setAttribute("style","border-bottom-right-radius : 0"),t.setAttribute("style","border-bottom-style : none"),t.setAttribute("style","border-bottom-width : medium"),t.setAttribute("style","border-collapse : separate"),t.setAttribute("style","border-image : none"),t.setAttribute("style","border-left : 0"),t.setAttribute("style","border-left-color : inherit"),t.setAttribute("style","border-left-style : none"),t.setAttribute("style","border-left-width : medium"),t.setAttribute("style","border-radius : 0"),t.setAttribute("style","border-right : 0"),t.setAttribute("style","border-right-color : inherit"),t.setAttribute("style","border-right-style : none"),t.setAttribute("style","border-right-width : medium"),t.setAttribute("style","border-spacing : 0"),t.setAttribute("style","border-top : 0"),t.setAttribute("style","border-top-color : inherit"),t.setAttribute("style","border-top-left-radius : 0"),t.setAttribute("style","border-top-right-radius : 0"),t.setAttribute("style","border-top-style : none"),t.setAttribute("style","border-top-width : medium"),t.setAttribute("style","bottom : auto"),t.setAttribute("style","box-shadow : none"),t.setAttribute("style","box-sizing : content-box"),t.setAttribute("style","caption-side : top"),t.setAttribute("style","clear : none"),t.setAttribute("style","clip : auto"),t.setAttribute("style","color : inherit"),t.setAttribute("style","columns : auto"),t.setAttribute("style","column-count : auto"),t.setAttribute("style","column-fill : balance"),t.setAttribute("style","column-gap : normal"),t.setAttribute("style","column-rule : medium none currentColor"),t.setAttribute("style","column-rule-color : currentColor"),t.setAttribute("style","column-rule-style : none"),t.setAttribute("style","column-rule-width : none"),t.setAttribute("style","column-span : 1"),t.setAttribute("style","column-width : auto"),t.setAttribute("style","content : normal"),t.setAttribute("style","counter-increment : none"),t.setAttribute("style","counter-reset : none"),t.setAttribute("style","cursor : auto"),t.setAttribute("style","direction : ltr"),t.setAttribute("style","display : inline"),t.setAttribute("style","empty-cells : show"),t.setAttribute("style","float : none"),t.setAttribute("style","font : normal"),t.setAttribute("style","font-family : inherit"),t.setAttribute("style","font-size : medium"),t.setAttribute("style","font-style : normal"),t.setAttribute("style","font-variant : normal"),t.setAttribute("style","font-weight : normal"),t.setAttribute("style","height : auto"),t.setAttribute("style","hyphens : none"),t.setAttribute("style","left : auto"),t.setAttribute("style","letter-spacing : normal"),t.setAttribute("style","line-height : normal"),t.setAttribute("style","list-style : none"),t.setAttribute("style","list-style-image : none"),t.setAttribute("style","list-style-position : outside"),t.setAttribute("style","list-style-type : disc"),t.setAttribute("style","margin : 0"),t.setAttribute("style","margin-bottom : 0"),t.setAttribute("style","margin-left : 0"),t.setAttribute("style","margin-right : 0"),t.setAttribute("style","margin-top : 0"),t.setAttribute("style","max-height : none"),t.setAttribute("style","max-width : none"),t.setAttribute("style","min-height : 0"),t.setAttribute("style","min-width : 0"),t.setAttribute("style","opacity : 1"),t.setAttribute("style","orphans : 0"),t.setAttribute("style","outline : 0"),t.setAttribute("style","outline-color : invert"),t.setAttribute("style","outline-style : none"),t.setAttribute("style","outline-width : medium"),t.setAttribute("style","overflow : visible"),t.setAttribute("style","overflow-x : visible"),t.setAttribute("style","overflow-y : visible"),t.setAttribute("style","padding : 0"),t.setAttribute("style","padding-bottom : 0"),t.setAttribute("style","padding-left : 0"),t.setAttribute("style","padding-right : 0"),t.setAttribute("style","padding-top : 0"),t.setAttribute("style","page-break-after : auto"),t.setAttribute("style","page-break-before : auto"),t.setAttribute("style","page-break-inside : auto"),t.setAttribute("style","perspective : none"),t.setAttribute("style","perspective-origin : 50% 50%"),t.setAttribute("style","position : static"),t.setAttribute("style","right : auto"),t.setAttribute("style","tab-size : 8"),t.setAttribute("style","table-layout : auto"),t.setAttribute("style","text-align : inherit"),t.setAttribute("style","text-align-last : auto"),t.setAttribute("style","text-decoration : none"),t.setAttribute("style","text-decoration-color : inherit"),t.setAttribute("style","text-decoration-line : none"),t.setAttribute("style","text-decoration-style : solid"),t.setAttribute("style","text-indent : 0"),t.setAttribute("style","text-shadow : none"),t.setAttribute("style","text-transform : none"),t.setAttribute("style","top : auto"),t.setAttribute("style","transform : none"),t.setAttribute("style","transform-style : flat"),t.setAttribute("style","transition : none"),t.setAttribute("style","transition-delay : 0s"),t.setAttribute("style","transition-duration : 0s"),t.setAttribute("style","transition-property : none"),t.setAttribute("style","transition-timing-function : ease"),t.setAttribute("style","unicode-bidi : normal"),t.setAttribute("style","vertical-align : baseline"),t.setAttribute("style","visibility : visible"),t.setAttribute("style","white-space : normal"),t.setAttribute("style","widows : 0"),t.setAttribute("style","width : auto"),t.setAttribute("style","word-spacing : normal"),t.setAttribute("style","z-index : auto")},_roomvo.addStyleSheet=function(){function t(){return Array.prototype.slice.call(document.styleSheets).every(o)}function o(t){return!t.roomvo}if(t()){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e);var r=e.sheet;return r.roomvo=!0,this.styleSheetExists=!0,r}},_roomvo.PRODUCT_TYPE_UNKNOWN=0,_roomvo.PRODUCT_TYPE_FLOOR=1,_roomvo.PRODUCT_TYPE_RUG=2,_roomvo.PRODUCT_TYPE_FURNITURE=3,_roomvo.PRODUCT_TYPE_COUNTERTOP=4,_roomvo.PRODUCT_TYPE_WALL=5,_roomvo.DESKTOP_DEVICE=0,_roomvo.TOUCH_DEVICE=1,_roomvo.ENTRY_TYPE_NONE=0,_roomvo.ENTRY_TYPE_STANDALONE=1,_roomvo.ENTRY_TYPE_PRODUCT_INTEGRATION=2,_roomvo.getVendorUrlPath=function(){return""},_roomvo.getVendorCode=function(t){return"code1"},_roomvo.onBodyLoaded=function(){},_roomvo.isWebGlNeeded=function(){return!0},_roomvo.getLocale=function(){return"en-us"},_roomvo.getDomainIfAvailable=function(){return""},_roomvo.getCookieExpiration=function(){return"Fri, 31 Dec 9999 23:59:59 GMT"},_roomvo.addToCart=function(t){},_roomvo.isInAbExperimentMode=function(){return!1},_roomvo.trackEvent=function(t,o){try{for(var e=ga.getAll(),r=0;r<e.length;++r)e[r].send("event","Roomvo",t,o)}catch(n){}},_roomvo.getVendorUrlPathForStimr=function(){return _roomvo.getVendorUrlPath()},_roomvo.addPopup=function(){var t=document.createElement("object");_roomvo.resetElem(t),t.style.display="none",t.style.setProperty("position","fixed","important"),t.style.setProperty("top","0","important"),t.style.setProperty("left","0","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","100%","important"),t.style.setProperty("z-index","2147483647","important"),t.setAttribute("role","dialog"),t.setAttribute("aria-label","Roomvo Visualizer"),t.id="ffPopup",t.type="text/html",document.body.appendChild(t)},_roomvo.trample=function(){for(var t=Array.from(document.querySelectorAll("*")).filter(function(t){return"2147483647"==getComputedStyle(t).getPropertyValue("z-index")}),o=0;o<t.length;o++)"ffPopup"!=t[o].id&&(t[o].style.setProperty("z-index","2147483646","important"),t[o].dataset.trampled="1")},_roomvo.untrample=function(){for(var t=Array.from(document.querySelectorAll("*")).filter(function(t){return"1"==t.dataset.trampled}),o=0;o<t.length;o++)t[o].style.setProperty("z-index","2147483647")},_roomvo.removePopup=function(){var t=document.getElementById("ffPopup");t&&t.parentNode&&t.parentNode.removeChild(t),setTimeout(_roomvo.untrample(),10)},_roomvo.loadPopupWithUrl=function(t){if(_roomvo.isWebGlNeeded()&&!_roomvo.isWebGlSupported())return void alert("Your browser or device does not support WebGL. Please try a different browser or device.");var o=document.getElementById("ffPopup");o.style.display="block",o.style.background='white url("'+_roomvo.serverUrl+'/static/images/loading.gif") no-repeat center',o.data=t;try{var e=window.getComputedStyle(document.body).getPropertyValue("overflow");"hidden"!==e&&(_roomvo.previousBodyStyleOverflow=e)}catch(r){}_roomvo.previousBodyStyleOverflow&&(document.body.style.overflow="hidden"),setTimeout(_roomvo.trample(),10)},_roomvo.loadPopupForVendor=function(t,o,e,r,n){void 0!==e&&""!==e||(e="/"),void 0===r&&(r=""),void 0===n&&(n="");var i=_roomvo.visitorIds[t]||"",a=_roomvo.serverUrl+"/my/"+t+e+"?visitor_id="+encodeURIComponent(i)+"&vendor_code="+encodeURIComponent(o)+"&product_type="+encodeURIComponent(n)+"&tracking_code="+encodeURIComponent(_roomvo.trackingCode)+"&locale="+encodeURIComponent(_roomvo.getLocale())+"&prefilter="+encodeURIComponent(_roomvo.prefilter)+r,s=function(){try{return window.self!==window.top}catch(t){return!0}};s()||(a+="&use_host_navigation=1"),_roomvo.loadPopupWithUrl(a),_roomvo.trackEvent("see this in my room",o)},_roomvo.loadPopup=function(t,o,e,r,n){try{n=n||_roomvo.getVendorCode(t)}catch(i){n=""}_roomvo.loadPopupForVendor(_roomvo.getVendorUrlPathForStimr(),n,o,e,r)},_roomvo.startStandaloneVisualizer=function(t,o){_roomvo.loadPopup(void 0,void 0,void 0,_roomvo.convertProductType(t),o)},_roomvo.startStandalone=function(){_roomvo.loadPopup()},_roomvo.convertProductType=function(t){return"floor"===t?"1":"rug"===t?"2":"furniture"===t?"3":"countertop"===t?"4":"wall"===t?"5":void 0},_roomvo.makeNotifyConversionXhr=function(t,o,e,r,n,i){var a=new XMLHttpRequest;a.open("POST",_roomvo.serverUrl+"/api/notify_conversion",!0);var s=new FormData;s.append("visitor_id",_roomvo.visitorIds[_roomvo.getVendorUrlPath()]),s.append("vendor_codes",r||""),s.append("quantities",n||""),s.append("prices",i||""),s.append("total",o||""),s.append("currency",e||""),s.append("transaction_id",t||""),a.send(s)},_roomvo.notifyConversionBasedOnSelectors=function(t,o,e){_roomvo.onAllSelectorsAvailable(document,[t],function(){var r=_roomvo.safelyGetTrimmedInnerText(t),n=_roomvo.priceToNumber(_roomvo.safelyGetTrimmedInnerText(o))||"",i=_roomvo.safelyGetTrimmedInnerText(e);i=i.substring(0,5),_roomvo.makeNotifyConversionXhr(r,n,i)})},_roomvo.notifyConversionOnShopify=function(){_roomvo.notifyConversionBasedOnSelectors(".os-order-number",".payment-due__price",".payment-due__currency")},_roomvo.priceToNumber=function(t){return t=t.replace(/[^0-9\.-]+/g,""),Number(t)},_roomvo.fetchVendorCodeMappings=function(){for(var t="?vendor__url_path="+_roomvo.getVendorUrlPathForStimr(),o=new Set,e=0;e<_roomvo.queuedVendorCodeRequests.length;++e)_roomvo.queuedVendorCodeRequests[e].hasBeenSentOff||(o.add(_roomvo.queuedVendorCodeRequests[e].vendorCode),_roomvo.queuedVendorCodeRequests[e].hasBeenSentOff=!0);var r=4e3,n=0,i={};i[n]=[],o.forEach(function(t){var o=i[n].concat(t),e=encodeURIComponent(_roomvo.JsonStringify(o)).length;e>r?i[++n]=[t]:i[n].push(t)});for(var a=0;a<=n;++a){var s="&vendor_code__in="+encodeURIComponent(_roomvo.JsonStringify(i[a])),l=_roomvo.serverUrl+"/api/vendor_mappings/"+t+s,d=new XMLHttpRequest;d.bucketIndex=a,d.open("GET",l,!0),d.onreadystatechange=function(){4==this.readyState&&200==this.status&&(_roomvo.JsonParse(this.response).forEach(function(t){void 0===_roomvo.vendorCodeMap[t.vendorCode]&&(_roomvo.vendorCodeMap[t.vendorCode]=[]),_roomvo.vendorCodeMap[t.vendorCode].push(t)}),i[this.bucketIndex].forEach(function(t){void 0===_roomvo.vendorCodeMap[t]&&(_roomvo.vendorCodeMap[t]=[]);for(var o=_roomvo.queuedVendorCodeRequests.length-1;o>=0;--o)if(_roomvo.queuedVendorCodeRequests[o].vendorCode==t){var e=_roomvo.queuedVendorCodeRequests[o],r=!e.ignoreCallbackIfNotAvailable||_roomvo.vendorCodeMap[t]&&_roomvo.vendorCodeMap[t].length;e.callback&&r&&e.callback.apply(null,e.callbackArguments),_roomvo.queuedVendorCodeRequests.splice(o,1)}}))},d.send()}},_roomvo.debouncedFetchVendorCodeMappings=_roomvo.debounce(_roomvo.fetchVendorCodeMappings,50,!1),_roomvo.addCallbackForVendorMapping=function(t,o,e){t&&(_roomvo.queuedVendorCodeRequests.push({vendorCode:t,callback:o,callbackArguments:e,hasBeenSentOff:!1}),_roomvo.debouncedFetchVendorCodeMappings())},_roomvo.runIfVendorCodeAvailable=function(t,o,e){t&&(_roomvo.queuedVendorCodeRequests.push({vendorCode:t,callback:o,callbackArguments:e,ignoreCallbackIfNotAvailable:!0,hasBeenSentOff:!1}),_roomvo.debouncedFetchVendorCodeMappings())},_roomvo.shouldShowStimrButtons=function(){return!_roomvo.isInAbExperimentMode()||"dontshow"!=_roomvo.trackingCode},_roomvo.getStimrButtonText=function(t){return"See It In My Room"},_roomvo.createDefaultStimrButton=function(t){var o=document.createElement("div");o.style.height="48px",o.style.paddingTop="4px",o.style.paddingBottom="4px",o.style.width="100%",o.style.boxSizing="border-box",o.style.textAlign="center";var e=document.createElement("div");e.style.display="inline-block",e.style.height="100%",e.style.paddingLeft="16px",e.style.paddingRight="16px",e.style.paddingTop="12px",e.style.paddingBottom="12px",e.style.boxSizing="border-box",e.style.textTransform="uppercase",e.style.cursor="pointer",e.style.textAlign="center",e.style.background="#ff3d00",e.style.color="#fff";var r=document.createElement("img");r.src=_roomvo.serverUrl+"/static/images/logo-72x72_white.png",r.style.height="100%",r.style.marginRight="4px",r.style.verticalAlign="middle",r.style.display="inline-block";var n=document.createElement("div");return n.setAttribute("style",'font-family: "Roboto", "Noto", sans-serif !important'),n.style.fontSize="16px",n.innerText=_roomvo.getStimrButtonText(_roomvo.getLocale()),n.style.display="inline-block",n.style.textAlign="center",t&&(r.style.width="1px",r.style.visibility="hidden"),e.appendChild(r),e.appendChild(n),o.appendChild(e),o},_roomvo.createUnbrandedStimrButton=function(){return _roomvo.createDefaultStimrButton(!0)},_roomvo.addProductButtonsToPage=function(t,o,e,r,n,i,a){void 0!==r&&null!==r||(r=function(t,o){t.appendChild(o)}),i=i||_roomvo.generalButtonClass;var s=function(){_roomvo.addToLog("About to add buttons to all containers");for(var t=document.querySelectorAll(o),e=0;e<t.length;e++){var r="";try{r=_roomvo.getVendorCode(t[e])}catch(i){_roomvo.addToLog("Exception getting vendor code on "+t[e].toString()+": "+i.toString());continue}void 0===_roomvo.vendorCodeMap[r]?(_roomvo.addToLog('Checking unknown: "'+r+'" on '+t[e]),_roomvo.addCallbackForVendorMapping(r,l,[t[e],r,n])):l(t[e],r,n)}},l=function(t,o,e){var r=function(o){if(void 0===_roomvo.vendorCodeMap[o])return _roomvo.addToLog('ERROR: unknown, should not be: "'+o+'" on '+t),!1;if(0===_roomvo.vendorCodeMap[o].length)return _roomvo.addToLog('NOT available: "'+o+'" on '+t),!1;if(e){for(var r=0;r<_roomvo.vendorCodeMap[o].length;++r)if(_roomvo.vendorCodeMap[o][r].productType==e)return _roomvo.addToLog("Available for product type "+e+': "'+o+'" on '+t),!0;return _roomvo.addToLog("NOT available for product type "+e+': "'+o+'" on '+t),!1}return _roomvo.addToLog('Available without product type: "'+o+'" on '+t),!0},n=function(t){for(var o=t.querySelectorAll("."+i),r=0;r<o.length;++r){var n=!("productType"in o[r].dataset)||e==o[r].dataset.productType;if("hidden"!==window.getComputedStyle(o[r]).visibility&&n)return!0}return!1};r(o)?n(t)||d(t):u(t)},d=function(o){var e=null;t?(e=t(n),r(o,e)):e=o.querySelector("."+i),e?(e.style.visibility="visible",e.classList.add(i),n&&(e.dataset.productType=n),e.onclick=a,_roomvo.addToLog("Added button to "+o)):_roomvo.addToLog("Could not create or find existing button in "+o)},u=function(o){for(var e=o.querySelectorAll("."+i),r=0;r<e.length;++r)if(t){var a=!("productType"in e[r].dataset)||n==e[r].dataset.productType;a&&(e[r].parentNode.removeChild(e[r]),addToLog(integrator,"Removed button from "+o))}else e[r].style.visibility="hidden",_roomvo.addToLog("Hid button inside "+o)},m=[o];e&&m.push(e),_roomvo.addToLog("Waiting for: "+m.toString()),_roomvo.onAllSelectorsAvailable(document,m,function(){_roomvo.onSelectorAvailableOrAttached(document,o,s)})},_roomvo.addStimrButtonsToPage=function(t,o,e,r,n){if(_roomvo.shouldShowStimrButtons()){var i=function(t){return t.stopPropagation(),_roomvo.loadPopup(this,"","",n),!1};_roomvo.addProductButtonsToPage(t,o,e,r,n,_roomvo.stimrClass,i)}},"undefined"==typeof roomvo&&(roomvo={}),ffViz=roomvo,roomvo.loadAssistant=function(){document.querySelector("#assistantPopup")&&document.querySelector("#assistantPopup").contentWindow.postMessage("roomvoOpenAssistant","*")},roomvo.enableButtonForVisualization=function(t){if(_roomvo.getVendorUrlPathForStimr()&&_roomvo.getVendorCode(t)&&"hidden"===t.style.visibility){var o=function(t){_roomvo.vendorCodeMap[_roomvo.getVendorCode(t)].length>0&&(t.style.visibility="visible",t.onclick=function(o){return o.stopPropagation(),_roomvo.loadPopup(t),!1})};void 0===_roomvo.vendorCodeMap[_roomvo.getVendorCode(t)]?_roomvo.addCallbackForVendorMapping(_roomvo.getVendorCode(t),o,[t]):o(t)}},roomvo.startStandalone=function(){_roomvo.startStandalone()},roomvo.startStandaloneVisualizer=function(){_roomvo.startStandalone()},_roomvo.manageAbExperiment=function(){if(""==_roomvo.trackingCode){var t=new Date;t.getSeconds()%2===0?(_roomvo.trackingCode="dontshow",document.cookie="fftrackingcode=dontshow; expires="+_roomvo.getCookieExpiration()+"; path=/"):(_roomvo.trackingCode="show",document.cookie="fftrackingcode=show; expires="+_roomvo.getCookieExpiration()+"; path=/")}},_roomvo.getNewVisitorIds=function(t){var o=new XMLHttpRequest;o.open("POST",_roomvo.serverUrl+"/api/create_visitors",!0);var e=new FormData;e.append("vendor_url_path",_roomvo.getVendorUrlPath()),e.append("locale",_roomvo.getLocale()),e.append("tracking_code",_roomvo.trackingCode),o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var o=_roomvo.JsonParse(this.responseText);_roomvo.isEmpty(_roomvo.visitorIds)&&(document.cookie="ffvisitorids="+_roomvo.JsonStringify(o.visitorIds)+"; expires="+_roomvo.getCookieExpiration()+"; path=/; "+_roomvo.getDomainIfAvailable(),_roomvo.visitorIds=o.visitorIds,t&&t())}},o.send(e)},_roomvo.getVendorUrlPath=function(){return"cb2"},_roomvo.getVendorCode=function(t){var o=document.querySelector("span.shop-bar-sku-area > span.jsSwatchSku");if(o&&o.innerText)return o.innerText;var e=document.querySelector("div.main-product ul.grouper-attributes > li > div.jsGrouperSelected");if(e&&e.dataset&&e.dataset.matchingskus){var r=e.dataset.matchingskus.split(",");if(r&&r.length>0)return r[Math.floor((r.length-1)/2)]}var e=document.querySelector("div.main-product ul.grouper-attributes > li > div.jsGrouperSelection");if(e&&e.dataset&&e.dataset.matchingskus){var r=e.dataset.matchingskus.split(",");if(r&&r.length>0)return r[Math.floor((r.length-1)/2)]}return""},_roomvo.getCookieExpiration=function(){var t=new Date,o=180;return t.setDate(t.getDate()+o),t.toUTCString()},_roomvo.trackEvent=function(t,o){try{for(var e=ga.getAll(),r=0;r<e.length;++r)e[r].send("event","Roomvo",t,o)}catch(n){}try{var i={action:t,label:o},a=new CustomEvent("roomvo-event",{detail:i});document.dispatchEvent(a)}catch(n){}},_roomvo.createStimr=function(){var t=document.createElement("img");t.src="https://www.roomvo.com/media/vendors/cb2/images/camera_icon.png",t.style.marginRight="12px",t.style.verticalAlign="middle",t.style.width="24px",t.style.height="20px",t.style.display="inline-block";var o=document.createElement("span");o.innerText="view in my room",o.style.color="#222222";var e=document.createElement("a");return e.classList.add(_roomvo.stimrClass),e.href="#",e.style.marginTop="12px",e.style.marginBottom="12px",e.style.boxSizing="border-box",e.style.padding="8px",e.style.textAlign="center",e.style.verticalAlign="middle",e.style.borderStyle="solid",e.style.borderWidth="1px",e.style.borderColor="#222222",e.style.paddingTop="10px",e.style.paddingBottom="10px",e.style.paddingLeft="20px",e.style.paddingRight="20px",e.style.background="white",e.style["float"]="left",e.style.clear="both",e.appendChild(t),e.appendChild(o),e},_roomvo.notifyConversion=function(){var t=["div.receipt-basic-information > p"];_roomvo.onAllSelectorsAvailable(document,t,function(){for(var o=null,e=0,r="USD",n=document.querySelectorAll(t),i=0;i<n.length;++i)if(n[i].innerText.indexOf("Order Number")>=0){var a=n[i].innerText.split(":");a.length>1&&(o=a[1].trim())}else if(n[i].innerText.indexOf("Order Total")>=0){var s=n[i].innerText.split(":");s.length>1&&(e=_roomvo.priceToNumber(s[1].trim()))}if(o){var l=new XMLHttpRequest;l.open("POST",_roomvo.serverUrl+"/api/notify_conversion",!0);var d=new FormData;d.append("visitor_id",_roomvo.visitorIds[_roomvo.getVendorUrlPath()]),d.append("total",e),d.append("currency",r),d.append("transaction_id",o),l.send(d)}})},_roomvo.onBodyLoaded=function(){var t=_roomvo.getCurrentUrlPath();t.indexOf("/Checkout/Confirmation")>=0?_roomvo.notifyConversion():_roomvo.addStimrButtonsToPage(_roomvo.createStimr,"div#jsRoomvo")},function(){if(!_roomvo.isBot()&&!_roomvo.mainFunctionDone){window.addEventListener("keydown",function(t){if("Tab"===t.key&&"none"!=document.getElementById("ffPopup").style.display&&document.activeElement!=document.getElementById("ffPopup")){var o={action:"roomvoFocusIframe"};window.postMessage(o,"*")}});for(var t=document.cookie.split(";"),o=0;o<t.length;++o)t[o].indexOf("ffvisitorids")>=0?_roomvo.visitorIds=_roomvo.JsonParse(t[o].substring(t[o].indexOf("=")+1)):t[o].indexOf("fftrackingcode")>=0&&(_roomvo.trackingCode=t[o].substring(t[o].indexOf("=")+1));_roomvo.isInAbExperimentMode()&&_roomvo.manageAbExperiment();var e=function(){var t=document.getElementById("ffPopup"),o=t?t.data:void 0;_roomvo.previousBodyStyleOverflow&&(document.body.style.overflow=_roomvo.previousBodyStyleOverflow),_roomvo.removePopup(),_roomvo.addPopup(),window.history.pushState({roomvoPopupUrl:o},""),window.history.back()},r=0,n=1,i=2,a=function(t){var o=document.getElementById("ffPopup");o&&o.contentWindow&&(t.data.type===r?window.history.state&&"roomvoPopupUrl"in window.history.state?window.history.replaceState({roomvoAppHref:t.data.href},""):window.history.pushState({roomvoAppHref:t.data.href},""):t.data.type===i?window.history.replaceState({roomvoAppHref:t.data.href},""):t.data.type===n&&window.history.back())},s=function(t){var o=document.getElementById("ffPopup");o&&o.contentWindow?t.state&&"roomvoAppHref"in t.state?o.contentWindow.postMessage({action:"roomvoHostNavigation",href:t.state.roomvoAppHref},"*"):e():t.state&&"roomvoPopupUrl"in t.state&&_roomvo.loadPopupWithUrl(t.state.roomvoPopupUrl)};_roomvo.addWindowMessageListener(function(t){t&&t.data&&t.data.action&&("ffClosePopup"==t.data.action?(_roomvo.previousBodyStyleOverflow&&(document.body.style.overflow=_roomvo.previousBodyStyleOverflow),e()):"ffSaveVisitor"==t.data.action?(_roomvo.visitorIds[t.data.vendorUrlPath]=t.data.visitorId,document.cookie="ffvisitorids="+_roomvo.JsonStringify(_roomvo.visitorIds)+"; expires="+_roomvo.getCookieExpiration()+"; path=/"):"roomvoAddToCart"==t.data.action?_roomvo.addToCart(t.data.customData):"ffTrack"==t.data.action?_roomvo.trackEvent(t.data.eventAction,t.data.eventLabel):"ffFocusPopup"==t.data.action?document.getElementById("ffPopup").focus():"roomvoNavigation"===t.data.action&&a(t));
}),window.addEventListener("popstate",function(t){s(t)}),_roomvo.isEmpty(_roomvo.visitorIds)&&_roomvo.getNewVisitorIds();var l=function(){_roomvo.addPopup(),_roomvo.onBodyLoaded()};document.body?l():document.addEventListener("DOMContentLoaded",l),_roomvo.mainFunctionDone=!0}}();