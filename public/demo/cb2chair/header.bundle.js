(this.webpackJsonp=this.webpackJsonp||[]).push([[55],{4:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},50:function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,c,o=s(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))a.call(n,l)&&(o[l]=n[l]);if(r){c=r(n);for(var h=0;h<c.length;h++)i.call(n,c[h])&&(o[c[h]]=n[c[h]])}}return o}},527:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={close:0,resentSearch:1,suggestion:2,invalidate:3},c="recent searches",o="search suggestions",u="product Suggestions",l="undefined"!=typeof window&&window.window&&window.window===window,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[\\@~()^|=_`<>{}]";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regexSpecialChar=new RegExp(t,"g")}var t,n,r;return t=e,(n=[{key:"setConfig",value:function(e){e&&(this.regexSpecialChar=new RegExp(e,"g"))}},{key:"filter",value:function(e){return e.replace(this.regexSpecialChar,"")}}])&&i(t.prototype,n),r&&i(t,r),e}(),d="recent search",g="search suggestions",m="product suggestions",f=function(e){var t=e.originalSearchTerm,n=e.AheadType,r=e.Name,a=e.name,i=e.Title,s=e.baseLoggingURL,c=new CustomEvent("typeAheadTrackEvent",{detail:{originalSearchTerm:t||"",actualSearchTerm:a||r||i,AheadType:n||"Native form submit"},bubbles:!0,cancelable:!0});if(document.body.dispatchEvent(c),s){window.Crate.Services.HttpService.post("/TypeAhead/LogTypeAhead",{baseLoggingURL:s}).then((function(e){return e}))}},p=function(e,t,n,r){var a=t.BaseLoggingURL,i=e.trim(),s=t.SearchSuggestions,c=t.ProductSuggestions,o=new RegExp("(".concat(i,")"),"gi");return s.forEach((function(t){t.htmlAlias=t.Name.replace(o,"<strong>".concat(i,"</strong>")),t.originalSearchTerm=e,t.AheadType=g,t.baseLoggingURL="".concat(a,"racsug&rk=").concat(t.Rank,"&url=/search?query=").concat(encodeURIComponent(t.Name)),t.redirectUrl=function(e,t){return(t?"/kids/search?query=":"/search?query=")+"".concat(encodeURIComponent(e.Name))+(t?"&isKids=".concat(t):"")}(t,n)})),c.forEach((function(t){t.htmlAlias=t.Title.replace(o,"<strong>".concat(i,"</strong>")),t.originalSearchTerm=e,t.AheadType=m,t.baseLoggingUrl="".concat(a,"racclick&rk=").concat(t.Rank,"&url=").concat(encodeURIComponent(t.productUrl)),t.redirectUrl=function(e){return"".concat(e.Url,"?st=").concat(encodeURIComponent(e.Title))}(t)})),r&&(s.length>3&&(s.length=3),c.length>3&&(c.length=3)),{SearchSuggestions:s,ProductSuggestions:c}},v=function(e){var t=c,n=e.recentSearchItems,r=e.handleClick,i=e.handleClearHistory,s=e.currentFocusedItem,o=function(e){var t=e===s?"hover":"",n="clear"===e.type?"clear-result-btn":"";return"ui-menu-item-wrapper ".concat(n," ").concat(t)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{title:t}),n.map((function(e,t){return a.a.createElement("li",{className:o(e),key:e.name,role:"option","aria-selected":e===s},a.a.createElement("div",{className:"section-item"},a.a.createElement("button",{ref:function(t){e.ref=t},type:"button",className:"button-transparent",onClick:function(){return function(e,t){e<n.length-1?r(t):i()}(t,e)}},e.name)))})))},S=function(e){var t=o,n=e.SearchSuggestions,r=e.handleClick,i=e.currentFocusedItem,s=e.isCb2,c=function(e,t,n){var r=0===t?"first-item":t===n-1?"last-item":"";return"ui-menu-item-wrapper ".concat(e===i?"hover":""," ").concat(r)};return a.a.createElement(a.a.Fragment,null,!s&&a.a.createElement(b,{title:t}),n.map((function(e,t){return a.a.createElement("li",{className:c(e,t,n.length),key:e.Name,role:"option","aria-selected":e===i},a.a.createElement("div",{className:"section-item"},a.a.createElement("button",{ref:function(t){e.ref=t},type:"button",className:"button-transparent",onClick:function(){return r(e)},dangerouslySetInnerHTML:{__html:e.htmlAlias}})))})))},y=function(e){var t=u,n=e.ProductSuggestions,r=e.currentFocusedItem,i=e.isCb2,s=e.handleClick,c=function(e,t,n){var a=0===t?"first-item":t===n-1?"last-item":"";return"ui-menu-item-wrapper product-suggestions ".concat(e===r?"hover":""," ").concat(a)};return a.a.createElement(a.a.Fragment,null,!i&&a.a.createElement(b,{title:t}),n.map((function(e,t){return a.a.createElement("li",{className:c(e,t,n.length),key:e.Sku,role:"option","aria-selected":e===r},a.a.createElement("div",{className:"product-item"},a.a.createElement("a",{className:"button-transparent",href:e.redirectUrl,onClick:function(){f(e),s(e)},ref:function(t){e.ref=t}},a.a.createElement("img",{src:e.ImageUrl,alt:e.Title}),a.a.createElement("span",{className:"section-item",dangerouslySetInnerHTML:{__html:e.htmlAlias}}))))})))},b=function(e){var t=e.title;return a.a.createElement("li",null,a.a.createElement("div",{className:"type-section-header"},t))},w=function(e){var t=e.uiStatus,n=e.ProductSuggestions,r=e.recentSearchItems,i=e.SearchSuggestions;return a.a.createElement("div",{"aria-live":"polite",className:"sr-only"},t!==s.close&&"".concat(function(){switch(t){case s.resentSearch:return"".concat(r.length," search history suggestions ").concat("are available. Use up and down arrows to review and enter to select.");case s.suggestion:var e="".concat(i.length," search category suggestions");return e+(e?" and ":"")+"".concat(n.length," search product suggestions");case s.invalidate:return"Search term are invalidate";default:return""}}(),". "))};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=void 0;clearTimeout(n),n=setTimeout((function(){return e.apply(s,a)}),t)}},F=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=E(t).call(this,e))||"object"!==I(i)&&"function"!=typeof i?O(r):i,x(O(n),"clearBtnItem",{name:"clear search history",type:"clear"});var c=e.SearchRestrictedCharacterRegex;return n.restrictedCharacter=new h(c),n.state={placeholder:e.placeholder,value:"",uiStatus:s.close,currentFocusedItemIndex:void 0,focused:!1},n.isCb2=e.brand&&e.brand.indexOf("cb2")>=0,n.fromRef=a.a.createRef(),n.inputRef=a.a.createRef(),n.searchButtonRef=a.a.createRef(),n.getLocalStorageEnable(),n.initHttpService(),n.handleOnBlur=n.handleOnBlur.bind(O(n)),n.handleOnFocus=n.handleOnFocus.bind(O(n)),n.handleOnChange=n.handleOnChange.bind(O(n)),n.getRecentSearchItems=n.getRecentSearchItems.bind(O(n)),n.handleOnSubmit=n.handleOnSubmit.bind(O(n)),n.handleClearHistory=n.handleClearHistory.bind(O(n)),n.handleRecentSearchClick=n.handleRecentSearchClick.bind(O(n)),n.handleSearchSuggestionsClick=n.handleSearchSuggestionsClick.bind(O(n)),n.handleProductSuggestionClick=n.handleProductSuggestionClick.bind(O(n)),n.triggerTypeAheadSuggestion=n.triggerTypeAheadSuggestion.bind(O(n)),n.debounceTriggerTypeAheadSuggestion=T(n.triggerTypeAheadSuggestion,500),n.updateCurrentFocusedItemIndex=n.updateCurrentFocusedItemIndex.bind(O(n)),n.handleKeyPress=n.handleKeyPress.bind(O(n)),n.setKidsBoost=n.setKidsBoost.bind(O(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.isKids&&window.addEventListener("kidsBoost",this.setKidsBoost)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("kidsBoost",this.setKidsBoost)}},{key:"setKidsBoost",value:function(e){var t=e.detail.testCase;t&&this.setState({kidsBoost:t})}},{key:"getLocalStorageEnable",value:function(){if(l){var e=window.Crate;this.storageService=e.Services.StorageService,this.localStorageEnabled=this.storageService.storageEnabled(!0)}}},{key:"getRecentSearchItems",value:function(){if(this.localStorageEnabled){var e=JSON.parse(window.localStorage.getItem("recentSearchItems"));return e&&(e=e.map((function(e){return function(e){return{name:e,AheadType:d}}(e)}))).push(this.clearBtnItem),e||[]}return console.warn("Not support localStorage"),!1}},{key:"initHttpService",value:function(){if(l){var e=window.Crate;this.httpPost=e.Services.HttpService.post,this.httpPrefetch=e.Services.HttpService.prefetch}}},{key:"updateCurrentFocusedItemIndex",value:function(e){if(!e||!this.items||this.items.length<1)this.setState({currentFocusedItemIndex:void 0});else{var t,n=this.state.currentFocusedItemIndex,r=this.items.length-1;t=void 0===n?e>0?0:r:e>0?n+1>r?0:n+1:n-1>=0?n-1:r;var a=this.items[t],i="clear"!==a.type&&(a.name||a.Name||a.Title);i&&this.setState({value:i}),this.setState({currentFocusedItemIndex:t})}}},{key:"storeRecentSearchItems",value:function(e){var t=this,n=this.state.recentSearchItems,r=this.props.maxRecentSearchItemsItem;if(e&&(n||(n=this.getRecentSearchItems()),n&&Array.isArray(n))){var a=(n=n.filter((function(e){return e!==t.clearBtnItem})).map((function(e){return e.name}))).indexOf(e);if(0===a)return;a>0&&n.splice(a,1),n.unshift(e),n.length>r&&(n=n.slice(0,r)),this.storageService.setItem("recentSearchItems",JSON.stringify(n),this.localStorageEnabled),this.setState({recentSearchItems:n})}}},{key:"handleKeyPress",value:function(e){var t=this.state.currentFocusedItemIndex;if(this.items&&!(this.items.length<1)){var n=this.items&&void 0!==t?this.items[t]:void 0;switch(e.key){case"Enter":n&&(n.ImageUrl||"clear"===n.type)&&(e.preventDefault(),n.ref.click());break;case"ArrowUp":e.preventDefault(),this.updateCurrentFocusedItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.updateCurrentFocusedItemIndex(1)}}}},{key:"handleOnFocus",value:function(){this.isCb2||this.setState({placeholder:""}),this.setState({focused:!0});var e=this.state.value;this.triggerDropDown(e)}},{key:"triggerResentSearchDropDown",value:function(){var e=this.getRecentSearchItems(),t=e&&e.length>0?s.resentSearch:s.close;this.setState({recentSearchItems:e,uiStatus:t}),this.items=e,this.updateCurrentFocusedItemIndex()}},{key:"triggerTypeAheadSuggestion",value:function(e){var t=this;if(e&&!(e.length<3)){var n=this.props,r=n.isMobile,a=n.isKids,i="/TypeAhead?query=".concat(e);this.httpPost||this.initHttpService(),this.httpPost(i).then((function(n){var i=t.state.value;if(i&&0!==i.length&&i===e){var c=p(e,n,a,r&&"false"!==r),o=c.SearchSuggestions,u=c.ProductSuggestions,l=o&&u&&(o.length>0||u.length>0)?s.suggestion:s.close;t.setState({SearchSuggestions:o,ProductSuggestions:u,uiStatus:l}),t.updateCurrentFocusedItemIndex(),t.items=[].concat(k(o),k(u))}}))}}},{key:"triggerDropDown",value:function(e){e.length<1?this.triggerResentSearchDropDown():e.length<3?this.closeUi():this.debounceTriggerTypeAheadSuggestion(e.trim())}},{key:"closeUi",value:function(){var e=this.props.placeholder;this.setState({uiStatus:s.close,ProductSuggestions:null,SearchSuggestions:null,recentSearchItems:null,currentFocusedItemIndex:void 0,placeholder:e}),this.items=void 0,this.updateCurrentFocusedItemIndex()}},{key:"handleOnBlur",value:function(){var e=this;this.setState({focused:!1}),setTimeout((function(){e.closeUi()}),200)}},{key:"handleOnChange",value:function(e){var t=e.target.value;this.setState({value:t,currentFocusedItemIndex:void 0}),this.triggerDropDown(t)}},{key:"handleOnSubmit",value:function(e){var t=this.restrictedCharacter.filter(this.inputRef.current.value);if(t!==this.inputRef.current.value&&this.setState({value:t}),!t.length)return e.preventDefault(),void this.closeUi();this.storeRecentSearchItems(t),this.fireTrackingEvent(t),this.closeUi()}},{key:"triggerSubmit",value:function(){var e=this.fromRef.current;setTimeout((function(){e&&(e.dispatchEvent(new Event("submit")),e.submit())}),0)}},{key:"handleClearHistory",value:function(){this.closeUi(),this.storageService.removeItem("recentSearchItems",this.localStorageEnabled)}},{key:"handleRecentSearchClick",value:function(e){this.setState({value:e.name},this.triggerSubmit())}},{key:"handleSearchSuggestionsClick",value:function(e){var t=e.redirectUrl,n=e.Name,r=this.props.isKids,a=this.state.testCase,i=n;if(this.setState({value:i}),this.storeRecentSearchItems(i),f(e),t){var s=r&&a?"".concat(t,"&kidsBoost=").concat(a):t;window.location.href=s}}},{key:"handleProductSuggestionClick",value:function(e){var t=e.Title;this.setState({value:t})}},{key:"fireTrackingEvent",value:function(e){var t=this.state.currentFocusedItemIndex,n=this.items&&void 0!==t?this.items[t]:void 0;n&&"clear"!==n.type&&!n.ImageUrl?f(n):f({name:e})}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.focused,r=e.uiStatus,i=e.placeholder,c=e.recentSearchItems,o=e.SearchSuggestions,u=e.ProductSuggestions,l=e.currentFocusedItemIndex,h=e.kidsBoost,d=this.props,g=d.maxlength,m=d.isMobile,f=d.isKids,p=d.isError,b=d.idPrefix,I=f?"/kids/search":"/search",k=this.items;window.testItem=k;var C=k&&void 0!==l?k[l]:void 0,E="typeAhead-result-".concat(b),O="header-search-icon ".concat(n||t&&t.length>0?"is-active":""),R="underline ".concat(n||t&&t.length>0?"is-active":""),x="search-typeAhead-input ".concat(n||t&&t.length>0?"is-active":"");return a.a.createElement("form",{id:"".concat(b,"-header-search-form"),action:I,className:"site-search search-area-sli react-search-form",onSubmit:this.handleOnSubmit,ref:this.fromRef},a.a.createElement("div",null,a.a.createElement("input",{id:"".concat(b,"-header-search-input"),type:"search",name:"query",className:x,placeholder:i,maxLength:g,autoComplete:"off",onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,value:t,onChange:this.handleOnChange,ref:this.inputRef,onKeyDown:this.handleKeyPress,"aria-label":"Search",role:"combobox","aria-expanded":r!==s.close,"aria-controls":E,"aria-autocomplete":"both","aria-activedescendant":"","aria-owns":E}),f&&a.a.createElement("input",{type:"hidden",id:"".concat(b,"-isKids"),name:"isKids",value:"true"}),f&&h&&a.a.createElement("input",{type:"hidden",id:"".concat(b,"-kidsBoost"),name:"kidsBoost",value:h}),a.a.createElement("button",{id:"".concat(b,"-header-search-button"),type:"submit",value:"Submit",className:O,ref:this.searchButtonRef},a.a.createElement("svg",{className:"svg-icon-search","aria-hidden":"true",focusable:"false"},a.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"#svg-icon-search"})),a.a.createElement("span",{className:"sr-only"},"Search")),(!m||p)&&a.a.createElement("span",{className:R}),r!==s.close&&a.a.createElement("ul",{className:"search-typeahead dropdown-list",id:E,"aria-label":"Search suggestions",role:"listbox",tabIndex:"0"},r===s.resentSearch&&a.a.createElement(v,{recentSearchItems:c,handleClearHistory:this.handleClearHistory,handleClick:this.handleRecentSearchClick,currentFocusedItem:C}),r===s.suggestion&&a.a.createElement(a.a.Fragment,null,o.length>0&&a.a.createElement(S,{SearchSuggestions:o,currentFocusedItem:C,isCb2:this.isCb2,kidsBoost:h,handleClick:this.handleSearchSuggestionsClick}),u.length>0&&a.a.createElement(y,{ProductSuggestions:u,currentFocusedItem:C,isCb2:this.isCb2,handleClick:this.handleProductSuggestionClick}))),a.a.createElement(w,{uiStatus:r,ProductSuggestions:u,recentSearchItems:c,SearchSuggestions:o})))}},{key:"currentFocusedItem",get:function(){var e=this.state.currentFocusedItemIndex;if(this.items&&e)return this.items[e]}}])&&C(n.prototype,r),i&&C(n,i),t}(a.a.Component);x(F,"defaultProps",{maxRecentSearchItemsItem:6,gSearchRestrictedCharacter:"[\\@~()^|=_`<>{}]",preFetchUrls:void 0,idPrefix:"header",maxlength:100,placeholder:"Search"});t.a=F},676:function(e,t,n){"use strict";n.r(t),function(e){var t=n(527);e.TypeAheadComponent=t.a}.call(this,n(4))}},[[676,0,1]]]);;
