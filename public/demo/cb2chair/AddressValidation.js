var Crate=Crate||{};Crate.Services=Crate.Services||{};Crate.Services.AddressValidationService=function(){function n(n,i){function r(n){return typeof n=="undefined"||n===null||n.trim().length===0}var u=/^[^\/]+[\/]?[^\/]+$/,e=/^([A-Za-z \/]+['\.\-\(\)]?)+$/,o=/^[^\:]+[\:]?[^\:]+$/,s=/^[^<>@\&\""\`\%\?\^\=\[\]\{\}\|\\]+$/,h=i?/^(?!.*[DdFfIiOoQqUu])[A-VXYa-vxy][0-9][A-Za-z][ ]?[0-9][A-Za-z][0-9]$/:/^([\d]{5})$/,f={firstName:r(n.firstName),firstNameInvalid:!r(n.firstName)&&(!u.test(n.firstName)||!e.test(n.firstName)),lastName:r(n.lastName),lastNameInvalid:!r(n.lastName)&&(!u.test(n.lastName)||!e.test(n.lastName)),address1:r(n.address1),address1Invalid:!r(n.address1)&&(!u.test(n.address1)||!o.test(n.address1)||!s.test(n.address1)),address2Invalid:!r(n.address2)&&(!u.test(n.address2)||!o.test(n.address2)||!s.test(n.address2)),postalCode:r(n.postalCode)||n.postalCode.trim().length<5||(i?n.postalCode.trim().length>7:n.postalCode.trim().length>5)||!h.test(n.postalCode),city:r(n.city),cityInvalid:!r(n.city)&&(n.city.trim().length>28||!/^[^\&]+(\& )?[^\&]+$/.test(n.city)||!/^([A-Za-z\d \/\&]+['\,\;\.\-\(\)]?)+$/.test(n.city)),state:r(n.state),email:r(n.emailAddress),emailInvalid:!r(n.emailAddress)&&(!u.test(n.emailAddress)||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.emailAddress)),dayPhone:typeof n.dayPhone=="undefined"?!0:!(/^(?:[\+\s]?1[-\s]?)?\(?([2-9]{1}\d{2})\)?-?\s?(\d{3})-?\s?(\d{4})$/.test(n.dayPhone.trim())&&t(n.dayPhone.trim()))},c=!Object.keys(f).some(function(n){return f[n]===!0});return{validationErrors:f,isValid:c}}function t(n){var u,t;if(n){if(u=/[^A-Za-z0-9]/g,t=n.replace(u,""),t.length===11&&t.charAt(0)==="1"&&(t=t.substring(1)),t.length!==10)return!1;var i=t.substring(0,3),r=t.substring(3,6),f=t.substring(6,10);return isNaN(i)||isNaN(r)||isNaN(f)?!1:i.charAt(0)!="-"&&i.trim().length+r.trim().length+f.trim().length===10&&r!=="555"&&r.charAt(0)!=="0"&&r.charAt(0)!=="1"&&i.charAt(0)!=="0"&&i.charAt(0)!=="1"?!0:!1}return!1}return{validateAddress:n}}()