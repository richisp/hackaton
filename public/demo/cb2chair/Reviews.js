"use strict";function _extends(){return _extends=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},_extends.apply(this,arguments)}function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _typeof(n){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}function _classCallCheck(n,t){if(!_instanceof(n,t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}var AddReviewButton=function(n){return React.createElement("div",{className:"add-review-container"},React.createElement("button",{onClick:n.onClick,className:"button button-primary button-lg button-add-review"},n.totalReviews>0?"Write a Review":"Be the First to Review"))},ClientResponses=function(n){var t=n.clientresponses.map(function(t,i){return React.createElement("div",{key:i,className:"crate-response"},React.createElement("span",{className:"crate-response-title"},"Response from ",t.Name),React.createElement("span",{className:"crate-response-text"},t.Response),React.createElement("span",null,React.createElement("b",null,t.Name)),React.createElement("span",null,"·"),React.createElement("span",null,n.convertTimeFriendly(t.Date)))},this);return React.createElement("div",null,t)},LoadMoreReviews=function(n){return n.totalReviewCount<=n.shownReviewCount?React.createElement("div",null):React.createElement("div",{className:"more-reviews-container"},React.createElement("button",{onClick:n.loadMoreReviews,className:"button button-transparent more-reviews"},n.isCb2?React.createElement("span",null,"Show More Reviews"):React.createElement("span",null,"Read More Reviews")))},OriginalNamePost=function(n){var t=n.review;return t.OriginalName?React.createElement("span",{className:"originally-posted-message"},"Originally posted on ",t.OriginalName):React.createElement("div",null)},ProductReview=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isCollapsed:!0,embiggenedPhotoId:""},i.toggleCollapsed=i.toggleCollapsed.bind(_assertThisInitialized(i)),i.embiggenPhoto=i.embiggenPhoto.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var n=this.props.page*10;n==this.props.itemIndex&&this.props.page>0&&(this.refs.reviewItem.focus(),this.refs.reviewItem.classList.add("a11y-focused"))}},{key:"toggleCollapsed",value:function(){this.setState({isCollapsed:!this.state.isCollapsed})}},{key:"convertTimeFriendly",value:function(n){var f=new Date(n),e=new Date,t=e.getTime()-f.getTime(),r=Math.floor(t/31536e6),i,u;return(t-=r*31536e6,i=Math.floor(t/2592e6),t-=i*2592e6,u=Math.floor(t/864e5),t-=u*864e5,r===1)?"1 Year Ago":r>1?r+" Years ago":i===1?"1 Month Ago":i>1?i+" Months Ago":u<=1?"A Day Ago":u+" Days Ago"}},{key:"renderPhotos",value:function(){var n=this;if(this.props.review.Photos){var t=this.props.review.Photos.map(function(t,i){var r=n.state.embiggenedPhotoId==t.Id;if(r)return React.createElement(ReviewPhoto,{key:i,noOfPhoto:i+1,totalNoOfPhoto:n.props.review.Photos.length,photo:t,embiggenPhoto:n.embiggenPhoto,isEmbiggened:r,isMobile:n.props.isMobile})}),i=this.props.review.Photos.map(function(t,i){return React.createElement(ReviewPhoto,{key:t.Id,noOfPhoto:i+1,totalNoOfPhoto:n.props.review.Photos.length,photo:t,embiggenPhoto:n.embiggenPhoto,isEmbiggened:!1,isMobile:n.props.isMobile})});return t.concat(i)}}},{key:"embiggenPhoto",value:function(n){this.state.embiggenedPhotoId==n?this.setState({embiggenedPhotoId:""}):this.setState({embiggenedPhotoId:n})}},{key:"render",value:function(){var n=this.props.review,i=this.props.review.ReviewText?this.props.review.ReviewText.length:0,r=i>200,u=this.renderPhotos(),t,f;return t=n.ReviewText&&n.ReviewText.length!==0?React.createElement("div",{className:"review-text"},n.ReviewText):React.createElement("span",{id:"reviewText",className:"review-text-italic"},"This customer provided a rating-only review."),f=r&&React.createElement("a",{onClick:this.toggleCollapsed,className:"reveal-toggle ".concat(this.state.isCollapsed?"":" remove-fade ")},this.state.isCollapsed?React.createElement("span",{className:"js-more ".concat(this.state.isCollapsed?"":"hidden")},"Read more"):React.createElement("span",{className:"js-less ".concat(this.state.isCollapsed?"hidden":"")},"Show Less")),React.createElement("li",{ref:"reviewItem",className:"review-item",tabIndex:"-1"},React.createElement(StarRating,{review:n,starsUrl:this.props.starsUrl}),React.createElement("h3",{className:"review-title"},n.Title),React.createElement(RevealContent,{linesVisible:3},t),React.createElement("div",{className:"review-image-thumbs"},React.createElement("ul",{className:"light-gallery"},u)),React.createElement("div",{className:"review-details"},React.createElement("span",{className:"userId"},n.UserNickname),React.createElement("span",{className:"submittedTime"},this.convertTimeFriendly(n.SubmissionTime)),React.createElement("span",null," | "),React.createElement(ReviewVote,{ids:this.props.ids,review:n,onReviewUpvote:this.props.onReviewUpvote,onReviewDownvote:this.props.onReviewDownvote,onReportReview:this.props.onReportReview})),React.createElement(ClientResponses,{clientresponses:n.ClientResponses,convertTimeFriendly:this.convertTimeFriendly}),React.createElement(OriginalNamePost,{review:n}),React.createElement(SyndicationPost,{review:n}))}}]),t}(React.Component),ProductReviewsList=function(n){var t=n.reviews||[],i=t.map(function(t,i){return React.createElement(ProductReview,{key:t.Id,id:t.Id,review:t,itemIndex:i,page:n.page,starsUrl:n.starsUrl,reviewTimeHelpers:n.reviewTimeHelpers,isMobile:n.isMobile,onReviewUpvote:n.onReviewUpvote,onReviewDownvote:n.onReviewDownvote,onReportReview:n.onReportReview})},this);return React.createElement("ul",{id:"reviews-container",className:"reviews-container flex",tabIndex:"-1"},i)},ReviewAuthenticity=function(){return React.createElement("div",{className:"authenticity-txt"},"Our reviews are verified for authenticity."," ",React.createElement("a",{id:"authenticityLnk",href:"javascript:Crate.React.Actions.PopupActions.fetchContent('/browse/popup?popupName=ReviewAuthenticity');",rel:"nofollow,noindex"},"Learn More.",React.createElement("span",{className:"sr-only"},"(opens modal dialog)")))},ReviewFilterService=function(){function n(t){_classCallCheck(this,n);this.props=t;this.sortFilters={mostRecent:"submissiontime:desc",mostHelpful:"helpfulness:desc",highestRated:"rating:desc",lowestRated:"rating:asc"}}return _createClass(n,[{key:"buildReviewsRequestUrl",value:function(n){var u=n.sort,t=10*n.page,i={apiversion:"5.4",passkey:this.props.apiKey,filter:"productid:"+this.props.id,limit:10,sort:u,include:"authors,products",stats:"reviews"},r;return t&&(i.offset=t),r=this.props.apiUrl+"reviews.json",r+this.buildReviewsQueryString(i)}},{key:"buildReviewsQueryString",value:function(n){var t="?apiversion="+n.apiversion+"&passkey="+n.passkey;return t+="&filter="+n.filter,t+="&sort="+n.sort,t+="&limit="+n.limit,t+="&include=authors,products&stats=reviews",n.offset&&(t+="&Offset="+n.offset),t}}]),n}(),ReviewPhoto=function(n){function t(n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))}return _inherits(t,n),_createClass(t,[{key:"handleClick",value:function(n){if(this.props.isMobile)this.props.embiggenPhoto(n.target.id);else{var t=React.createElement("img",{src:this.props.photo.Sizes.normal.Url,alt:"Guest review enlarged image "+this.props.noOfPhoto+" of "+this.props.totalNoOfPhoto});Crate.React.Actions.PopupActions.updateContent({content:t})}}},{key:"handleKeyDown",value:function(n){(n.keyCode==13||n.keyCode==32)&&(this.handleClick(n),n.preventDefault())}},{key:"render",value:function(){var n=this;return this.props.isEmbiggened?React.createElement("li",{className:"reviews-thumb-list-zoomed"},React.createElement("a",{className:"",href:"javascript:;"},React.createElement("img",{src:this.props.photo.Sizes.normal.Url,alt:this.props.photo.Caption,onClick:function(t){return n.handleClick(t)}}))):React.createElement("li",{key:this.props.photo.Id,"data-src":this.props.photo.Sizes.thumbnail.Url,className:"reviews-thumb-list"},React.createElement("a",{role:"button",className:"",href:"javascript:;",onKeyDown:function(t){return n.handleKeyDown(t)}},React.createElement("img",{id:this.props.photo.Id,src:this.props.photo.Sizes.thumbnail.Url,alt:"Guest review image "+this.props.noOfPhoto+" of "+this.props.totalNoOfPhoto+", zoom in",onClick:function(t){return n.handleClick(t)}})))}}]),t}(React.Component),Reviews=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={isPopupOpen:!1,popupContentsLoaded:!1,isLazyLoaded:!1},i.handleReviewSummaryClick=i.handleReviewSummaryClick.bind(_assertThisInitialized(i)),i.openReviewsPopup=i.openReviewsPopup.bind(_assertThisInitialized(i)),i.handleLazyLoad=i.handleLazyLoad.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){var n=this;document.body.addEventListener("headerStarsClicked",function(){n.props.isMobile&&(n.state.isLazyLoaded||n.handleLazyLoad,n.setState({isPopupOpen:!0}))});n.state.isLazyLoaded||Crate.Services.LazyLoadService.watchReactElement(n.refs.reviewsSection,n.handleLazyLoad,"500px 200px")}},{key:"componentDidUpdate",value:function(){this.state.isPopupOpen&&this.openReviewsPopup()}},{key:"handleReviewSummaryClick",value:function(){this.props.isMobile&&this.setState({isPopupOpen:!0})}},{key:"handleLazyLoad",value:function(){Crate.Services.HttpService.loadScript(this.props.apiJsSourceUrl);this.setState({isLazyLoaded:!0})}},{key:"openReviewsPopup",value:function(){this.state.popupContentsLoaded||(this.props.onFilterReviews(),this.setState({popupContentsLoaded:!0}));var n=React.createElement("div",{className:"review-popup-wrap"},React.createElement("div",{className:"review-info row"},React.createElement(ReviewAuthenticity,null),React.createElement(ReviewSummary,this.props)),this.reviewList);Crate.React.Actions.PopupActions.updateContent({title:"Submit Reviews",content:n,containerClasses:["mobile-reviews-container"]})}},{key:"render",value:function(){var t=this.props.reviews?this.props.reviews.length:0,n;return this.reviewList=this.props.totalreviews>0&&React.createElement("div",null,React.createElement("div",{id:"bvParent",className:"bv-reviews-container"},React.createElement("div",{id:"BazaarVoiceReviews",style:{display:"block"},className:"bv-reviews"},React.createElement(SortFilters,{sort:this.props.sort,isMobile:this.props.isMobile,sortFilters:this.props.sortFilters,onFilterReviews:this.props.onFilterReviews}),React.createElement(ProductReviewsList,_extends({},this.props,{reviews:this.props.reviews,reviewTimeHelpers:this.props.reviewTimeHelpers,onReviewUpvote:this.props.onReviewUpvote,onReviewDownvote:this.props.onReviewDownvote,starsUrl:this.props.reviewStarRawUrl,onReportReview:this.props.onReportReview})))),React.createElement(LoadMoreReviews,{loadMoreReviews:this.props.onLoadMoreReviews,totalReviewCount:this.props.totalreviews,shownReviewCount:t,isCb2:this.props.isCb2})),n=this.state.isLazyLoaded&&React.createElement("div",null,React.createElement("h2",{className:"section-header"},React.createElement("a",{className:"section-header-anchor"},"Reviews")),this.props.isCb2?"":React.createElement("div",{className:"section-tagline"},"Read what people are saying"),React.createElement("div",{className:"review-info row"},React.createElement(ReviewAuthenticity,null),React.createElement(ReviewSummary,_extends({},this.props,{onClick:this.handleReviewSummaryClick,starsUrl:this.props.reviewStarUrl,rating:this.props.reviewRating,totalReviews:this.props.reviewCount})),React.createElement(AddReviewButton,{onClick:this.props.onWriteReview,totalReviews:this.props.reviewCount})),!this.props.isMobile&&this.reviewList,this.props.reviewBanner&&React.createElement("div",{className:"review-promo-banner nsInt",dangerouslySetInnerHTML:{__html:this.props.reviewBanner}})),React.createElement("div",{className:"",ref:"reviewsSection"},n)}}]),t}(React.Component),ReviewsApiResponse=function(n,t){for(var f=new ReviewVotingService(t),r=f.updateReviewsWithVotes(n.Results),e=new ReviewStatistics(n,t.id),u,i=0;i<r.length;i++)r[i].ProductId!==t.id.toString()&&(u=n.Includes.Products[r[i].ProductId],u&&(r[i].OriginalName=u.Name));return{reviews:r,totalReviews:n.TotalResults,statistics:e}},ReviewsContainer=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.reviewVotingService=new ReviewVotingService(n),i.reviewFilterService=new ReviewFilterService(n),i.state={sort:i.reviewFilterService.sortFilters.mostRecent,page:0},i.filterReviews=i.filterReviews.bind(_assertThisInitialized(i)),i.loadMoreReviews=i.loadMoreReviews.bind(_assertThisInitialized(i)),i.handleReviewUpvote=i.handleReviewUpvote.bind(_assertThisInitialized(i)),i.handleReviewDownvote=i.handleReviewDownvote.bind(_assertThisInitialized(i)),i.handleReportReview=i.handleReportReview.bind(_assertThisInitialized(i)),i.handleWriteReviewClick=i.handleWriteReviewClick.bind(_assertThisInitialized(i)),i.httpService=Crate.Services.HttpService,i}return _inherits(t,n),_createClass(t,[{key:"componentDidMount",value:function(){this.props.isMobile||this.filterReviews(this.reviewFilterService.sortFilters.mostRecent)}},{key:"loadMoreReviews",value:function(){var n={sort:this.state.sort,page:this.state.page+1},t=this.reviewFilterService.buildReviewsRequestUrl(n);this.httpService.get(t).then(function(t){var i=this.reviewVotingService.updateReviewsWithVotes(this.state.reviews.concat(t.Results));this.setState({sort:n.sort,page:n.page,reviews:i,totalreviews:t.TotalResults})}.bind(this))}},{key:"filterReviews",value:function(n){n||(n=this.reviewFilterService.sortFilters.mostRecent);var t={sort:n,page:0},i=this.reviewFilterService.buildReviewsRequestUrl(t);this.httpService.get(i).then(function(n){var i=new ReviewsApiResponse(n,this.props);this.setState({sort:t.sort,page:t.page,reviews:i.reviews,totalreviews:i.totalReviews,statistics:i.statistics})}.bind(this))}},{key:"handleReviewUpvote",value:function(n){this.reviewVotingService.upVoteReview(n);var t=this.reviewVotingService.updateReviewsWithVotes(this.state.reviews),i=t.find(function(t){return t.Id===n});i&&i.TotalPositiveFeedbackCount++;this.setState({reviews:t})}},{key:"handleReviewDownvote",value:function(n){this.reviewVotingService.downVoteReview(n);var t=this.reviewVotingService.updateReviewsWithVotes(this.state.reviews),i=t.find(function(t){return t.Id===n});i&&i.TotalNegativeFeedbackCount++;this.setState({reviews:t})}},{key:"handleReportReview",value:function(n){this.reviewVotingService.reportReview(n);this.setState({reviews:this.reviewVotingService.updateReviewsWithVotes(this.state.reviews)})}},{key:"handleWriteReviewClick",value:function(){var n=this.props.locale&&this.props.locale.replace("-","_");$BV.ui("rr","submit_review",{productId:this.props.id,Locale:n,IncentivizedReview:this.props.isIncentivizedReview})}},{key:"render",value:function(){return React.createElement(Reviews,_extends({},this.props,this.state,{sortFilters:this.reviewFilterService.sortFilters,onFilterReviews:this.filterReviews,onLoadMoreReviews:this.loadMoreReviews,onReviewUpvote:this.handleReviewUpvote,onReviewDownvote:this.handleReviewDownvote,onReportReview:this.handleReportReview,onWriteReview:this.handleWriteReviewClick,showReviewsPopup:this.showReviewsPopup,starsUrl:this.props.reviewStarUrl,rating:this.props.reviewRating,totalReviews:this.props.reviewCount}))}}]),t}(React.Component),ReviewStatistics=function(n,t){var r=0,u=0,e=0,i=n.Includes.Products||{},o,f;if(i.hasOwnProperty(t)&&(o=i[t],r=o.ReviewStatistics.AverageOverallRating,u=o.ReviewStatistics.TotalReviewCount),u===0){for(f in i)i.hasOwnProperty(f)&&(r+=i[f].ReviewStatistics.AverageOverallRating,i[f].ReviewStatistics.AverageOverallRating>0&&e++);e>0&&(r=r/e);u=n.TotalResults}return{AverageOverallRating:r,TotalReviewCount:u}},ReviewSummary=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.renderStarsOutlet=i.renderStarsOutlet.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"renderStarsOutlet",value:function(){return React.createElement(StarsOutlet,{rating:this.props.reviewRating,starsUrl:this.props.reviewStarUrl,totalreviews:this.props.reviewCount,isMobile:this.props.isMobile,onClick:this.props.onClick})}},{key:"render",value:function(){return this.props.isMobile&&this.props.onClick&&this.props.reviewCount>0?React.createElement("div",{className:"col-xs-12 col-sm-6 review-star-container"},React.createElement("a",{className:"star-ratings-css-link",href:"#",onClick:this.props.onClick},this.renderStarsOutlet())):this.renderStarsOutlet()}}]),t}(React.Component),ReviewVote=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.onUpvoteReview=i.onUpvoteReview.bind(_assertThisInitialized(i)),i.onDownvoteReview=i.onDownvoteReview.bind(_assertThisInitialized(i)),i.onReportReview=i.onReportReview.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"onDownvoteReview",value:function(){if(!this.hasUserAlreadyVoted()){var n=this.props.review.Id;this.props.onReviewDownvote(n)}}},{key:"onUpvoteReview",value:function(){if(!this.hasUserAlreadyVoted()){var n=this.props.review.Id;this.props.onReviewUpvote(n)}}},{key:"onReportReview",value:function(){if(!this.hasUserAlreadyVoted()){var n=this.props.review.Id;this.props.onReportReview(n)}}},{key:"hasUserAlreadyVoted",value:function(){var n=this.props.review.ReviewVote;return n.upvote||n.downvote||n.report}},{key:"render",value:function(){var t=this.props.review,n=this.props.review.ReviewVote;return React.createElement("div",{className:"review-vote-container"},React.createElement("span",{id:"helpful-"+this.props.ids},"Helpful?"),React.createElement("span",{id:"helpful-votes-"+this.props.ids,className:"sr-only"},"votes"),React.createElement("button",{id:"yes-"+this.props.ids,"aria-labelledby":"helpful-"+this.props.ids+" yes-"+this.props.ids,"aria-pressed":n.upvote?"true":"false",className:"button botton-transparent jsReviewYes jsHelpful helpfulVote ".concat(n.upvote?"jsSelected":"jsUnselected"),onClick:this.onUpvoteReview},"Yes"),React.createElement("span",null,"·"),React.createElement("span",{id:"yes-count-"+this.props.ids,"aria-labelledby":"yes-count-"+this.props.ids+" helpful-"+this.props.ids+" helpful-votes-"+this.props.ids,"aria-live":"polite"},t.TotalPositiveFeedbackCount),React.createElement("button",{id:"no-"+this.props.ids,"aria-labelledby":"helpful-"+this.props.ids+" no-"+this.props.ids,"aria-pressed":n.downvote?"true":"false",className:"button botton-transparent jsReviewNo jsHelpful helpfulVote review-no ".concat(n.downvote?"jsSelected":"jsUnselected"),onClick:this.onDownvoteReview},"No"),React.createElement("span",null,"·"),React.createElement("span",{id:"no-count-"+this.props.ids,"aria-labelledby":"no-count-"+this.props.ids+" helpful-"+this.props.ids+" helpful-votes-"+this.props.ids,"aria-live":"polite"},t.TotalNegativeFeedbackCount),React.createElement("button",{onClick:this.onReportReview,"aria-pressed":n.report?"true":"false",className:"button botton-transparent jsFlag reportReview ".concat(n.report?"jsSelected":"jsUnselected")},n.report?"Reported":"Report",React.createElement("span",{className:"sr-only"},"review by ",t.UserNickname)))}}]),t}(React.Component),ReviewVotingService=function(){function n(t){_classCallCheck(this,n);this.props=t;this.votingOptions={upvote:"upvote",downvote:"downvote",report:"report"}}return _createClass(n,[{key:"buildVoteRequest",value:function(n){var t={apiversion:"5.4",passkey:this.props.apiKey,contenttype:"review"};return t.feedbacktype=n.feedbacktype,t.contentid=n.contentid,n.vote&&(t.vote=n.vote),t}},{key:"submitFeedback",value:function(n){var t=this.buildVoteRequest(n);$.ajax({type:"POST",url:this.props.apiUrl+"submitfeedback.json",data:t})}},{key:"upVoteReview",value:function(n){var t={feedbacktype:"helpfulness",contentid:n,vote:"positive"};this.submitFeedback(t);this.storeFeedback({reviewId:n,vote:this.votingOptions.upvote})}},{key:"downVoteReview",value:function(n){var t={feedbacktype:"helpfulness",contentid:n,vote:"negative"};this.submitFeedback(t);this.storeFeedback({reviewId:n,vote:this.votingOptions.downvote})}},{key:"reportReview",value:function(n){var t={feedbacktype:"inappropriate",contentid:n};this.submitFeedback(t);this.storeFeedback({reviewId:n,vote:this.votingOptions.report})}},{key:"storeFeedback",value:function(n){var t=this.getVoteActivity();t[n.reviewId]||(t[n.reviewId]=n.vote,localStorage.setItem("VoteActivitySCB",JSON.stringify(t)))}},{key:"getVoteActivity",value:function(){var n=localStorage.getItem("VoteActivitySCB");return n?JSON.parse(n):{}}},{key:"updateReviewsWithVotes",value:function(n){var t=this.getVoteActivity();return n.map(function(n){var i=t[n.Id],r={upvote:!1,downvote:!1,report:!1};return i&&(r.upvote=i===this.votingOptions.upvote,r.downvote=i===this.votingOptions.downvote,r.report=i===this.votingOptions.report),n.ReviewVote=r,n},this)}}]),n}(),SortFilters=function(n){function t(n){var i;return _classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.state={value:""},i.handleChange=i.handleChange.bind(_assertThisInitialized(i)),i.handleSubmit=i.handleSubmit.bind(_assertThisInitialized(i)),i}return _inherits(t,n),_createClass(t,[{key:"handleChange",value:function(n){this.setState({value:n.target.value})}},{key:"handleSubmit",value:function(n){this.props.onFilterReviews(this.props.sortFilters[this.state.value]);return n.preventDefault(),!1}},{key:"render",value:function(){var n=this,t=React.createElement("form",{className:"bv-reviews-sort",onSubmit:this.handleSubmit},React.createElement("select",{className:"select-md review-filter-dropdown",value:this.state.value,onChange:this.handleChange},React.createElement("option",{value:"0",disabled:!0,selected:!0},"Sort Reviews"),React.createElement("option",{value:"mostRecent"},"Most Recent"),React.createElement("option",{value:"mostHelpful"},"Most Helpful"),React.createElement("option",{value:"highestRated"},"Highest Rated"),React.createElement("option",{value:"lowestRated"},"Lowest Rated")),React.createElement("button",{className:"button button-primary button-lg review-filter-submit",type:"submit"},"Sort")),i=React.createElement("div",{role:"toolbar","aria-label":"review sorting options","aria-controls":"reviews-container",className:"bv-reviews-sort"},React.createElement("button",{onClick:function(){return n.props.onFilterReviews(n.props.sortFilters.mostRecent)},"aria-pressed":this.props.sort===this.props.sortFilters.mostRecent?"true":"false",className:"button-transparent reviews-sort-link ".concat(this.props.sort===this.props.sortFilters.mostRecent?"selectedSort":""," ")},React.createElement("span",{className:"review-line"},"Most Recent"),React.createElement("span",{className:"sr-only"},"reviews")),React.createElement("button",{onClick:function(){return n.props.onFilterReviews(n.props.sortFilters.mostHelpful)},"aria-pressed":this.props.sort===this.props.sortFilters.mostHelpful?"true":"false",className:"button-transparent reviews-sort-link ".concat(this.props.sort===this.props.sortFilters.mostHelpful?"selectedSort":""," ")},React.createElement("span",{className:"review-line"},"Most Helpful"),React.createElement("span",{className:"sr-only"},"reviews")),React.createElement("button",{onClick:function(){return n.props.onFilterReviews(n.props.sortFilters.highestRated)},"aria-pressed":this.props.sort===this.props.sortFilters.highestRated?"true":"false",className:"button-transparent reviews-sort-link ".concat(this.props.sort===this.props.sortFilters.highestRated?"selectedSort":""," ")},React.createElement("span",{className:"review-line"},"Highest Rated"),React.createElement("span",{className:"sr-only"},"reviews")),React.createElement("button",{onClick:function(){return n.props.onFilterReviews(n.props.sortFilters.lowestRated)},"aria-pressed":this.props.sort===this.props.sortFilters.lowestRated?"true":"false",className:"button-transparent reviews-sort-link ".concat(this.props.sort===this.props.sortFilters.lowestRated?"selectedSort":""," ")},React.createElement("span",{className:"review-line"},"Lowest Rated"),React.createElement("span",{className:"sr-only"},"reviews")));return React.createElement("div",null,this.props.isMobile?t:i)}}]),t}(React.Component),StarRating=function(n){var t=n.review,i=t.Rating/5,r=n.starsUrl.replace("${ratingPercent}",i);return React.createElement("img",{className:"review-star-img",alt:t.Rating+" out of 5 stars.by user "+t.UserNickname,src:r,width:"77",height:"34"})},StarsOutlet=function(n){var i=n.rating,r=n.starsUrl,t=n.totalreviews,u=n.isMobile,f=t!=null&&(t>0||!u);return React.createElement("div",{className:"row review-star-container"},React.createElement("img",{className:"review-stars",alt:"",src:r}),React.createElement("div",{className:"review-count"},f&&React.createElement("span",{className:"rating"},"(",i.toFixed?i.toFixed(1):i,") ",React.createElement("span",{className:"sr-only"}," out of 5 stars")),t!=null?t.toLocaleString():"-"," Reviews"))},SyndicationPost=function(n){var t=n.review,i=t.IsSyndicated&&React.createElement("span",{className:"bv-badge-syndicated"},"Originally posted on ",t.SyndicationSource.Name);return React.createElement("div",{className:"review-syndication"},React.createElement("div",{className:"syndication-summary"},i))}